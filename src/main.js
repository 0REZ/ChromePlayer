(function(k,d){function n(a){console.dir(a)}function j(a){console.log("--------------- "+a+" ---------------")}function D(a,b,c,e,g){a>b&&(a=[b,b=a][0]);this.min=a;this.max=b;this.step=c;this.initializer=e;this.callback=g||function(){}}function x(a){this.array=a}function y(a,b,c){this.enumclass=new x(a);this.array=this.enumclass.array;this.initializer=b;this.callback=c||function(){}}function t(a,b,c){this.enumclass=new x(a);this.array=this.enumclass.array;this.initializer=b;this.callback=c||function(){};
var c=c||function(){},e=this;this.enumlinear=new y(a,b,function(a){e.index=e.enumlinear.index;e.value=a;e.history=e.history.concat(e.value);e.array=e.enumlinear.array;c(a,e.app)});for(var g in this.enumlinear)this.enumlinear.hasOwnProperty(g)&&(this[g]=this.enumlinear[g])}function p(a,b,c){this.initializer=b;this.callback=c||function(){};var c=c||function(){},e=this;this.enumlinear=new y(a,function(){b();e.repeat.init();e.shuffle.init();e.enumlinear.init()},function(a,b){j("this.enumlinear callback");
n("value: "+a);e.index=e.enumlinear.index;e.value=a;e.history=e.history.concat(e.value);e.array=e.enumlinear.array;e.enumclass=e.enumlinear.enumclass;c(e.value,b)});this.repeat=new t(["false","true","one"],"false",function(a){n("repeat:"+a)});this.shuffle=new t(["false","true"],"false",function(a){n("shuffle:::"+a);n(e.repeat.value);e.orderedarray||(e.orderedarray=e.enumlinear.enumclass.array||e.array||e.enumlinear.array||[]);switch(a){case "true":a=(void 0===e.value||0>e.array.indexOf(e.value)?[]:
[e.value]).concat(e.orderedarray.shuffle().drop(e.value));e.changeArray(a);break;default:e.changeArray(e.orderedarray),delete e.orderedarray}});for(var g in this.enumlinear)this.enumlinear.hasOwnProperty(g)&&(this[g]=this.enumlinear[g])}function J(a){this.result=a;this.i=0}function R(a,b,c){function e(){var a=u;k.XMLHttpRequest?a=new XMLHttpRequest:k.F&&(a=new ActiveXObject("Microsoft.XMLHTTP"));return a}function g(a,b){function h(a){var b=~~(a[0]/d)-l,a=~~(a[1]/d)+1+l;0>b&&(b=0);a>=blockTotal&&(a=
blockTotal-1);return[b,a]}function g(h,l){for(;n[h[0]];)if(h[0]++,h[0]>h[1]){l&&l();return}for(;n[h[1]];)if(h[1]--,h[0]>h[1]){l&&l();return}var o=[h[0]*d,(h[1]+1)*d-1],q=a,K=function(a){parseInt(a.getResponseHeader("Content-Length"),10)==b&&(h[0]=0,h[1]=blockTotal-1,o[0]=0,o[1]=b-1);for(var a={data:a.W||a.responseText,s:o[0]},c=h[0];c<=h[1];c++)n[c]=a;k+=o[1]-o[0]+1;l&&l()},i=c,j=f,m=!!l,r=e();r?("undefined"===typeof m&&(m=!0),K&&("undefined"!=typeof r.onload?r.onload=function(){"200"==r.status||
"206"==r.status?(r.fileSize=j||r.getResponseHeader("Content-Length"),K(r)):i&&i();r=u}:r.onreadystatechange=function(){4==r.readyState&&("200"==r.status||"206"==r.status?(r.fileSize=j||r.getResponseHeader("Content-Length"),K(r)):i&&i(),r=u)}),r.open("GET",q,m),r.overrideMimeType&&r.overrideMimeType("text/plain; charset=x-user-defined"),o&&r.setRequestHeader("Range","bytes="+o[0]+"-"+o[1]),r.setRequestHeader("If-Modified-Since","Sat, 1 Jan 1970 00:00:00 GMT"),r.send(u)):i&&i()}var d,l,f,k=0,i=new M("",
0,b),n=[];d=d||2048;l="undefined"===typeof l?0:l;blockTotal=~~((b-1)/d)+1;for(var j in i)i.hasOwnProperty(j)&&"function"===typeof i[j]&&(this[j]=i[j]);this.a=function(a){var b;g(h([a,a]));b=n[~~(a/d)];if("string"==typeof b.data)return b.data.charCodeAt(a-b.s)&255;if("unknown"==typeof b.data)return IEBinary_getByteAt(b.data,a-b.s)};this.N=function(){return k};this.f=function(a,b){g(h(a),b)}}var d=function(c){c=parseInt(c.getResponseHeader("Content-Length"),10)||-1;b(new g(a,c))},h=e();h&&(d&&("undefined"!=
typeof h.onload?h.onload=function(){"200"==h.status&&d(this);h=u}:h.onreadystatechange=function(){4==h.readyState&&("200"==h.status&&d(this),h=u)}),h.open("HEAD",a,!0),h.send(u))}function M(a,b,c){var e=a,g=b||0,d=0;this.P=function(){return e};"string"==typeof a?(d=c||e.length,this.a=function(a){return e.charCodeAt(a+g)&255}):"unknown"==typeof a&&(d=c||IEBinary_getLength(e),this.a=function(a){return IEBinary_getByteAt(e,a+g)});this.n=function(a,b){for(var c=Array(b),e=0;e<b;e++)c[e]=this.a(a+e);return c};
this.j=function(){return d};this.d=function(a,b){return(this.a(a)&1<<b)!=0};this.Q=function(a){a=this.a(a);return a>127?a-256:a};this.r=function(a,b){var c=b?(this.a(a)<<8)+this.a(a+1):(this.a(a+1)<<8)+this.a(a);c<0&&(c=c+65536);return c};this.S=function(a,b){var c=this.r(a,b);return c>32767?c-65536:c};this.h=function(a,b){var c=this.a(a),e=this.a(a+1),g=this.a(a+2),d=this.a(a+3),c=b?(((c<<8)+e<<8)+g<<8)+d:(((d<<8)+g<<8)+e<<8)+c;c<0&&(c=c+4294967296);return c};this.R=function(a,b){var c=this.h(a,
b);return c>2147483647?c-4294967296:c};this.q=function(a){var b=this.a(a),c=this.a(a+1),a=this.a(a+2),b=((b<<8)+c<<8)+a;b<0&&(b=b+16777216);return b};this.c=function(a,b){for(var c=[],e=a,g=0;e<a+b;e++,g++)c[g]=String.fromCharCode(this.a(e));return c.join("")};this.e=function(a,b,c){a=this.n(a,b);switch(c.toLowerCase()){case "utf-16":case "utf-16le":case "utf-16be":var b=c,e,g=0,d=1,c=0;e=Math.min(e||a.length,a.length);a[0]==254&&a[1]==255?(b=true,g=2):a[0]==255&&a[1]==254&&(b=false,g=2);b&&(d=0,
c=1);for(var b=[],l=0;g<e;l++){var f=a[g+d],i=(f<<8)+a[g+c],g=g+2;if(i==0)break;else f<216||f>=224?b[l]=String.fromCharCode(i):(f=(a[g+d]<<8)+a[g+c],g=g+2,b[l]=String.fromCharCode(i,f))}a=new String(b.join(""));a.g=g;break;case "utf-8":e=0;g=Math.min(g||a.length,a.length);a[0]==239&&a[1]==187&&a[2]==191&&(e=3);d=[];for(c=0;e<g;c++)if(b=a[e++],b==0)break;else b<128?d[c]=String.fromCharCode(b):b>=194&&b<224?(l=a[e++],d[c]=String.fromCharCode(((b&31)<<6)+(l&63))):b>=224&&b<240?(l=a[e++],i=a[e++],d[c]=
String.fromCharCode(((b&255)<<12)+((l&63)<<6)+(i&63))):b>=240&&b<245&&(l=a[e++],i=a[e++],f=a[e++],b=((b&7)<<18)+((l&63)<<12)+((i&63)<<6)+(f&63)-65536,d[c]=String.fromCharCode((b>>10)+55296,(b&1023)+56320));a=new String(d.join(""));a.g=e;break;default:g=[];d=d||a.length;for(e=0;e<d;){c=a[e++];if(c==0)break;g[e-1]=String.fromCharCode(c)}a=new String(g.join(""));a.g=e}return a};this.M=function(a){return String.fromCharCode(this.a(a))};this.Z=function(){return k.btoa(e)};this.L=function(a){e=k.atob(a)};
this.f=function(a,b){b()}}function N(a,b){this.file=a;this.type=a.type;this.name=a.name;this.filetype=a.filetype;"video"===a.filetype&&b&&(this.htmlElement=b)}function O(a){if(a)for(var b in a)if(a.hasOwnProperty(b)&&a[b]){var c=this.parse(b).join(" ");this.set(c,a[b]);this.keys.push(c)}this.keys=this.keys.sort()}function E(a){this.ctrl=this.alt=this.meta=this.shift=this.global=null;if(!s.regex.onekey.test(a))throw"Don't pass unvalid key into Onekey!";this.parse(a)}function z(){this.ui=i}Array.prototype.clone=
function(){return Array.apply(null,this)};Array.prototype.drop=function(a){for(var b=[],c=0;c<this.length;c++)this[c]!==a&&(b=b.concat([this[c]]));return b};Array.prototype.shuffle=function(){for(var a=this.clone(),b=a.length,c,e,g=Math.random,d=Math.floor;b;)c=d(g()*b),e=a[--b],a[b]=a[c],a[c]=e;return a};Array.prototype.unique=function(){var a=[],b,c,e,g,d;b=-1;for(e=this.length;b<e;++b){c=-1;g=a.length;for(d=!0;c<g;++c)a[c]===this[b]&&(c=g+1,d=!1);d&&a.push(this[b])}return a};Array.prototype.deepEqual=
function(a){if(this.length!==a.length)return!1;for(var b=0;b<this.length;b++)if(this[b]!==a[b])return!1;return!0};"undefined"!==typeof d&&"undefined"!==typeof d.fn&&(d.fn.texttitle=function(a){return this.text(a).attr("title",a)},d.fn.unique=Array.prototype.unique,d.fn.join=Array.prototype.join);"undefined"!==typeof exports&&(exports.log=n,exports.logfn=j);var S={strarr:"abcdefghijklmnopqrstuvwxyz",randomstr:function(){for(var a=this.strarr.length,b="",c=0;c<10;c++)b=b+this.strarr[Math.floor(Math.random()*
a)];return b},createId:function(){return(new Date).getTime().toString()+this.randomstr()},send:function(a){chrome&&chrome.extension&&chrome.extension.sendRequest(a)}};D.prototype={value:void 0,at:function(a){this.value=a===void 0||isNaN(a)?this.value===void 0?(this.min+this.max)/2:this.assert(this.value):this.assert(a);this.callback(this.value,this.app);return this.value},assert:function(a){return Math.min(Math.max(a,this.min),this.max)},increase:function(a){if(a===void 0||isNaN(a))a=this.step;return this.at(this.value+
a)},decrease:function(a){if(a===void 0||isNaN(a))a=this.step;return this.increase(-a)},init:function(a){this.app=a;typeof this.initializer==="function"?this.at(this.initializer()):this.at(this.initializer)},setToMin:function(){return this.at(this.min)},setToMax:function(){return this.at(this.max)}};"undefined"!==typeof exports&&(exports.Limited=D);x.prototype={array:[],succ:function(a){return this.toEnum(1+this.fromEnum(a))},pred:function(a){return this.toEnum(-1+this.fromEnum(a))},toEnum:function(a){if(this.array&&
0<=a&&a<this.array.length)return this.array[a]},fromEnum:function(a){if(this.array)for(var b=0,c=this.array.length;b<c;b++)if(this.array[b]===a)return b},enumFrom:function(a){if(this.array)return this.enumFromTo(a,this.array[this.array.length-1])},enumFromThen:function(a,b){if(this.array){for(var c=this.fromEnum(a),e=this.fromEnum(b),g=[],d=c;0<=d&&d<this.array.length;d=d+(e-c))g=g.concat(this.array[d]);return g}},enumFromTo:function(a,b){return this.enumFromThenTo(a,this.succ(a),b)},enumFromThenTo:function(a,
b,c){if(this.array){var a=this.fromEnum(a),b=this.fromEnum(b),c=this.fromEnum(c),b=b-a,e=[];if(0===b)e=e.concat(this.array[a]);else if(0<b)for(;a<=c&&a<this.array.length;a=a+b)e=e.concat(this.array[a]);else for(;a>=c&&a>=0;a=a+b)e=e.concat(this.array[a]);return e}}};"undefined"!==typeof exports&&(exports.Enum=x);"undefined"===typeof k&&(x=require("./enum").Enum);y.prototype={index:0,value:void 0,history:[],head:function(){return this.at(0)},last:function(){return this.at(this.enumclass.array.length-
1)},nonvalidIndex:function(a){return a===void 0||isNaN(a)||typeof a!=="number"},at:function(a){if(this.nonvalidIndex(a))a=this.index;var b=this.enumclass.toEnum(a);if(!(b===void 0||this.array.length===0)){this.value=b;this.index=a;this.array=this.enumclass.array;this.history=this.history.concat(this.value);this.callback(this.value,this.app);return this.value}},atfromEnum:function(a){a=this.enumclass.fromEnum(a);return a===void 0?void 0:this.at(a)},next:function(a){this.nonvalidIndex(a)&&(a=1);return this.at(this.index+
a)},prev:function(a){this.nonvalidIndex(a)&&(a=-1);return this.next(a)},init:function(a){this.app=a;var b;if(typeof this.initializer==="function")try{b=this.initializer()}catch(c){b=this.array[0]}else b=this.initializer;b=this.atfromEnum(b);if(b===void 0)return this.at(0)},concat:function(a){return this.changeArray(this.enumclass.array.concat(a))},splice:function(a,b){var c=this.enumclass.array;this._index=this.enumclass.fromEnum(this.value)||0;c.splice(a,b);return this.changeArray(c)},remove:function(a){return this.splice(this.enumclass.fromEnum(a),
1)},changeArray:function(a){a=a.drop(void 0);this.enumclass=new x(a);this.array=this.enumclass.array;this.at(this._index-1%this.array.length);return this}};"undefined"!==typeof exports&&(exports.Enumlinear=y);"undefined"===typeof k&&(x=require("./enum").Enum,y=require("./enumlinear").Enumlinear);t.prototype=new y;t.prototype.at=function(a){if(this.nonvalidIndex(a))a=this.index;var b=this.array.length;return this.enumlinear.at((a%b+b)%b)};t.prototype.changeArray=function(a){this.enumlinear.changeArray(a);
this.array=this.enumlinear.array;this.enumclass=this.enumlinear.enumclass};"undefined"!==typeof exports&&(exports.Enumcycle=t);"undefined"===typeof k&&(require("./prelude"),x=require("./enum").Enum,y=require("./enumlinear").Enumlinear,t=require("./enumcycle").Enumcycle);p.prototype=new y;p.prototype.at=function(a){j("Enumdinamic.prototype.at");if(this.nonvalidIndex(a))a=this.index;n("this:::");return this.enumlinear.at(a)};p.prototype.next=function(a){j("Enumdinamic.prototype.next");if(a===void 0||
isNaN(a))a=1;a=this.index===void 0?0:this.index+a;switch(this.repeat.value){case "one":a=this.index;break;case "true":var b=this.enumclass.toEnum(a);if(b===void 0)switch(this.shuffle.value){case "true":this.shuffleOn();a++;default:b=this.array.length;a=(a%b+b)%b}break;default:b=this.enumclass.toEnum(a);if(b===void 0)switch(this.shuffle.value){case "true":this.shuffleOn();default:return}}return this.at(a)};p.prototype.concat=function(a){j("Enumdinamic.prototype.concat");var b=this.array||[];this.orderedarray=
(this.orderedarray||this.array||[]).concat(a);this.changeArray(b.concat(a));this.shuffle.value==="true"&&this.shuffleOn()};p.prototype.remove=function(a){n(this);j("Enumdinamic.prototype.remove");if(this.orderedarray)this.orderedarray=this.orderedarray.drop(a);this.enumlinear.remove(a);n(this)};p.prototype.changeArray=function(a){j("Enumdinamic.prototype.changeArray");n(this.value);a=a.drop(void 0);this.enumlinear.changeArray(a);this.array=this.enumlinear.array;n("this.array: "+this.array.join(","));
n("this.value: "+this.value);this.enumclass=this.enumlinear.enumclass;this.atfromEnum(this.value);for(var b in this.enumlinear)this.enumlinear.hasOwnProperty(b)&&(this[b]=this.enumlinear[b]);return this};p.prototype.setRepeat=function(a){this.repeat.atfromEnum(a)};p.prototype.repeatOff=function(){this.setRepeat("false")};p.prototype.repeatOn=function(){this.setRepeat("true")};p.prototype.repeatOne=function(){this.setRepeat("one")};p.prototype.repeatToggle=function(){this.repeat.next()};p.prototype.repeatToggleOnOff=
function(){this.setRepeat(this.repeat.value==="false"?"true":"false")};p.prototype.setShuffle=function(a){this.shuffle.atfromEnum(a)};p.prototype.shuffleOff=function(){this.setShuffle("false")};p.prototype.shuffleOn=function(){this.setShuffle("true")};p.prototype.shuffleToggle=function(){this.shuffle.next()};p.prototype.shuffleToggleOnOff=function(){this.setShuffle(this.shuffle.value==="false"?"true":"false")};"undefined"!==typeof exports&&(exports.Enumdinamic=p);String.prototype.toBin=function(){for(var a=
[],b=9,c=this;--b;){a.push(c&128);c=c<<1}return a.join("")};String.prototype.unsynchsafe=function(){return(this.charCodeAt(0)&127)<<21|(this.charCodeAt(1)&127)<<14|(this.charCodeAt(2)&127)<<7|this.charCodeAt(3)&127};J.prototype={read:function(){this.header();this.extendedheader();this.frames();return this.tags},header:function(){this.header=this.result.slice(this.i,this.i=this.i+10);this.headerid=this.header.slice(0,3);this.version=[this.header.charCodeAt(3),this.header.charCodeAt(4)];this.flags=
this.header.slice(5,6).toBin();this.tagsize=this.header.slice(6,10).unsynchsafe()},extendedheader:function(){if(this.flags[1]==="1"){var a=this.result.slice(this.i,this.i=this.i+4).unsynchsafe();this.result.slice(this.i,this.i=this.i+a)}},readFrameSize:function(a){return((parseInt(a.charCodeAt(0),10)*128+parseInt(a.charCodeAt(1),10))*128+parseInt(a.charCodeAt(2),10))*128+parseInt(a.charCodeAt(3),10)},frames:function(){for(var a={},b=this.i;b<this.tagsize;){var c=this.result.slice(b,b=b+4).toString(),
e=this.readFrameSize(this.result.slice(b,b=b+4));this.result.slice(b,b=b+2).toBin();var g;a:{g=this.result.slice(b,b=b+e);switch(g.charCodeAt(0)){case 0:n("ISO-8859-1");for(var d="",h=0;h<g.length;)d=d+String.fromCharCode(g.charCodeAt(h++)|g.charCodeAt(h++)<<8);h=/.{0,2}[\uff01\ufe00]./;g=h.test(d)?d.replace(h,""):g.toString();break a;case 2:n("UTF-16BE without BOM");case 1:n("UTF-16 with BOM");for(var d="",f=String.fromCharCode,i=void 0,h=1,o=g.length;h<o;)if(i===1||(g.charCodeAt(h)&255)===255){if(!i){h=
h+2;i=1}d=d+f(g.charCodeAt(h++)|g.charCodeAt(h++)<<8)}else if(i===2||(g.charCodeAt(h)&254)===254){if(!i){h=h+2;i=2}d=d+f(g.charCodeAt(h++)<<8|g.charCodeAt(h++))}else d=d+g[h++];g=d;break a;case 3:n("UTF-8");d="";f=String.fromCharCode;h=1;for(o=g.length;h<o;){i=g.charCodeAt(h);d=i&128?i&32?i&16?i&8?i&4?d+f((g.charCodeAt(h++)&1)<<30|(g.charCodeAt(h++)&63)<<24|(g.charCodeAt(h++)&63)<<18|(g.charCodeAt(h++)&63)<<12|g.charCodeAt(h++)&6|g.charCodeAt(h++)):d+f((g.charCodeAt(h++)&3)<<24|(g.charCodeAt(h++)&
63)<<18|(g.charCodeAt(h++)&63)<<12|g.charCodeAt(h++)&6|g.charCodeAt(h++)):d+f((g.charCodeAt(h++)&7)<<18|(g.charCodeAt(h++)&63)<<12|g.charCodeAt(h++)&6|g.charCodeAt(h++)):d+f((g.charCodeAt(h++)&15)<<12|(g.charCodeAt(h++)&63)<<6|g.charCodeAt(h++)&63):d+f((g.charCodeAt(h++)&31)<<6|g.charCodeAt(h++)&63):d+g[h++]}g=d;break a}g=void 0}if(e){c!=="APIC"&&n("flame text: "+g);if(g){a[c]=g;this.shortcuts[c]&&(a[this.shortcuts[c]]=g)}}}this.tags=a},shortcuts:{TIT2:"title",TPE1:"artist",TALB:"album",TYER:"year",
COMM:"comment",TRCK:"track",TCON:"genre",APIC:"picture",USLT:"lyrics",APIC:"picture"}};"undefined"!==typeof exports&&(exports._ID3=J);var u=null;document.write("<script type='text/vbscript'>\r\nFunction IEBinary_getByteAt(strBinary, iOffset)\r\n\tIEBinary_getByteAt = AscB(MidB(strBinary,iOffset+1,1))\r\nEnd Function\r\nFunction IEBinary_getLength(strBinary)\r\n\tIEBinary_getLength = LenB(strBinary)\r\nEnd Function\r\n<\/script>\r\n");this.FileAPIReader=function(a){return function(b,c){var e=new FileReader;
e.onload=function(a){c(new M(a.target.result))};e.readAsBinaryString(a)}};this.Base64=this.k={i:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",z:function(a){for(var b="",c,e,d,l,h,f,i=0;i<a.length;){c=a[i++];e=a[i++];d=a[i++];l=c>>2;c=(c&3)<<4|e>>4;h=(e&15)<<2|d>>6;f=d&63;isNaN(e)?h=f=64:isNaN(d)&&(f=64);b=b+Base64.i.charAt(l)+Base64.i.charAt(c)+Base64.i.charAt(h)+Base64.i.charAt(f)}return b}};this.k.encodeBytes=this.k.z;var f=this.t={},A={},T=[0,7];f.C=function(a,b,c){c=c||{};
(c.dataReader||R)(a,function(e){e.f(T,function(){var d=e.c(4,7)=="ftypM4A"?ID4:e.c(0,3)=="ID3"?ID3v2:ID3v1;d.o(e,function(){var l=c.tags,h=d.p(e,l),l=A[a]||{},f;for(f in h)h.hasOwnProperty(f)&&(l[f]=h[f]);A[a]=l;b&&b()})})})};f.A=function(a){if(!A[a])return u;var b={},c;for(c in A[a])A[a].hasOwnProperty(c)&&(b[c]=A[a][c]);return b};f.B=function(a,b){return!A[a]?u:A[a][b]};this.ID3=this.t;f.loadTags=f.C;f.getAllTags=f.A;f.getTag=f.B;var f=this.u={},U="Blues;Classic Rock;Country;Dance;Disco;Funk;Grunge;Hip-Hop;Jazz;Metal;New Age;Oldies;Other;Pop;R&B;Rap;Reggae;Rock;Techno;Industrial;Alternative;Ska;Death Metal;Pranks;Soundtrack;Euro-Techno;Ambient;Trip-Hop;Vocal;Jazz+Funk;Fusion;Trance;Classical;Instrumental;Acid;House;Game;Sound Clip;Gospel;Noise;AlternRock;Bass;Soul;Punk;Space;Meditative;Instrumental Pop;Instrumental Rock;Ethnic;Gothic;Darkwave;Techno-Industrial;Electronic;Pop-Folk;Eurodance;Dream;Southern Rock;Comedy;Cult;Gangsta;Top 40;Christian Rap;Pop/Funk;Jungle;Native American;Cabaret;New Wave;Psychadelic;Rave;Showtunes;Trailer;Lo-Fi;Tribal;Acid Punk;Acid Jazz;Polka;Retro;Musical;Rock & Roll;Hard Rock;Folk;Folk-Rock;National Folk;Swing;Fast Fusion;Bebob;Latin;Revival;Celtic;Bluegrass;Avantgarde;Gothic Rock;Progressive Rock;Psychedelic Rock;Symphonic Rock;Slow Rock;Big Band;Chorus;Easy Listening;Acoustic;Humour;Speech;Chanson;Opera;Chamber Music;Sonata;Symphony;Booty Bass;Primus;Porn Groove;Satire;Slow Jam;Club;Tango;Samba;Folklore;Ballad;Power Ballad;Rhythmic Soul;Freestyle;Duet;Punk Rock;Drum Solo;Acapella;Euro-House;Dance Hall".split(";");
f.o=function(a,b){var c=a.j();a.f([c-128-1,c],b)};f.p=function(a){var b=a.j()-128;if(a.c(b,3)=="TAG"){var c=a.c(b+3,30).replace(/\0/g,""),e=a.c(b+33,30).replace(/\0/g,""),d=a.c(b+63,30).replace(/\0/g,""),l=a.c(b+93,4).replace(/\0/g,"");if(a.a(b+97+28)==0)var h=a.c(b+97,28).replace(/\0/g,""),f=a.a(b+97+29);else{h="";f=0}a=a.a(b+97+30);return{version:"1.1",title:c,artist:e,album:d,year:l,comment:h,track:f,genre:a<255?U[a]:""}}return{}};this.ID3v1=this.u;var F=function(a,b){var c=b.a(a),e=b.a(a+1),d=
b.a(a+2);return b.a(a+3)&127|(d&127)<<7|(e&127)<<14|(c&127)<<21},v=this.G={};v.b={};v.frames={BUF:"Recommended buffer size",CNT:"Play counter",COM:"Comments",CRA:"Audio encryption",CRM:"Encrypted meta frame",ETC:"Event timing codes",EQU:"Equalization",GEO:"General encapsulated object",IPL:"Involved people list",LNK:"Linked information",MCI:"Music CD Identifier",MLL:"MPEG location lookup table",PIC:"Attached picture",POP:"Popularimeter",REV:"Reverb",RVA:"Relative volume adjustment",SLT:"Synchronized lyric/text",
STC:"Synced tempo codes",TAL:"Album/Movie/Show title",TBP:"BPM (Beats Per Minute)",TCM:"Composer",TCO:"Content type",TCR:"Copyright message",TDA:"Date",TDY:"Playlist delay",TEN:"Encoded by",TFT:"File type",TIM:"Time",TKE:"Initial key",TLA:"Language(s)",TLE:"Length",TMT:"Media type",TOA:"Original artist(s)/performer(s)",TOF:"Original filename",TOL:"Original Lyricist(s)/text writer(s)",TOR:"Original release year",TOT:"Original album/Movie/Show title",TP1:"Lead artist(s)/Lead performer(s)/Soloist(s)/Performing group",
TP2:"Band/Orchestra/Accompaniment",TP3:"Conductor/Performer refinement",TP4:"Interpreted, remixed, or otherwise modified by",TPA:"Part of a set",TPB:"Publisher",TRC:"ISRC (International Standard Recording Code)",TRD:"Recording dates",TRK:"Track number/Position in set",TSI:"Size",TSS:"Software/hardware and settings used for encoding",TT1:"Content group description",TT2:"Title/Songname/Content description",TT3:"Subtitle/Description refinement",TXT:"Lyricist/text writer",TXX:"User defined text information frame",
TYE:"Year",UFI:"Unique file identifier",ULT:"Unsychronized lyric/text transcription",WAF:"Official audio file webpage",WAR:"Official artist/performer webpage",WAS:"Official audio source webpage",WCM:"Commercial information",WCP:"Copyright/Legal information",WPB:"Publishers official webpage",WXX:"User defined URL link frame",AENC:"Audio encryption",APIC:"Attached picture",COMM:"Comments",COMR:"Commercial frame",ENCR:"Encryption method registration",EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",
GRID:"Group identification registration",IPLS:"Involved people list",LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",RBUF:"Recommended buffer size",RVAD:"Relative volume adjustment",RVRB:"Reverb",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",TALB:"Album/Movie/Show title",TBPM:"BPM (beats per minute)",TCOM:"Composer",TCON:"Content type",
TCOP:"Copyright message",TDAT:"Date",TDLY:"Playlist delay",TENC:"Encoded by",TEXT:"Lyricist/Text writer",TFLT:"File type",TIME:"Time",TIT1:"Content group description",TIT2:"Title/songname/content description",TIT3:"Subtitle/Description refinement",TKEY:"Initial key",TLAN:"Language(s)",TLEN:"Length",TMED:"Media type",TOAL:"Original album/movie/show title",TOFN:"Original filename",TOLY:"Original lyricist(s)/text writer(s)",TOPE:"Original artist(s)/performer(s)",TORY:"Original release year",TOWN:"File owner/licensee",
TPE1:"Lead performer(s)/Soloist(s)",TPE2:"Band/orchestra/accompaniment",TPE3:"Conductor/performer refinement",TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPUB:"Publisher",TRCK:"Track number/Position in set",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSIZ:"Size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",TYER:"Year",TXXX:"User defined text information frame",
UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"};var G={title:["TIT2","TT2"],artist:["TPE1","TP1"],album:["TALB","TAL"],year:["TYER","TYE"],comment:["COMM",
"COM"],track:["TRCK","TRK"],genre:["TCON","TCO"],picture:["APIC","PIC"],lyrics:["USLT","ULT"]},V=["title","artist","album","track"];v.o=function(a,b){a.f([0,F(6,a)],b)};v.p=function(a,b){var c=0,e=a.a(c+3);if(e>4)return{version:">2.4"};var d=a.a(c+4),l=a.d(c+5,7),h=a.d(c+5,6),f=a.d(c+5,5),i=F(c+6,a),c=c+10;if(h)var o=a.h(c,true),c=c+(o+4);var e={version:"2."+e+"."+d,major:e,revision:d,flags:{unsynchronisation:l,extended_header:h,experimental_indicator:f},size:i},q;if(l)q={};else{for(var i=i-10,l=
a,d=b,h={},f=e.major,o=[],k=0,j;j=(d||V)[k];k++)o=o.concat(G[j]||[j]);for(d=o;c<i;){o=u;k=l;j=c;var n=u;switch(f){case 2:q=k.c(j,3);var m=k.q(j+3),p=6;break;case 3:q=k.c(j,4);m=k.h(j+4,true);p=10;break;case 4:q=k.c(j,4);m=F(j+4,k);p=10}if(q=="")break;c=c+(p+m);if(!(d.indexOf(q)<0)&&(f>2&&(n={message:{Y:k.d(j+8,6),K:k.d(j+8,5),V:k.d(j+8,4)},m:{T:k.d(j+8+1,7),H:k.d(j+8+1,3),J:k.d(j+8+1,2),D:k.d(j+8+1,1),w:k.d(j+8+1,0)}}),j=j+p,n&&n.m.w&&(F(j,k),j=j+4,m=m-4),!n||!n.m.D)){q in v.b?o=v.b[q]:q[0]=="T"&&
(o=v.b["T*"]);o=o?o(j,m,k,n):void 0;o={id:q,size:m,description:q in v.frames?v.frames[q]:"Unknown",data:o};q in h?(h[q].id&&(h[q]=[h[q]]),h[q].push(o)):h[q]=o}}q=h}for(var s in G)if(G.hasOwnProperty(s)){a:{m=G[s];typeof m=="string"&&(m=[m]);for(p=0;c=m[p];p++)if(c in q){a=q[c].data;break a}a=void 0}a&&(e[s]=a)}for(var t in q)q.hasOwnProperty(t)&&(e[t]=q[t]);return e};this.ID3v2=v;var H=function(a){var b;switch(a){case 0:b="iso-8859-1";break;case 1:b="utf-16";break;case 2:b="utf-16be";break;case 3:b=
"utf-8"}return b},W="32x32 pixels 'file icon' (PNG only);Other file icon;Cover (front);Cover (back);Leaflet page;Media (e.g. lable side of CD);Lead artist/lead performer/soloist;Artist/performer;Conductor;Band/Orchestra;Composer;Lyricist/text writer;Recording Location;During recording;During performance;Movie/video screen capture;A bright coloured fish;Illustration;Band/artist logotype;Publisher/Studio logotype".split(";");ID3v2.b.APIC=function(a,b,c,e,d){var d=d||"3",e=a,l=H(c.a(a));switch(d){case "2":var h=
c.c(a+1,3),a=a+4;break;case "3":case "4":h=c.e(a+1,b-(a-e),l);a=a+(1+h.g)}d=c.a(a,1);d=W[d];l=c.e(a+1,b-(a-e),l);a=a+(1+l.g);return{format:h.toString(),type:d,description:l.toString(),data:c.n(a,e+b-a)}};ID3v2.b.COMM=function(a,b,c){var e=a,d=H(c.a(a)),l=c.c(a+1,3),h=c.e(a+4,b-4,d),a=a+(4+h.g),a=c.e(a,e+b-a,d);return{language:l,X:h.toString(),text:a.toString()}};ID3v2.b.COM=ID3v2.b.COMM;ID3v2.b.PIC=function(a,b,c,e){return ID3v2.b.APIC(a,b,c,e,"2")};ID3v2.b.PCNT=function(a,b,c){return c.O(a)};ID3v2.b.CNT=
ID3v2.b.PCNT;ID3v2.b["T*"]=function(a,b,c){var e=H(c.a(a));return c.e(a+1,b-1,e).toString()};ID3v2.b.TCON=function(){return ID3v2.b["T*"].apply(this,arguments).replace(/^\(\d+\)/,"")};ID3v2.b.TCO=ID3v2.b.TCON;ID3v2.b.USLT=function(a,b,c){var e=a,d=H(c.a(a)),l=c.c(a+1,3),h=c.e(a+4,b-4,d),a=a+(4+h.g),a=c.e(a,e+b-a,d);return{language:l,I:h.toString(),U:a.toString()}};ID3v2.b.ULT=ID3v2.b.USLT;var L=function(a,b,c,e){var d=a.h(b,true);if(d==0)e();else{var l=a.c(b+4,4);["moov","udta","meta","ilst"].indexOf(l)>
-1?(l=="meta"&&(b=b+4),a.f([b+8,b+8+8],function(){L(a,b+8,d-8,e)})):a.f([b+(l in B.l?0:d),b+d+8],function(){L(a,b+d,c,e)})}},P=function(a,b,c,e,d){for(var d=d===void 0?"":d+"  ",l=c;l<c+e;){var h=b.h(l,true);if(h==0)break;var f=b.c(l+4,4);if(["moov","udta","meta","ilst"].indexOf(f)>-1){f=="meta"&&(l=l+4);P(a,b,l+8,h-8,d);break}if(B.l[f]){var i=b.q(l+16+1),j=B.l[f],i=B.types[i];if(f=="trkn"){a[j[0]]=b.a(l+16+11);a.count=b.a(l+16+13)}else{var f=l+16+4+4,k=h-16-4-4;switch(i){case "text":a[j[0]]=b.e(f,
k,"UTF-8");break;case "uint8":a[j[0]]=b.r(f);break;case "jpeg":case "png":a[j[0]]={m:"image/"+i,data:b.n(f,k)}}}}l=l+h}},B=this.v={};B.types={"0":"uint8",1:"text",13:"jpeg",14:"png",21:"uint8"};B.l={"\u00a9alb":["album"],"\u00a9art":["artist"],"\u00a9ART":["artist"],aART:["artist"],"\u00a9day":["year"],"\u00a9nam":["title"],"\u00a9gen":["genre"],trkn:["track"],"\u00a9wrt":["composer"],"\u00a9too":["encoder"],cprt:["copyright"],covr:["picture"],"\u00a9grp":["grouping"],keyw:["keyword"],"\u00a9lyr":["lyrics"],
"\u00a9gen":["genre"]};B.o=function(a,b){a.f([0,7],function(){L(a,0,a.j(),b)})};B.p=function(a){var b={};P(b,a,0,a.j());return b};this.ID4=this.v;N.prototype={toString:function(){return JSON.stringify({type:this.type,name:this.name,filetype:this.filetype,src:this.audio.src})},musicread:function(a,b,c){var e=this,d=k.URL&&k.URL.createObjectURL?function(a){return k.URL.createObjectURL(a)}:k.webkitURL&&k.webkitURL.createObjectURL?function(a){return k.webkitURL.createObjectURL(a)}:void 0;if(d)if(e.file.filetype===
"audio"){e.audio=new Audio(e.url=d(e.file));if(e.htmlElement)e.htmlElement.src=e.audio.src;e.audio.volume=a;e.audio.addEventListener("ended",function(){e.release();b()});c&&e.audio.play()}else if(e.file.filetype==="video"){d=d(e.file);if(e.htmlElement)e.htmlElement.src=e.url=d;e.audio=e.htmlElement;e.audio.volume=a;e.audio.addEventListener("ended",function(){e.release();b()});c&&e.audio.play()}},ontagload:function(a,b){this.tags=(new J(a.target.result)).read();this.tags.type=this.type;this.tags.name=
this.name;b(this.tags)},mytagreader:function(a){var b=this,c=new FileReader;c.onload=function(c){b.ontagload(c,a)};c.readAsBinaryString(this.file.webkitSlice(0,2E5))},tagread:function(a){this.mytagreader(a)},readpicture:function(){var a=this,b=webkitURL.createObjectURL(this.file);try{ID3.loadTags(b,function(){var c=ID3.getAllTags(b);if(c&&c.picture)a.tags.picture=c.picture},{tags:["picture"],dataReader:FileAPIReader(this.file)})}catch(c){n(c)}},play:function(a,b){var c=this;if(c.audio){c.audio.volume=
a;c.audio.addEventListener("ended",function(){c.release();b()});c.audio.play()}else c.musicread(a,b,true)},pause:function(){this.audio&&this.audio.pause()},resume:function(){this.audio&&this.audio.play()},paused:function(){return!this.audio||this.audio.paused},setvolume:function(a){if(this.audio)this.audio.volume=a},mute:function(){this.predvol=this.audio.volume;this.setvolume(0)},release:function(){this.audio&&delete this.audio},seekBy:function(a){if(this.audio){var b=this.audio.currentTime,c=this.audio.duration;
if(a<0&&b<-a){this.audio.currentTime=0;if(b<-a/4)return true}else this.audio.currentTime=b+a>c?c:this.audio.currentTime+a}}};var m={get:function(a){return localStorage.getItem(a)},set:function(a,b){localStorage.setItem(a,b)},remove:function(a){localStorage.removeItem(a)},clear:function(){localStorage.clear()},getSetting:function(a){return m.get("store.settings."+a)},getSettingParse:function(a){return JSON.parse(m.get("store.settings."+a))}},I={"classic-default":{"background-color":{"div#wrapper":"#aaa",
"div#info":"#eee","div#playlist":"#fff","thead tr":"#ddd","div#musicSlider":"#aaa","div#musicSlider a":"#666","div#musicSlider a:focus":"#333","div#volumeSlider":"#eee","tbody tr:nth-child(odd) ":"#fff","tbody tr:nth-child(even) ":"#ddf","tbody tr.nP":"#aaf","tbody tr.ui-selected":"#08f"},color:{"tbody tr.ui-selected":"#fff"}},"classic-pink":{"background-color":{"div#wrapper":"#f66","div#info":"#fbb","thead tr":"#f99","div#musicSlider":"#f66","div#musicSlider a":"#844","div#musicSlider a:focus":"#622",
"div#volumeSlider":"#f88","tbody tr:nth-child(odd) ":"#fdd","tbody tr:nth-child(even) ":"#fbb","tbody tr.nP":"#f77","div#playlist":"#fdd","tbody tr.ui-selected":"#f22"},color:{"tbody tr.ui-selected":"#fff"}},"classic-yellow":{"background-color":{"div#wrapper":"#ff0","div#info":"#ff8","thead tr":"#ff8","div#musicSlider":"#ff0","div#musicSlider a":"#880","div#musicSlider a:focus":"#640","div#volumeSlider":"#ff8","tbody tr:nth-child(odd) ":"#ff7","tbody tr:nth-child(even) ":"#ff6","tbody tr.nP":"#ff4",
"div#playlist":"#ffb","tbody tr.ui-selected":"#ff0"},color:{"tbody tr.ui-selected":"#000!important"}},"classic-orange":{"background-color":{"div#wrapper":"#f80","div#info":"#fb8","thead tr":"#fb8","div#musicSlider":"#f80","div#musicSlider a":"#840","div#musicSlider a:focus":"#620","div#volumeSlider":"#fb8","tbody tr:nth-child(odd) ":"#ff8","tbody tr:nth-child(even) ":"#fd6","tbody tr.nP":"#fa0","div#playlist":"#fdb","tbody tr.ui-selected":"#f60"},color:{"tbody tr.ui-selected":"#000"}},"classic-lime":{"background-color":{"div#wrapper":"#6f6",
"div#info":"#bfb","div#playlist":"#fff","thead tr":"#9f9","div#musicSlider":"#6f6","div#musicSlider a":"#484","div#musicSlider a:focus":"#262","div#volumeSlider":"#8f8","tbody tr:nth-child(odd) ":"#dfd","tbody tr:nth-child(even) ":"#bfb","tbody tr.nP":"#7f7","div#playlist":"#dfd","tbody tr.ui-selected":"#2f2"},color:{"tbody tr.ui-selected":"#fff"}},"classic-blue":{"background-color":{"div#wrapper":"#66f","div#info":"#bbf","thead tr":"#99f","div#musicSlider":"#66f","div#musicSlider a":"#448","div#musicSlider a:focus":"#226",
"div#volumeSlider":"#88f","tbody tr:nth-child(odd) ":"#ddf","tbody tr:nth-child(even) ":"#bbf","tbody tr.nP":"#77f","div#playlist":"#ddf","tbody tr.ui-selected":"#22f"},color:{"tbody tr.ui-selected":"#fff"}},"classic-purple":{"background-color":{"div#wrapper":"#f0f","div#info":"#f8f","thead tr":"#f8f","div#musicSlider":"#f0f","div#musicSlider a":"#808","div#musicSlider a:focus":"#604","div#volumeSlider":"#f8f","tbody tr:nth-child(odd) ":"#f7f","tbody tr:nth-child(even) ":"#f6f","tbody tr.nP":"#f4f",
"div#playlist":"#fbf","tbody tr.ui-selected":"#f0f"},color:{"tbody tr.ui-selected":"#000"}},"classic-dark":{"background-color":{"div#wrapper":"#000","div#info":"#333","thead tr":"#333","div#musicSlider":"#000","div#musicSlider a":"#666","div#musicSlider a:focus":"#999","div#volumeSlider":"#333","div#volumeSlider a":"#666","div#volumeSlider a:focus":"#666","tbody tr:nth-child(odd) ":"#222","tbody tr:nth-child(even) ":"#292929","tbody tr.nP":"#444","div#playlist":"#111","tbody tr.ui-selected":"#080808"},
color:{"div#wrapper":"#fff"}}},C={textarea:function(a){var b=document.createElement("textarea");b.style.position="absolute";b.style.left="-9999px";b.value=a;document.body.appendChild(b);return b},set:function(a){a=C.textarea(a);a.select();document.execCommand("Copy");document.body.removeChild(a)},get:function(){var a=C.textarea("");a.focus();a.select();document.execCommand("Paste");setTimeout(function(){document.body.removeChild(a)},0);return a.value}},w=[],Q=function(a){a=parseInt(a,10);if(isNaN(a))return"00:00";
var b=parseInt(a/60%60,10),c=parseInt(a/3600,10),a=a%60;return c>0?c.toString()+":"+(b<10?"0":"")+b.toString()+":"+(a<10?"0":"")+a.toString():(b<10?"0":"")+b.toString()+":"+(a<10?"0":"")+a.toString()},i={init:function(a){var b=this;b.player=a;var c={tbody:d("#tbody"),thead:d("thead"),table:d("table"),video:document.getElementsByTagName("video")[0]};["about","conf","config","current","filename","fileselect","firstrow","globalcontrol","help","musicSlider","mute","next","open","pause","play","playlist",
"prev","property","remain","repeat","scheme","shuffle","tablebody","tablediv","tagread","volumeSlider","volumeon","wrapper","filter","filterword","matchnum","notification","notificationmsec","notificationresult","info","infowrapper","albumart","seek","splitter"].forEach(function(a){c[a]=d("#"+a)});b.div=c;b.initdrop();b.initbuttons();b.colorset();b.initsize();b.initslider();b.selectableSet();b.initFilter();b.initsplitter();b.resizableSet();b.initClickEscape();b.fullScreenOff();d(k).resize(function(){b.initsize()});
d("div#appname a").text("Local Player ver "+a.version).click(function(){b.toggleAbout()});d("a").focus(function(a){a.target.blur()})},initdrop:function(){var a=this;document.body.ondragover=function(a){a.preventDefault()};document.body.ondrop=function(b){b.stopPropagation();b.preventDefault();b.dataTransfer&&b.dataTransfer.files&&a.player.readFiles(b.dataTransfer.files)}},initbuttons:function(){function a(a){a=parseInt(parseInt(a,10)/1E3,10);return(a<10?"&nbsp;"+a:a)+"sec"}var b=this,c=b.player;b.div.open.click(function(){b.div.fileselect.click()});
b.div.fileselect.change(function(a){c.readFiles(a.target.files)});b.div.play.click(function(){c.toggle()});b.div.pause.click(function(){c.toggle()});b.div.prev.click(function(){c.prev()});b.div.next.click(function(){c.next()});b.div.mute.click(function(){c.mute()});b.div.volumeon.click(function(){c.resume()});b.div.repeat.click(function(){c.repeat.next()});b.div.shuffle.click(function(){c.shuffle.next();b.player.shuffle.value==="false"&&b.setorder()});b.div.conf.click(function(){k.open("./fancy-settings/source/index.html")});
d("img.lbutton, img.rbutton").mouseup(function(){d(this).css({top:"50%"})}).mousedown(function(){d(this).css({top:parseInt(d(this).css("top"),10)*1.03+"%"})});b.div.filename.click(function(){b.selectNowplaying()});b.div.tablebody.click(function(){b.focusIndex=0;b.focusUpdate(true)});b.div.globalcontrol.attr({checked:m.getSetting("globalcontrol")==="true"}).change(function(a){m.set("globalcontrol",a.target.checked.toString())});b.div.notification.attr({checked:(m.getSetting("notification")||"true")===
"true"}).change(function(a){m.set("notification",a.target.checked.toString());void 0===m.getSetting("notificationmsec")&&m.set("notificationmsec",b.div.notificationmsec.valueAsNumber)});m.set("notification",b.div.notification.attr("checked")==="checked");b.div.notificationmsec.attr({value:parseInt(m.getSetting("notificationmsec"),10)||5E3}).change(function(c){m.set("notificationmsec",c.target.valueAsNumber);b.div.notificationresult.html(a(c.target.valueAsNumber))});b.div.notificationresult.html(a(b.div.notificationmsec.attr("value")))},
initsize:function(){var a=this.div.tbody.width(),b=12*(k.innerWidth-1280)/2360+12;this.div.wrapper.css({"font-size":b});this.div.playlist.height(k.innerHeight-this.div.playlist.offset().top-b);this.div.tablediv.height(k.innerHeight-this.div.tablediv.offset().top-b);this.div.tablebody.height(k.innerHeight-this.div.tablebody.offset().top-b);d("tr").css({width:a})},initsplitter:function(){var a;a=m.get("splitter")===void 0?{now:0.05,filename:0.1,artist:0.2,title:0.3,track:0.05,album:0.25}:JSON.parse(m.get("splitter"));
for(var b in a)d("th."+b).width(a[b]*this.div.thead.width());this.afterResize()},initschemes:function(){var a=m.getSettingParse("scheme")||"classic-default",b=this,c;for(c in I)d("<a />").attr("scheme",c).css({color:I[c].color["div#wrapper"]||"black","background-color":I[c]["background-color"]["div#wrapper"]}).addClass(a===c?"currentScheme":"").click(function(){b.setscheme(d(this).attr("scheme"))}).appendTo(this.div.scheme)},initslider:function(){var a=this;this.div.volumeSlider.slider({min:0,max:256,
step:8,value:a.player.volume.value,slide:function(){a.player.updatevolume()},stop:function(){a.player.updatevolume()}});this.div.musicSlider.slider({min:0,max:1,step:0.01,start:function(b,c){a.startSlide(b,c)},stop:function(b,c){a.stopSlide(b,c)}}).slider("disable")},initClickEscape:function(){var a=this;a.div.help.click(function(){a.div.help.fadeOut(200);a.focusIndex=0;a.focusUpdate(true)});a.div.config.click(function(b){if(["a","input","textarea"].indexOf(b.target.localName)<0){a.div.config.fadeOut(200);
a.focusIndex=0;a.focusUpdate(true)}});a.div.about.click(function(b){if(b.target.localName!=="a"){a.div.about.fadeOut(200);a.focusIndex=0;a.focusUpdate(true)}});a.div.property.click(function(b){if(b.target.localName!=="a"){a.div.property.fadeOut(200);a.focusIndex=0;a.focusUpdate(true)}});setTimeout(function(){a.div.thead.find("th").each(function(b){d(this).click(function(b){var e=1;return function(){a.sortorder(b,e);e=e*-1}}(b))})},100)},setorder_identity:function(a){return a},setorder_replace_num:function(a){return parseInt(a.replace(/\uff11/,
"1").replace(/\uff12/,"2").replace(/\uff13/,"3").replace(/\uff14/,"4").replace(/\uff15/,"5").replace(/\uff16/,"6").replace(/\uff17/,"7").replace(/\uff18/,"8").replace(/\uff19/,"9").replace(/\uff10/,"0").replace(/[\0-\46]/g,"").replace(/\/.*/,""),10)},sortorder:function(a,b){a===void 0&&(a=1);var c=d("th").eq(a).text()==="track"?this.setorder_replace_num:this.setorder_identity;w[1]=w[0]?a===w[0].i?w[1]:w[0]:{i:1,order:1,f:this.setorder_identity};w[0]={i:a,order:b,f:c};this.div.tbody.html(d("tr",this.div.tbody).sort(function(){var e=
w[1].order,d=a,l=w[1].i,h=[],f=[];return function(a,i){var j=a.getAttribute("number"),k=i.getAttribute("number"),m=h[j]||(h[j]=a.childNodes[d].innerText),n=h[k]||(h[k]=i.childNodes[d].innerText),j=f[j]||(f[j]=a.childNodes[l].innerText),k=f[k]||(f[k]=i.childNodes[l].innerText);return c(m)>c(n)?b:c(m)<c(n)?-b:w[1].f(j)>=w[1].f(k)?e:-e}}()));this.selectableSet();this.setorder();setTimeout(function(){i.div.tablebody.scrollTop(0)},10);setTimeout(function(){i.div.tablebody.scrollTop(0)},50)},setorder:function(){var a=
[];d("tr",this.div.tbody).each(function(){a.push(parseInt(d(this).attr("number"),10))});this.player.order.changeArray(a);this.player.shuffle.value==="true"&&this.player.order.shuffleOn()},startSlide:function(){this.seeking&&clearInterval(this.seeking)},stopSlide:function(a,b){var c=this;if(c.player.seekAt(b.value))c.seeking=setInterval(function(){c.seek()},1E3)},slideZero:function(){this.div.musicSlider.slider({value:0});this.div.current.text("00:00")},addfile:function(a,b){var c=[],e=-1,d=this.div.tbody.width();
c[++e]='<tr class="music" number="';c[++e]=b;c[++e]='" style="width:';c[++e]=d;c[++e]='px;">';c[++e]='<td class="now">';c[++e]="<td></td>";c[++e]='<td><div class="filename" title="';c[++e]=a.name;c[++e]='" >';c[++e]=a.name;c[++e]="</div></td>";c[++e]='<td></td><td><div class="artist"></div></td><td></td><td><div class="title"></div></td><td></td><td><div class="track"></div></td><td></td><td><div class="album"></div></td></tr>';this.div.tbody[0].innerHTML=this.div.tbody[0].innerHTML+c.join("")},ontagread:function(a,
b){d("tr[number="+b+"]").find(".artist").texttitle(a.artist||"").end().find(".track").texttitle(a.track||"").end().find(".title").texttitle(a.title||"").end().find(".album").texttitle(a.album||"")},setdblclick:function(){var a=this;d("tr.music").dblclick(function(b){a.div.musicSlider.slider({value:0});b=parseInt(d(b.target).closest("tr").attr("number")||b.closest("tr").attr("number")||b.attr("number"),10);a.player.pause();a.player.play(b)})},getvolume:function(){return parseInt(this.div.volumeSlider.slider("value"),
10)},setvolume:function(a){this.div&&this.div.volumeSlider&&this.div.volumeSlider.slider({value:a})},popupvideo:function(){this.div.video.parentNode.style.visibility="visible"},hidevideo:function(){this.div.video.parentNode.style.visibility="hidden"},showAlbumArt:function(a){var b=d("img#art")[0];if(a.tags&&a.tags.picture)try{var c=a.tags.picture;b.src="data:"+c.format+";base64,"+Base64.encodeBytes(c.data);this.div.albumart.addClass("realart")}catch(e){n(e)}else{b.src="./icon_128.png";this.div.albumart.removeClass("realart")}},
play:function(a){var b=this;b.div.musicSlider.slider("enable");var c=b.player.playing;this.fullScreen&&this.fullScreenOn();b.showFileName(c.name,a);d("tr.nP").removeClass("nP").find("img").remove();d("tr[number="+a.toString()+"]").addClass("nP").find(".now").append('<img src="./img/now.png">');a=d("tr.ui-selected");if(a.size()<2){a.UNSELECT(true);d("tr.nP").SELECT().LASTSELECT()}b.seeking&&clearInterval(b.seeking);b.seeking=setInterval(function(){b.seek()},1E3);setTimeout(function(){b.reflesh()},
50);setTimeout(function(){b.reflesh()},500);try{b.showAlbumArt(c);setTimeout(function(){b.showAlbumArt(c)},200)}catch(e){}},pause:function(){var a=this;this.seeking&&clearInterval(this.seeking);this.reflesh(false);setTimeout(function(){a.reflesh()},50)},reflesh:function(a){this.div.play.attr(a===false||this.player.playing!==void 0&&this.player.playing.paused()?{src:"./img/play.png",title:"Play"}:{src:"./img/pause.png",title:"Pause"})},seek:function(){if(this.player.playing!=void 0&&this.player.playing.audio){var a=
this.player.playing.audio.currentTime,b=this.player.playing.audio.duration;this.div.musicSlider.slider({value:a/b});this.div.current.text(Q(a));this.div.remain.text("-"+Q(b-a))}},colorset:function(){var a=m.getSettingParse("scheme")||"classic-default",b=I[a];d("a.currentScheme").removeClass("currentScheme");d("a[scheme="+a+"]").addClass("currentScheme");var a=[],c;for(c in b)for(var e in b[c])a.push(e+" { "+c+":"+b[c][e]+";}");d("style#sch").text(a.join("\n")).size()||d("<style />",{id:"sch"}).text(a.join("\n")).appendTo(d("head"))},
setscheme:function(a){m.set("scheme",a);this.colorset()},resizableSet:function(){var a=this;d("th:not(.splitter)+th:not(.splitter)",this.div.thead).each(function(){var b=false,c=d("<th />",{"class":"splitter"}).mousedown(function(){b=true}).insertBefore(d(this));d(k).mouseup(function(){if(b){b=false;a.afterResize()}}).mousemove(function(e){if(b){a.div.splitter.text("");var d=c.prev().width()+c.next().width();c.prev().width(e=-c.prev().offset().left+e.clientX);c.next().width(d-e)}})})},afterResize:function(){var a=
[],b={},c=this.div.tbody.width();d("th:not(.splitter)").each(function(e){var g=(d(this).width()-1)/(c-0);a.push("tbody tr > td:nth-child("+(2*e+1)+") {width:"+g*100+"%;}");a.push("tbody div.inside_helper > tr.ddms_move > td:nth-child("+(2*e+1)+") {width:"+g*100+"%;}");b[d(this).attr("class")]=g});this.div.splitter.text(a.join("\n"));m.set("splitter",JSON.stringify(b));this.selectableSet()},selectableSet:function(){var a=this,b=a.div.tbody.width(),c=d("<tbody />");d("tr",a.div.tbody).each(function(){var e=
d(this),g=d("<tr />").attr({number:e.attr("number")}).append(e.children()).click(function(b){var c=d("tr.last-select");a.focusIndex=0;a.focusUpdate(true);if(b.shiftKey&&!b.altKey&&c.size()){if(b.ctrlKey){var e=i.selected;setTimeout(function(){e.SELECT(true)},20)}b.clientY<c.position().top?setTimeout(function(){c.SELECT(true).LASTSELECT().prevAll().filter(function(){return d(this).position().top>b.clientY}).SELECT(true)},20):setTimeout(function(){c.SELECT(true).LASTSELECT().nextAll().filter(function(){return d(this).position().top<
b.clientY}).SELECT(true)},20)}setTimeout(function(){i.selected=d(".ui-selected")},30)}).dblclick(function(b){b=parseInt(d(b.target).closest("tr").attr("number")||b.closest("tr").attr("number")||b.attr("number"),10);a.player.pause();a.player.play(b)}).width(b).addClass(e.hasClass("nP")?"nP":"").addClass(e.hasClass("moved")?"ui-selected moved":"").addClass(e.hasClass("ui-selected")?"ui-selected":"").appendTo(c);e.ISSELECTED()&&setTimeout(function(){g.SELECT(true)},30)}).remove();this.div.tbody.replaceWith(c);
this.div.tbody=c;d.fn.drag_drop_multi_select.unique=0;d.fn.drag_drop_multi_select.stack=[];d.fn.drag_drop_multi_select.settings=[];this.div.tbody.drag_drop_multi_select({element_to_drag_drop_select:"tr, this.div.tbody",elements_to_drop:this.div.tbody,moveOpacity:0.7})},setrepeat:function(a){this.div&&this.div.repeat&&this.div.repeat.css({opacity:a==="false"?0.4:""}).attr({src:a==="one"?"./img/one.png":"./img/repeat.png"})},setshuffle:function(a){this.div&&this.div.shuffle&&this.div.shuffle.css({opacity:a.toString()===
"true"?"":0.4})},prevNotification:null,showNotification:function(a,b,c){S.send({type:"notification",from:"player",icon:a,title:b,message:c})},formatTags:function(a){return a&&a.TPE1&&a.TIT2?a.TPE1+" - "+a.TIT2:""},showFileName:function(a,b,c){var e=this,d=this.player.musics[b].tags,a=e.formatTags(d)||a;document.title=a;this.div.filename.texttitle(a);if(d&&d.picture||c){var f=d&&d.picture?d.picture:void 0;try{var h=f?"data:"+f.format+";base64,"+Base64.encodeBytes(f.data):"../icon_128.png"}catch(i){h=
"../icon_128.png"}e.formatTags(d)===""||!d.picture?c?d&&d.artist&&d.title&&d.album?e.showNotification(h,d.artist,d.title+"  /  "+d.album):e.showNotification(h,a,""):setTimeout(function(){e.showFileName(a,b,true)},200):e.showNotification(h,d.artist,d.title+"  /  "+d.album)}else setTimeout(function(){e.showFileName(a,b,true)},200)},selectDown:function(){var a=i.selected;if(a.size())a.UNSELECT(true).next().andSelf().last().SELECT().LASTSELECT();else{a=d("tr.last-select");a.size()?a.removeClass("last-select").last().SELECT().LASTSELECT(true):
d("tr.nP").next().andSelf().last().SELECT().LASTSELECT().size()||d("tr",this.div.tbody).first().SELECT().LASTSELECT()}},extendDown:function(){var a=d("tr.last-select");a.size()&&(a.prev().ISSELECTED()?a.prevAll().filter(function(){var a=true;return function(){return a&&(a=d(this).ISSELECTED())}}()).last().UNSELECT():a.nextAll().filter(function(){var a=true;return function(){return a&&(a=d(this).prev().ISSELECTED())}}()).last().SELECT())},selectUp:function(){var a=i.selected;if(a.size())a.UNSELECT(true).prev().andSelf().first().SELECT().LASTSELECT();
else{a=d("tr.last-select");a.size()?a.removeClass("last-select").first().SELECT().LASTSELECT(true):d("tr.nP").prev().andSelf().first().SELECT().LASTSELECT().size()||d("tr",this.div.tbody).last().SELECT().LASTSELECT()}},extendUp:function(){var a=d("tr.last-select");a.size()&&(a.next().ISSELECTED()?a.nextAll().filter(function(){var a=true;return function(){return a&&(a=d(this).ISSELECTED())}}()).last().UNSELECT():a.prevAll().filter(function(){var a=true;return function(){return a&&(a=d(this).next().ISSELECTED())}}()).last().SELECT())},
selectHome:function(){d("tr.ui-selected").UNSELECT(true);this.div.tbody.children().first().SELECT().LASTSELECT()},extendToHome:function(){d("tr.ui-selected").removeClass("ui-selected ddms_selected");d("tr.last-select").SELECT(true).prevAll().SELECT(true).last().SELECT()},selectEnd:function(){d("tr.ui-selected").UNSELECT(true);this.div.tbody.children().last().SELECT().LASTSELECT()},extendToEnd:function(){d("tr.ui-selected").removeClass("ui-selected ddms_selected");d("tr.last-select").SELECT(true).nextAll().SELECT(true).last().SELECT()},
selectAll:function(){this.div.tbody.children().SELECT(true).last().LASTSELECT();i.selected=d("tr.ui-selected")},unselectAll:function(){this.div.tbody.children().UNSELECT(true);i.selected=d("tr.ui-selected")},selectInvert:function(){var a=d("tr.ui-selected");this.div.tbody.children().SELECT(true).last().LASTSELECT();a.UNSELECT(true);i.selected=d("tr.ui-selected")},toggleHelp:function(){this.div.help.fadeToggle(200);d("div#help:hidden").size()&&div.tablebody.focus()},toggleAbout:function(){this.div.about.fadeToggle(200)},
deleteSelected:function(){var a=this.player;d("tr.ui-selected").last().next().LASTSELECT();d("tr.ui-selected").first().prev().LASTSELECT(true);d("tr.ui-selected").map(function(b,c){return a.remove(parseInt(d(c).attr("number"),10))});d("tr.ui-selected").remove();i.selected=d("tr.ui-selected")},deleteAndNext:function(){var a=this.player;d("tr.ui-selected").UNSELECT();d("tr.nP").SELECT().LASTSELECT();i.deleteSelected();a.next()},selectNowplaying:function(){d("tr.ui-selected").UNSELECT();d("tr.nP").SELECT().LASTSELECT();
this.focusIndex=0;this.focusUpdate()},pageDown:function(){this.div.tablebody.scrollTop(this.div.tablebody.scrollTop()+this.div.tablebody.height()*0.8);d("tr.ui-selected").UNSELECT(true);var a=k.innerHeight;d("tr",this.div.tbody).filter(function(){return d(this).position().top<a}).last().SELECT().LASTSELECT()},extendPageDown:function(){var a=this;a.div.tablebody.scrollTop(a.div.tablebody.scrollTop()+a.div.tablebody.height()*0.8);if(d("tr.last-select").prev().ISSELECTED())d("tr.ui-selected").filter(function(){return d(this).position().top<
a.div.thead.position().top+40}).UNSELECT(true);else{var b=k.innerHeight;d("tr.last-select").nextAll().filter(function(){return d(this).position().top<b}).SELECT(true).last().SELECT()}},pageUp:function(){this.div.tablebody.scrollTop(this.div.tablebody.scrollTop()-this.div.tablebody.height()*0.8);d("tr.ui-selected").UNSELECT(true);d("tr",this.div.tbody).filter(function(){return d(this).position().top>0}).first().SELECT().LASTSELECT()},extendPageUp:function(){this.div.tablebody.scrollTop(this.div.tablebody.scrollTop()-
this.div.tablebody.height()*0.8);var a=k.innerHeight,b=d("tr.last-select",this.div.tbody);b.next().ISSELECTED()?d("tr.ui-selected").filter(function(){return d(this).position().top>a-50}).UNSELECT(true):b.prevAll().filter(function(){return d(this).position().top>0}).SELECT(true).last().SELECT()},defaultEnter:function(){if(!d("textarea#shortcuts:focus").size())switch(d("div#help:visible,div#config:visible,div#about:visible,div#property:visible").size()){case 0:var a=d("tr.last-select");if(a.size()){d("tr.ui-selected").UNSELECT(true);
a.SELECT().children().first().dblclick()}else d("tr.ui-selected").UNSELECT(true).first().children().first().dblclick();break;default:this.div.config.add(this.div.help).add(this.div.property).add(this.div.about).filter(function(){return d(":visible",this).size()}).last().fadeOut(200)}},viewInformation:function(){var a=this.player;this.div.property.fadeIn(200);if(a.tags){var b={TALB:"album",TIT2:"title",TPE1:"artist",TRCK:"track",TDRC:"year"},c=d("tr.ui-selected").map(function(b,c){return a.tags[parseInt(d(c).attr("number"),
10)]}),e;for(e in b)d("dd#id"+b[e]).text("\u3000"+c.map(function(a,b){return b[e]}).unique().join())}},escape:function(){this.player.key.unlockAll();this.filterEnd();this.fullScreenOff();switch(d("#help:visible,#config:visible,#about:visible,#property:visible,#filter:visible").size()){case 0:if(d("div#musicSlider a:focus, div#volumeSlider a:focus").size()){d("div#musicSlider a, div#volumeSlider a").focusout();this.focusIndex=0;this.focusUpdate(true)}else d("tr.ui-selected").UNSELECT(true);break;default:this.div.config.add(this.div.help).add(this.div.property).add(this.div.about).filter(function(){return d(":visible",
this).size()}).last().fadeOut(200)}},click:function(a){var b=this.div[a]||d("img#"+a);b.mousedown().click();setTimeout(function(){b.mouseup()},200)},focusIndex:0,focusElements:function(){return[d(),d("div#musicSlider a"),d("div#volumeSlider a")]},focusUpdate:function(a){d("a,input").trigger("focusout");this.focusElements()[this.focusIndex].trigger("focusin");if(this.focusIndex===0){d("a:focus").size()&&d("a:focus")[0].blur();d("input:focus").size()&&d("input:focus")[0].blur()}a||this.focusIndex===
0&&(d("tr.ui-selected").first().SELECT().size()||d("tr.nP").SELECT().LASTSELECT())},focusToggle:function(){this.focusIndex=(this.focusIndex+1)%3;this.focusUpdate()},focusToggleReverse:function(){this.focusIndex=(this.focusIndex-1+this.focusElements().length)%3;this.focusUpdate()},fullScreen:!1,setVideoSize:function(a,b){this.div.video.style.width=a+"px";this.div.video.style.marginLeft=-a/2+"px";this.div.video.style.height=b+"px";this.div.video.style.marginTop=-b/2+"px"},fullScreenOnVideo:function(){var a=
this.div.video;a.controls=false;a.style.cursor="none";document.onmousemove=function(){a.controls=true;a.style.cursor="true";setTimeout(function(){a.controls=false;a.style.cursor="none"},1E3)};a.webkitRequestFullScreen?a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):this.setVideoSize(k.outerWidth,k.outerHeight)},fullScreenOnAudio:function(){this.div.info[0].webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);var a=k.screen.availHeight,a=["div#wrapper div#info{","  height: "+a+"px!important;",
"}","div#wrapper div#filename{","  margin-top:"+0.4*a+"px!important;","}","div#wrapper div#seek{","  top:"+0.5*a+"px!important;","}","div#wrapper div#albumart{","  width: "+0.4*a+"px!important;","  height: "+0.4*a+"px!important;","  margin-top:"+-0.2*a+"px!important;","}","div#wrapper div#albumart img{","  width: "+0.4*a+"px!important;","  height: "+0.4*a+"px!important;","}"];d("style#full").text(a.join("\n"));this.div.info.addClass("full")},fullScreenType:null,fullScreenOn:function(){if(this.player.playing){if(this.player.playing.filetype===
"video"){if(this.fullScreen&&this.fullScreenType==="video")return;this.fullScreenOffAudio();this.fullScreenOnVideo();var a=this;setTimeout(function(){a.fullScreenOnVideo()},500);this.fullScreenType="video"}else if(this.player.playing.filetype==="audio"){if(this.fullScreen&&this.fullScreenType==="audio")return;this.fullScreenOffVideo();this.fullScreenOnAudio();this.fullScreenType="audio"}this.fullScreen=true}},fullScreenOffVideo:function(){var a;document.webkitCancelFullScreen?document.webkitCancelFullScreen():
this.setVideoSize(a=k.outerWidth*0.6,a/16*9)},fullScreenOffAudio:function(){this.div.info.removeClass("full");d("style#full").text("")},fullScreenOff:function(){this.fullScreenType="";this.fullScreen=false;this.fullScreenOffVideo();this.fullScreenOffAudio()},fullScreenToggle:function(){this.fullScreen?this.fullScreenOff():this.fullScreenOn()},initFilter:function(){var a=this;this.div.filterword.keydown(function(b){a.filterKeydown(b)})},filterStart:function(){var a=[];d("ui-selected");this.div.filter.fadeIn(200);
var b=this.div.filterword.focus()[0];b.selectionStart=0;b.selectionEnd=b.value.length;d("tr",this.div.tbody).each(function(b,e){var g=b,f=self.player.musics[d(e).attr("number")].tags,h=[];for(b in f)h.push(f[b]);a[g]=h.join("\u2022").toLowerCase()});this.div.matchnum.text("");this.filterTags=a},filterKeydown:function(a){var b=this;setTimeout(function(){if(a.keyCode===13)b.filterBlink();else if(a.keyCode===27)b.filterEnd();else{var c=a.target.value.toLowerCase(),e=[],g=d("tr",b.div.tbody);d("tr.ui-selected",
b.div.tbody).UNSELECT(true);if(c)try{b.filterTags.forEach(function(a,b){a.match(c)!==null&&e.push(b)});e.forEach(function(a){g.eq(a).SELECT(true)});b.div.matchnum.text(e.length+"/"+g.length);d("tr.ui-selected")}catch(f){}else b.div.matchnum.text("0/"+g.length)}},20)},filterEnd:function(){this.div.filter.fadeOut(200);this.div.filterword.focusout()[0].blur();i.selected=d(".ui-selected")},filterIndex:0,filterBlink:function(){if(isNaN(this.filterIndex))this.filterIndex=0;var a=d("tr.ui-selected"),b=a.eq(this.filterIndex).UNSELECT(true);
setTimeout(function(){b.SELECT(false,true).LASTSELECT()},200);this.filterIndex=++this.filterIndex%a.size()},keyview:function(){},copy:function(a){var b=d("tr.ui-selected"),c=b.size()?b.first().attr("number"):this.app.nowplaying,b=this.app.files[c],c=this.app.musics[c].tags;if(c[a])(a=c[a])&&C.set(a);else a==="info"?C.set((c.artist||"")+" "+(c.title||"")+" "+(c.album||"")):a==="artist,title"?C.set((c.artist||"")+" "+(c.title||"")):a==="filename"?C.set(b.name):a==="hash"&&C.set((c.artist+" - "||"")+
(c.title||"")+" #nowplaying")},selected:d()};d.fn.SELECT=function(a,b){if(this.size()){this.addClass("ui-selected ddms_selected");i.selected=i.selected.add(this);if(a)return this;var c=this.offset().top,d=i.div.tablebody.offset().top,g=c-30-d,c=c+60-i.div.tablediv.height()-d;g<0?b?i.div.tablebody.animate({scrollTop:"+="+g},{duration:"fast",easing:"linear"}):i.div.tablebody.scrollTop(i.div.tablebody.scrollTop()+g):c>0&&(b?i.div.tablebody.animate({scrollTop:"+="+c},{duration:"fast",easing:"linear"}):
i.div.tablebody.scrollTop(i.div.tablebody.scrollTop()+c))}return this};d.fn.UNSELECT=function(a){a||this.SELECT();i.selected=d();return this.removeClass("ui-selected ddms_selected last-select")};d.fn.LASTSELECT=function(a){a||d("tr.last-select",i.div.tbody).removeClass("last-select");i.selected=this;return this.addClass("last-select")};d.fn.ISSELECTED=function(){return this.hasClass("ui-selected")};d.fn.drag_drop_multi_select.defaults.while_dragging_action=function(a){var b=a.originalEvent.clientY,
a=d("tr",i.div.tbody),c=a.first().height()/2,e=a.filter(function(){var a=b-d(this).offset().top;return-c<=a&&a<c}).first();a.removeClass("dragover");var g=e.addClass("dragover");setTimeout(function(){g.removeClass("dragover")},5E3)};d.fn.drag_drop_multi_select.defaults.after_drop_action=function(a,b,c,e){j("drag_drop_multi_select.defaults.after_drop_action");var c=d("tr",i.div.tbody),b=a.first().attr("number"),g=c.first().height()/2,f=e.originalEvent.clientY,e=c.filter(function(){var a=f-d(this).offset().top;
return-g<=a&&a<g}).first();b===e.attr("number")&&(e=a.last().next());a.insertBefore(e).addClass("ui-selected moved");typeof setorderTimeout!=="undefined"&&clearTimeout(setorderTimeout);setorderTimeout=setTimeout(function(){i.selectableSet();i.setorder()},30);setTimeout(function(){d("tr.ui-selected",i.div.tbody).removeClass("ui-selected moved last-select")},1E3)};var s={regex:{white:/^((\s*)\s)/,keygroup:/^((<((([cmasg]\-)*)(f(10|11|12|1|2|3|4|5|6|7|8|9)|backspace|tab|enter|shift|ctrl|alt|esc|space|pgup|pgdn|end|home|left|up|right|down|insert|delete|ctrl|numlock|[*+/:;,\-.\/@\[\\\]\^]|[a-z]|[0-9])))>)/,
specialkeys:/^(f(10|11|12|1|2|3|4|5|6|7|8|9)|backspace|tab|enter|shift|ctrl|alt|esc|space|pgup|pgdn|end|home|left|up|right|down|insert|delete|ctrl|numlock|[*+/:;,\-.\/@\[\\\]\^])/,metakey:/^([cmasg])/,metakeypyphen:/^([cmasg]\-)/,smallalphabets:/^([a-z])/,number:/^([0-9])/,onekey:/^((<((([cmasg]\-)*)(f(10|11|12|1|2|3|4|5|6|7|8|9)|backspace|tab|enter|shift|ctrl|alt|esc|space|pgup|pgdn|end|home|left|up|right|down|insert|delete|ctrl|numlock|[*+/:;,\-.\/@\[\\\]\^]|[a-z]|[0-9])))>|f(10|11|12|1|2|3|4|5|6|7|8|9)|backspace|tab|enter|shift|ctrl|alt|esc|space|pgup|pgdn|end|home|left|up|right|down|insert|delete|ctrl|numlock|[*+/:;,\-.\/@\[\\\]\^]|[a-z]|[0-9]|<nop>)/,
command:/^((map|unmap|avoid)\s)/,rhscommand:/^([A-Z]([a-zA-Z]*))/,rhs:/^(((([A-Z]([a-zA-Z]*))((\s*)\s))*)([A-Z]([a-zA-Z]*)))/,comment:/^(#(.*))/},match:function(a,b){var c=b.str,d=this.regex[a].exec(c);if(d){d=d[0];c=c.slice(d.length);return{result:d,length:d.length,col:b.col+d.length,line:b.line,str:c}}return{str:c,col:b.col,line:b.line}},delwhite:function(a){return this.match("white",a)},delcomment:function(a){return this.match("comment",a)},delwhiteandcomment:function(a){return this.delcomment(this.delwhite(a))},
getallkey:function(a){for(var b=[],a=this.match("onekey",a);a.result;){b.push(a.result);if(a.str!==""){a=this.delwhiteandcomment(a);a=this.match("onekey",a)}else delete a.result}a.result=b;return a},parsekey:function(a){a={str:a,col:0,line:0};a=this.getallkey(a);return a.result},parseerror:function(a){n(a);throw a.str+"\nParse Error at line: "+a.line+" column: "+a.col;},parseavoid:function(){},errorifnullstr:function(a){a.str===""&&this.parseerror(a)},getcommand:function(a){a=this.match("command",
a);if(a.result){a.result=a.result.slice(0,-1);return a}this.parseerror(a)},parseline:function(a){a=this.delwhiteandcomment(a);if(a.str==="")return null;a=this.getcommand(a);if(a.result){var b=a.result;if(b==="avoid")this.parseavoid(a);else if(b==="unmap"||b==="gunmap"){a=this.delwhiteandcomment(a);this.errorifnullstr(a);a=this.getallkey(a);if(a.result===[])this.parseerror(a);else{var c=a.result,a=this.delwhiteandcomment(a);a.str!==""&&this.parseerror(a);return{obj:a,result:{command:b,result:c}}}}else{a=
this.delwhiteandcomment(a);this.errorifnullstr(a);a=this.getallkey(a);c=a.result;a=this.delwhiteandcomment(a);if(a.str==="")return{obj:a,result:{command:b,result:c}};if(a.result!==[]){a=this.delwhiteandcomment(a);this.errorifnullstr(a);a=this.match("rhscommand",a);if(a.result){var d=a.result,a=this.delwhiteandcomment(a);a.str!==""&&this.parseerror(a);return{obj:a,result:{command:b,result:c,rhscommand:d}}}}this.parseerror(a)}}else this.parseerror(a);return a},parselines:function(a){for(var b,c=[],
d=0;d<a.length;d++)(b=this.parseline({str:a[d],col:0,line:d+1}))&&c.push(b.result);return c}};"undefined"!==typeof exports&&(exports.Rc=s);"undefined"===typeof k&&(s=require("./rc").Rc);O.prototype={keys:[],callback:{},init:function(a){this.app=a;var b=this;d(k).keypress(function(a){switch(a.target.localName){case "input":case "textarea":if(a.target.id!=="hidden")break;default:b.prevent(a)}});d(k).keydown(function(a){console.dir(a.target);console.dir(a.target.id);switch(a.target.localName){case "input":case "textarea":if(a.target.id!==
"hidden")break;default:b.keydown(a);b.callback[b.convert(a)]&&b.prevent(a)}});b.viewshortcuts()},keydown:function(a){if(!this.onlyMeta(a)){this.app.ui.keyview(this.keyqueue.join(" ")+this.convert(a));this.keydownstr(this.convert(a),a)}},keydownstr:function(a,b){var c=this;c.keyqueue.push(a);if(c.triggerTimer){clearTimeout(c.triggerTimer);c.triggerTimer=void 0}c.triggerInstantly()?c.trigger(b):c.triggerTimer=setTimeout(function(){c.trigger(b)},c.watingTime)},triggerInstantly:function(){var a=this.keyqueue.join(" "),
b=this.keys.indexOf(a);return b<0?false:this.keys[b+1]!==void 0&&this.keys[b+1].indexOf(a)<0?true:false},onlyMeta:function(a){switch(this.codes[a.keyCode]){case "alt":case "ctrl":case "shift":return true;default:return false}},trigger:function(a){var b=this.keyqueue.join(" ");if(b=this.callback[b]){this.prevent(a);b.fn(this.app,a)}this.keyqueue=[]},keyqueue:[],triggerTimer:void 0,watingTime:480,prevent:function(a){a&&a.preventDefault&&a.preventDefault()},convert:function(a){var b=this.meta(a);return b!==
""||this.codes[a.keyCode]&&this.codes[a.keyCode].length>1?"<"+b+this.keyCode(a.keyCode)+">":this.keyCode(a.keyCode)},meta:function(a){return(a.global?"g-":"")+(a.ctrlKey||a.metaKey||this.lockconfig.ctrlKey?"c-":"")+(a.shiftKey||this.lockconfig.shiftKey?"s-":"")+(a.altKey||this.lockconfig.altKey?"a-":"")},parse:function(a){return s.parsekey(a)},keyinfo:[],numcommand:10,set:function(a,b){typeof b.fn==="function"?this.setfunction(a,b):typeof b==="string"&&this.setstring(a,b)},setfunction:function(a,
b){this.callback[a]=b;if(b.str!==""){for(var c=0,d=b.id*this.numcommand;c<this.numcommand&&this.keyinfo[d+c];)c++;c<this.numcommand&&(this.keyinfo[d+c]={callback:b,key:a,opt:b.opt})}},setstring:function(a,b){var c=this,d=c.callback,g=c.callback,f=c.parse(b);if(f.length===1&&g[f[0]]){var h=g[f[0]],i=h.id,j=h.opt,k=h.str,g=i*c.numcommand;if(i&&k!==""&&!/g-/.test(a)){for(i=0;i<c.numcommand&&c.keyinfo[g+i];)i++;i<c.numcommand&&(c.keyinfo[g+i]={callback:h,key:a,opt:j})}else{k=a.replace("g-","");for(i=
0;i<c.numcommand;i++)if(c.keyinfo[g+i]&&c.keyinfo[g+i].key===k)c.keyinfo[g+i].key=a}}d[a]={fn:function(){for(var a=0;a<f.length;a++)setTimeout(function(a){return function(){c.keydownstr(f[a])}}(a),5*a)},callback:h,key:a,opt:j}},viewshortcuts:function(){d("<div />");for(var a=[],b=[],c=0;c<this.keyinfo.length;c++)if(!b[c]){b[c]=true;var e=this.keyinfo[c];if(e!==void 0){for(var g=s.parsekey(e.key).map(function(a){return new E(a)}).map(function(a){return a.toHTML()}).join(""),f=c-parseInt(c/this.numcommand)*
this.numcommand;f<this.numcommand;f++)if(!b[c+f]){var h=this.keyinfo[c+f];if(h&&h.opt.deepEqual(e.opt)){b[c+f]=true;h=s.parsekey(h.key).map(function(a){return new E(a)});g=g+" / ";g=g+h.map(function(a){return a.toHTML()}).join("")}}new E(e.key);f=e.callback.str;e=e.callback.type;g=d("<dt />").append(g);f=d("<dd />").text(f);a[e]||(a[e]=d("<dl />"));a[e].append(g).append(f)}}d("div.keygroup").remove();for(c=0;c<a.length;c++)(b=a[c])&&d("div.keygroups").append(d('<div class="keygroup"/>').append(b))},
lock:function(a){this.lockconfig[a]!==void 0&&(this.lockconfig[a]=true);return this},lockAll:function(){for(var a in this.lockconfig)this.lockconfig.hasOwnProperty(a)&&(this.lockconfig[a]=true)},unlock:function(a){this.lockconfig[a]!==void 0&&(this.lockconfig[a]=false);return this},unlockAll:function(){for(var a in this.lockconfig)this.lockconfig.hasOwnProperty(a)&&(this.lockconfig[a]=false)},togglelock:function(a){this.lockconfig[a]!==void 0&&(this.lockconfig[a]=!this.lockconfig[a]);return this},
lockconfig:{shiftKey:!1,ctrlKey:!1,altKey:!1,metaKey:!1},codes:{8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",27:"esc",32:"space",33:"pgup",34:"pgdn",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",91:"ctrl",106:"*",107:"+",111:"/",144:"numlock",186:":",187:";",188:",",189:"-",190:".",191:"/",192:"@",219:"[",220:"\\",221:"]",222:"^",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12"},keyCode:function(a){if(this.codes[a])return this.codes[a];
if(48<=a&&a<=57)return a-48;if(65<=a&&a<=90)return String.fromCharCode(a).toLowerCase();if(96<=a&&a<=105)return a-96;n("unknown key: "+a)}};E.prototype={parse:function(a){var b;if(b=s.regex.number.exec(a))this.key=b[0];else if(b=s.regex.smallalphabets.exec(a))this.key=b[0];else if(b=s.regex.specialkeys.exec(a))this.key=b[0];else if(s.regex.keygroup.exec(a)){a=a.slice(1).slice(0,-1);for(b=s.regex.metakeypyphen.exec(a);b;){a=a.slice(b[0].length);b=b[0][0];switch(b){case "c":this.ctrl=true;break;case "a":this.alt=
true;break;case "m":this.meta=true;break;case "s":this.shift=true;break;case "g":this.global=true}b=s.regex.metakeypyphen.exec(a)}this.key=a}else n("unknown key:"+a)},toHTML:function(){var a=[];this.ctrl&&a.push(this.wrapmetakey("Ctrl"));this.alt&&a.push(this.wrapmetakey("Alt"));this.shift&&a.push(this.wrapmetakey("Shift"));var b=this.toUpperCase(this.key).replace(/Left/,"\u2190").replace(/Right/,"\u2192").replace(/Up/,"\u2191").replace(/Down/,"\u2193");a.push(this.wrapkey(b));return this.wrapglobalkey(a.join(" + "))},
wrapkey:function(a){return'<span class="key">'+this.wrapltgt(a)+"</span>"},wrapltgt:function(a){return a.length>1?"&lt;"+a+"&gt;":a},wrapmetakey:function(a){return this.wrapkey(this.toUpperCase(a))},wrapglobalkey:function(a){return"<span "+(this.global?'class="global"':"")+"><span>"+a+"</span></span>"},toUpperCase:function(a){return a[0].toUpperCase()+a.slice(1)}};f={DefaultEnter:function(a){return{opt:a,type:0,id:0,str:"Play selected file",fn:function(a){a.ui.defaultEnter()}}},PlayPause:function(a){return{opt:a,
type:0,id:1,str:"Play / Pause",fn:function(a){a.ui.click("play")}}},DeleteSelected:function(a){return{opt:a,type:0,id:2,str:"Delete selected files",fn:function(a){a.ui.deleteSelected()}}},NextMusic:function(a){return{opt:a,type:0,id:3,str:"Next",fn:function(a){a.next()}}},DeleteAndNext:function(a){return{opt:a,type:0,id:4,str:"Delete nowplaying and go next",fn:function(a){a.ui.deleteAndNext()}}},PreviousMusic:function(a){return{opt:a,type:0,id:5,str:"Previous",fn:function(a){a.prev()}}},SeekForward:function(a){var b=
parseInt(a[0],10);return{opt:a,type:0,id:6,str:"Seek forward by "+b+" seconds",fn:function(a){a.seekBy(b)}}},SeekBackward:function(a){var b=parseInt(a[0],10);return{opt:a,type:0,id:7,str:"Seek backward by "+b+" seconds",fn:function(a){a.seekBy(-b)}}},SeekPercent:function(a){return{opt:a,type:0,id:8,str:"",fn:function(b){b.seekAt(parseInt(a[0],10))}}},OpenFile:function(a){return{opt:a,type:1,id:9,str:"Open Files",fn:function(a){a.ui.click("open")}}},Interrupt:function(a){return{opt:a,type:1,id:10,
str:"Interrupt music importing",fn:function(a){a.interrupt()}}},ToggleRepeat:function(a){return{opt:a,type:1,id:11,str:"Toggle repeat",fn:function(a){a.ui.click("repeat")}}},ToggleShuffle:function(a){return{opt:a,type:1,id:12,str:"Toggle shuffle",fn:function(a){a.ui.click("shuffle")}}},FilterStart:function(a){return{opt:a,type:1,id:13,str:"Start filter",fn:function(a){a.ui.filterStart()}}},SelectDown:function(a){return{opt:a,type:1,id:14,str:"",fn:function(a){a.ui.selectDown()}}},ExtendDown:function(a){return{opt:a,
type:1,id:15,str:"",fn:function(a){a.ui.extendDown()}}},SelectUp:function(a){return{opt:a,type:1,id:16,str:"",fn:function(a){a.ui.selectUp()}}},ExtendUp:function(a){return{opt:a,type:1,id:17,str:"",fn:function(a){a.ui.extendUp()}}},SelectHome:function(a){return{opt:a,type:1,id:18,str:"",fn:function(a){a.ui.selectHome()}}},ExtendToHome:function(a){return{opt:a,type:1,id:19,str:"",fn:function(a){a.ui.extendToHome()}}},SelectEnd:function(a){return{opt:a,type:1,id:20,str:"",fn:function(a){a.ui.selectEnd()}}},
ExtendToEnd:function(a){return{opt:a,type:1,id:21,str:"",fn:function(a){a.ui.extendToEnd()}}},SelectAll:function(a){return{opt:a,type:1,id:22,str:"",fn:function(a){a.ui.selectAll()}}},UnselectAll:function(a){return{opt:a,type:1,id:23,str:"",fn:function(a){a.ui.unselectAll()}}},SelectInvert:function(a){return{opt:a,type:1,id:24,str:"Invert select",fn:function(a){a.ui.selectInvert()}}},PageDown:function(a){return{opt:a,type:1,id:25,str:"",fn:function(a){a.ui.pageDown()}}},ExtendPageDown:function(a){return{opt:a,
type:1,id:26,str:"",fn:function(a){a.ui.extendPageDown()}}},PageUp:function(a){return{opt:a,type:1,id:27,str:"",fn:function(a){a.ui.pageUp()}}},ExtendPageUp:function(a){return{opt:a,type:1,id:28,str:"",fn:function(a){a.ui.extendPageUp()}}},SelectNowplaying:function(a){return{opt:a,type:1,id:29,str:"",fn:function(a){a.ui.selectNowplaying()}}},ShiftLock:function(a){return{opt:a,type:1,id:30,str:"",fn:function(a){a.key.lock("shiftKey")}}},CtrlLock:function(a){return{opt:a,type:1,id:31,str:"",fn:function(a){a.key.lock("ctrlKey")}}},
AltLock:function(a){return{opt:a,type:1,id:32,str:"",fn:function(a){a.key.lock("altKey")}}},ShiftUnlock:function(a){return{opt:a,type:1,id:33,str:"",fn:function(a){a.key.unlock("shiftKey")}}},CtrlUnlock:function(a){return{opt:a,type:1,id:34,str:"",fn:function(a){a.key.unlock("ctrlKey")}}},AltUnlock:function(a){return{opt:a,type:1,id:35,str:"",fn:function(a){a.key.unlock("altKey")}}},ShiftToggleLock:function(a){return{opt:a,type:1,id:36,str:"",fn:function(a){a.key.togglelock("shiftKey")}}},CtrlToggleLock:function(a){return{opt:a,
type:1,id:37,str:"",fn:function(a){a.key.togglelock("ctrlKey")}}},AltToggleLock:function(a){return{opt:a,type:1,id:38,str:"",fn:function(a){a.key.togglelock("altKey")}}},VolumeUp:function(a){return{opt:a,type:2,id:39,str:"Volume up",fn:function(a){a.volumeup()}}},VolumeDown:function(a){return{opt:a,type:2,id:40,str:"Volume down",fn:function(a){a.volumedown()}}},VolumeMute:function(a){return{opt:a,type:2,id:41,str:"Volume mute",fn:function(a){a.ui.click("mute")}}},VolumeResume:function(a){return{opt:a,
type:2,id:42,str:"Resume from mute",fn:function(a){a.ui.click("volumeon")}}},VolumeToggleMute:function(a){return{opt:a,type:2,id:43,str:"Toggle mute",fn:function(a){a.ui.click(a.ismute()?"volumeon":"mute")}}},ToggleHelp:function(a){return{opt:a,type:3,id:44,str:"Keyboard shortcut",fn:function(a){a.ui.toggleHelp()}}},ToggleAbout:function(a){return{opt:a,type:3,id:45,str:"Application Information",fn:function(a){a.ui.toggleAbout()}}},OpenConfig:function(a){return{opt:a,type:3,id:46,str:"Configuration",
fn:function(a){a.ui.click("conf")}}},ViewInformation:function(a){return{opt:a,type:3,id:47,str:"Music information",fn:function(a){a.ui.viewInformation()}}},Escape:function(a){return{opt:a,type:3,id:48,str:"",fn:function(a){a.ui.escape()}}},FocusToggle:function(a){return{opt:a,type:3,id:49,str:"",fn:function(a){a.ui.focusToggle()}}},FocusToggleReverse:function(a){return{opt:a,type:3,id:50,str:"",fn:function(a){a.ui.focusToggleReverse()}}},FullScreenOn:function(a){return{opt:a,type:3,id:51,str:"",fn:function(a){a.ui.fullScreenOn()}}},
FullScreenOff:function(a){return{opt:a,type:3,id:52,str:"",fn:function(a){a.ui.fullScreenOff()}}},FullScreenToggle:function(a){return{opt:a,type:3,id:53,str:"Toggle fullscreen",fn:function(a){a.ui.fullScreenToggle()}}},CopyTitle:function(a){return{opt:a,type:4,id:54,str:"Copy Title",fn:function(a){a.ui.copy("title")}}},CopyArtist:function(a){return{opt:a,type:4,id:55,str:"Copy Artist",fn:function(a){a.ui.copy("artist")}}},CopyArtistTitle:function(a){return{opt:a,type:4,id:56,str:"Copy Artist and Title",
fn:function(a){a.ui.copy("artist/title")}}},CopyInformation:function(a){return{opt:a,type:4,id:57,str:"Copy Information",fn:function(a){a.ui.copy("info")}}},CopyFilename:function(a){return{opt:a,type:4,id:58,str:"Copy Filename",fn:function(a){a.ui.copy("filename")}}},CopyWithHashtag:function(a){return{opt:a,type:4,id:59,str:"Copy with #nowplaying",fn:function(a){a.ui.copy("hash")}}},Nop:function(a){return{opt:a,type:5,id:56,str:"",fn:function(){}}},Define:function(a){return{opt:a,type:5,id:57,str:"",
fn:function(){}}}};z.prototype={version:"2.0",start:function(){for(var a in this)if(this[a]&&this[a].init){this[a].app=this;this[a].init(this);n("init: "+a)}},files:[],musics:[],tags:[],playing:null,nowplaying:0,filetypes:{audio:{regexp:/audio\/(mp3|wav|ogg|m4a)/,string:"audio"},video:{regexp:/video\/(mp4)/,string:"video"}},readFiles:function(a){j("Player.prototype.readFiles");var b=this;[].forEach.call(a,function(c,d){a[d].filetype=c.type.match(b.filetypes.audio.regexp)?b.filetypes.audio.string:
c.type.match(b.filetypes.video.regexp)?b.filetypes.video.string:""});var c=[].filter.call(a,function(a){return a.filetype!==""}),d=b.shuffle.value==="false"?b.musics.length:b.musics.length+Math.floor(Math.random()*Math.min(30,c.length)),g=b.musics.length;b.interruptflag=false;b.asyncread(0,c,d-g)},interrupt:function(){this.interruptflag=true},asyncread:function(a,b,c){j("asyncread");this.readOneFile(b[a],a===c,a===b.length-1||this.interruptflag);var d=this;if(a+1<b.length&&!d.interruptflag)setTimeout(function(){d.asyncread(a+
1,b,c)},a<60?0:a<150?100:150);else{d.interruptflag=false;d.order.concat(d.orderBuffer);d.orderBuffer=[];d.order.shuffle.value==="true"&&d.order.shuffleOn()}},orderBuffer:[],readOneFile:function(a,b,c){j("readOneFile");var d=this.musics.length;this.files=this.files||[];this.files[d]=a;this.orderBuffer=this.orderBuffer.concat(d);this.musics[d]=new N(a,a.filetype==="video"?this.ui.div.video:null);this.musics[d].tagread(function(a,b,c){return function(f){a.tags[b]=f;a.ui.ontagread(f,b);c&&a.play(d)}}(this,
d,!this.playing&&b));this.ui.addfile(a,d);if(c){this.ui.selectableSet();this.ui.setdblclick()}},play:function(a){j("Player.prototype.play");console.log("order:"+this.order.array.join(","));console.log("index:"+a);var b=this;a===void 0&&(a=0);b.order.atfromEnum(a);b.pause();b.playing&&b.playing.release();if(a!==void 0){b.nowplaying=a;b.playing=b.musics[a];b.playing.tags&&!b.playing.tags.picture&&b.playing.readpicture();b.playing.play(b.volume.value/256,function(){b.next()});b.ui.play(a);b.playing.filetype===
"video"?b.ui.popupvideo():b.ui.hidevideo()}},pause:function(){j("Player.prototype.pause");this.ui.pause();this.playing&&this.playing.pause()},toggle:function(){j("Player.prototype.toggle");if(this.playing)if(this.playing.paused()){this.playing.resume();this.ui.play(this.nowplaying)}else this.pause()},nextundefinedcount:0,next:function(){j("Player.prototype.next");this.pause();this.ui.slideZero();var a=this.order.next();if(a===void 0){this.playing&&this.playing.release();this.nextundefinedcount++;
if(this.nextundefinedcount<3)return;this.nextundefinedcount=0;a=this.order.head();if(a===void 0)return}this.play(a)},prevundefinedcount:0,prev:function(){j("Player.prototype.prev");this.pause();var a=this.order.prev();if(a===void 0){this.playing&&this.playing.release();this.prevundefinedcount++;if(this.prevundefinedcount<3)return;this.prevundefinedcount=0;a=this.order.last();if(a===void 0)return}this.play(a)},seekAt:function(a){j("Player.prototype.seekAt");if(this.playing!==void 0&&this.playing.audio){a=
Math.max(0,Math.min(1,a));this.playing.audio.currentTime=this.playing.audio.duration*a;return true}return false},seekBy:function(a){j("Player.prototype.seekBy");this.nowplaying!==void 0&&this.playing&&this.playing.audio&&this.playing.seekBy(a)&&this.prev()},volume:new D(0,256,16,127),updatevolume:function(){j("Player.prototype.updatevolume");this.volume.at(this.ui.getvolume())},mute:function(){j("Player.prototype.mute");this.prevol=this.volume.value;this.volume.setToMin()},resume:function(){j("Player.prototype.resume");
this.volume.at(this.prevol);delete this.prevol},togglemute:function(){j("Player.prototype.togglemute");this.ismute()?this.resume():this.mute()},ismute:function(){j("Player.prototype.ismute");return this.volume.value===0&&this.prevol!==void 0},volumeup:function(){j("Player.prototype.volumeup");this.volume.increase()},volumedown:function(){j("Player.prototype.volumedown");this.volume.decrease()},remove:function(a){j("Player.prototype.remove");this[a]=null;n("removing:::"+a);this.order.remove(a);n(this.order);
n(this.order.array)},order:new p([],null,function(){})};z.prototype.repeat=new t(["false","true","one"],function(){return m.get("repeat")||"false"},function(a,b){m.set("repeat",a);b.ui.setrepeat(a);a==="one"?b.order.repeatOne():a==="true"?b.order.repeatOn():b.order.repeatOff()});z.prototype.shuffle=new t(["false","true"],function(){return m.get("shuffle")||"false"},function(a,b){m.set("shuffle",a);b.ui.setshuffle(a);a==="true"?b.order.shuffleOn():b.order.shuffleOff()});z.prototype.volume=new D(0,
256,16,function(){var a=parseInt(m.get("volume"),10);return a!==void 0?a:128},function(a,b){m.set("volume",a);b.ui.setvolume(a);b.playing&&b.playing.setvolume(a/256)});z.prototype.message={init:function(){var a=this;chrome&&chrome.extension&&chrome.extension.onRequest.addListener(function(b){switch(b.type){case "globalkeydown-bg":n(b);a.app.key.keydown(b);break;case "changescheme":a.app.ui.colorset()}})}};z.prototype.vim={visual:new t([!1,!0],!1,function(){})};var X=new z;k.onload=function(){X.start()};
z.prototype.key=new O({"<space>":f.PlayPause([]),"<c-space>":"<space>","<g-c-space>":"<space>","<c-right>":f.NextMusic([]),"<g-c-right>":"<c-right>","<c-left>":f.PreviousMusic([]),"<g-c-left>":"<c-left>","<c-o>":f.OpenFile([]),":o":"<c-o>",":e":"<c-o>","<right>":f.SeekForward(["10"]),"<s-right>":f.SeekForward(["30"]),l:"<right>",w:"<s-right>","<left>":f.SeekBackward(["10"]),"<s-left>":f.SeekBackward(["30"]),h:"<left>",b:"<s-left>","<s-4>":f.SeekPercent(["100"]),"<c-d>":f.Interrupt([]),"<c-r>":f.ToggleRepeat([]),
"<c-u>":f.ToggleShuffle([]),"<c-up>":f.VolumeUp([]),"<g-c-up>":"<c-up>","<c-down>":f.VolumeDown([]),"<g-c-down>":"<c-down>","<c-a-down>":f.VolumeToggleMute([]),"<g-c-a-down>":"<c-a-down>",9:f.VolumeDown([]),"0":f.VolumeUp([]),"<down>":f.SelectDown([]),j:"<down>","<s-down>":f.ExtendDown([]),"<s-j>":"<s-down>","<up>":f.SelectUp([]),k:"<up>","<s-up>":f.ExtendUp([]),"<s-k>":"<s-up>","<home>":f.SelectHome([]),gg:"<home>","<s-home>":f.ExtendToHome([]),"<end>":f.SelectEnd([]),"<s-g>":"<end>","<s-end>":f.ExtendToEnd([]),
"<c-a>":f.SelectAll([]),"<c-s-a>":f.UnselectAll([]),"<c-i>":f.SelectInvert([]),"<pgdn>":f.PageDown([]),"<s-pgdn>":f.ExtendPageDown([]),"<pgup>":f.PageUp([]),"<c-b>":"<pgup>","<s-pgup>":f.ExtendPageUp([]),np:f.SelectNowplaying([]),"<s-/>":f.ToggleHelp([]),"<f1>":f.ToggleAbout([]),"[":"<f1>","<c-,>":f.OpenConfig([]),"<delete>":f.DeleteSelected([]),"<c-]>":f.DeleteAndNext([]),"<backspace>":"<delete>",d:"<delete>","<esc>":f.Escape([]),"<s-esc>":"<esc>","<c-[>":"<esc>","<c-s-[>":"<esc>","<enter>":f.DefaultEnter([]),
"<a-enter>":f.ViewInformation([]),pp:f.ViewInformation([]),"<tab>":"<nop>","<s-tab>":"<nop>",f:f.FullScreenToggle([]),"<c-s-f>":"f","<c-f>":f.FilterStart([]),"/":f.FilterStart([]),"<c-a-c>":f.CopyTitle([]),"<c-s-c>":f.CopyArtist([]),"<c-c>":f.CopyWithHashtag([]),yy:f.CopyFilename([]),"<c-p>":"<nop>","<c-j>":"<nop>","<c-h>":"<nop>","<c-l>":"<nop>","<c-s>":"<nop>","<nop>":f.Nop([])});j=function(){};n=function(){}})(this,"undefined"!==typeof jQuery?jQuery:{});
