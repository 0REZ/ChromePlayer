(function(j,d){function l(a){console.dir(a)}function h(a){console.log("--------------- "+a+" ---------------")}function D(a,b,c,e,f){a>b&&(a=b);this.min=a;this.max=b;this.step=c;this.initializer=e;this.callback=f||function(){}}function v(a){this.array=a}function w(a,b,c){this.enumclass=new v(a);this.array=this.enumclass.array;this.initializer=b;this.callback=c||function(){}}function t(a,b,c){this.enumclass=new v(a);this.array=this.enumclass.array;this.initializer=b;this.callback=c||function(){};var c=
c||function(){},e=this;this.enumlinear=new w(a,b,function(a){e.index=e.enumlinear.index;e.value=a;e.history=e.history.concat(e.value);e.array=e.enumlinear.array;c(a,e.app)});for(var f in this.enumlinear)this.enumlinear.hasOwnProperty(f)&&(this[f]=this.enumlinear[f])}function k(a,b,c){this.initializer=b;this.callback=c||function(){};var c=c||function(){},e=this;this.enumlinear=new w(a,function(){b();e.repeat.init();e.shuffle.init();e.enumlinear.init()},function(a,b){h("this.enumlinear callback");l("value: "+
a);e.index=e.enumlinear.index;e.value=a;e.history=e.history.concat(e.value);e.array=e.enumlinear.array;e.enumclass=e.enumlinear.enumclass;c(e.value,b)});this.repeat=new t(["false","true","one"],"false",function(a){l("repeat:"+a)});this.shuffle=new t(["false","true"],"false",function(a){l("shuffle:::"+a);l(e.repeat.value);e.orderedarray||(e.orderedarray=e.enumlinear.enumclass.array||e.array||e.enumlinear.array||[]);switch(a){case "true":a=(void 0===e.value||0>e.array.indexOf(e.value)?[]:[e.value]).concat(e.orderedarray.shuffle().drop(e.value));
e.changeArray(a);break;default:e.changeArray(e.orderedarray),delete e.orderedarray}});for(var f in this.enumlinear)this.enumlinear.hasOwnProperty(f)&&(this[f]=this.enumlinear[f])}function G(a){this.result=a;this.i=0}function K(a,b,c){function e(a,b,c,e,u,i){var d=f();d?("undefined"===typeof i&&(i=!0),b&&("undefined"!=typeof d.onload?d.onload=function(){"200"==d.status||"206"==d.status?(d.fileSize=u||d.getResponseHeader("Content-Length"),b(d)):c&&c();d=A}:d.onreadystatechange=function(){4==d.readyState&&
("200"==d.status||"206"==d.status?(d.fileSize=u||d.getResponseHeader("Content-Length"),b(d)):c&&c(),d=A)}),d.open("GET",a,i),d.overrideMimeType&&d.overrideMimeType("text/plain; charset=x-user-defined"),e&&d.setRequestHeader("Range","bytes="+e[0]+"-"+e[1]),d.setRequestHeader("If-Modified-Since","Sat, 1 Jan 1970 00:00:00 GMT"),d.send(A)):c&&c()}function f(){var a=A;j.XMLHttpRequest?a=new XMLHttpRequest:j.F&&(a=new ActiveXObject("Microsoft.XMLHTTP"));return a}function i(a,b){var c=f();c&&(b&&("undefined"!=
typeof c.onload?c.onload=function(){"200"==c.status&&b(this);c=A}:c.onreadystatechange=function(){4==c.readyState&&("200"==c.status&&b(this),c=A)}),c.open("HEAD",a,!0),c.send(A))}function u(a,b){function f(a){var b=~~(a[0]/i)-d,a=~~(a[1]/i)+1+d;0>b&&(b=0);a>=blockTotal&&(a=blockTotal-1);return[b,a]}function u(f,d){for(;l[f[0]];)if(f[0]++,f[0]>f[1]){d&&d();return}for(;l[f[1]];)if(f[1]--,f[0]>f[1]){d&&d();return}var z=[f[0]*i,(f[1]+1)*i-1];e(a,function(a){parseInt(a.getResponseHeader("Content-Length"),
10)==b&&(f[0]=0,f[1]=blockTotal-1,z[0]=0,z[1]=b-1);for(var a={data:a.W||a.responseText,s:z[0]},c=f[0];c<=f[1];c++)l[c]=a;h+=z[1]-z[0]+1;d&&d()},c,z,g,!!d)}var i,d,g,h=0,j=new H("",0,b),l=[];i=i||2048;d="undefined"===typeof d?0:d;blockTotal=~~((b-1)/i)+1;for(var p in j)j.hasOwnProperty(p)&&"function"===typeof j[p]&&(this[p]=j[p]);this.a=function(a){var b;u(f([a,a]));b=l[~~(a/i)];if("string"==typeof b.data)return b.data.charCodeAt(a-b.s)&255;if("unknown"==typeof b.data)return IEBinary_getByteAt(b.data,
a-b.s)};this.N=function(){return h};this.f=function(a,b){u(f(a),b)}}(function(){i(a,function(c){c=parseInt(c.getResponseHeader("Content-Length"),10)||-1;b(new u(a,c))})})()}function H(a,b,c){var e=a,f=b||0,i=0;this.P=function(){return e};"string"==typeof a?(i=c||e.length,this.a=function(a){return e.charCodeAt(a+f)&255}):"unknown"==typeof a&&(i=c||IEBinary_getLength(e),this.a=function(a){return IEBinary_getByteAt(e,a+f)});this.n=function(a,b){for(var c=Array(b),e=0;e<b;e++)c[e]=this.a(a+e);return c};
this.j=function(){return i};this.d=function(a,b){return(this.a(a)&1<<b)!=0};this.Q=function(a){a=this.a(a);return a>127?a-256:a};this.r=function(a,b){var c=b?(this.a(a)<<8)+this.a(a+1):(this.a(a+1)<<8)+this.a(a);c<0&&(c=c+65536);return c};this.S=function(a,b){var c=this.r(a,b);return c>32767?c-65536:c};this.h=function(a,b){var c=this.a(a),e=this.a(a+1),f=this.a(a+2),i=this.a(a+3),c=b?(((c<<8)+e<<8)+f<<8)+i:(((i<<8)+f<<8)+e<<8)+c;c<0&&(c=c+4294967296);return c};this.R=function(a,b){var c=this.h(a,
b);return c>2147483647?c-4294967296:c};this.q=function(a){var b=this.a(a),c=this.a(a+1),a=this.a(a+2),b=((b<<8)+c<<8)+a;b<0&&(b=b+16777216);return b};this.c=function(a,b){for(var c=[],e=a,f=0;e<a+b;e++,f++)c[f]=String.fromCharCode(this.a(e));return c.join("")};this.e=function(a,b,c){a=this.n(a,b);switch(c.toLowerCase()){case "utf-16":case "utf-16le":case "utf-16be":var b=c,e,f=0,i=1,c=0;e=Math.min(e||a.length,a.length);a[0]==254&&a[1]==255?(b=true,f=2):a[0]==255&&a[1]==254&&(b=false,f=2);b&&(i=0,
c=1);for(var b=[],d=0;f<e;d++){var g=a[f+i],h=(g<<8)+a[f+c],f=f+2;if(h==0)break;else g<216||g>=224?b[d]=String.fromCharCode(h):(g=(a[f+i]<<8)+a[f+c],f=f+2,b[d]=String.fromCharCode(h,g))}a=new String(b.join(""));a.g=f;break;case "utf-8":e=0;f=Math.min(f||a.length,a.length);a[0]==239&&a[1]==187&&a[2]==191&&(e=3);i=[];for(c=0;e<f;c++)if(b=a[e++],b==0)break;else b<128?i[c]=String.fromCharCode(b):b>=194&&b<224?(d=a[e++],i[c]=String.fromCharCode(((b&31)<<6)+(d&63))):b>=224&&b<240?(d=a[e++],h=a[e++],i[c]=
String.fromCharCode(((b&255)<<12)+((d&63)<<6)+(h&63))):b>=240&&b<245&&(d=a[e++],h=a[e++],g=a[e++],b=((b&7)<<18)+((d&63)<<12)+((h&63)<<6)+(g&63)-65536,i[c]=String.fromCharCode((b>>10)+55296,(b&1023)+56320));a=new String(i.join(""));a.g=e;break;default:f=[];i=i||a.length;for(e=0;e<i;){c=a[e++];if(c==0)break;f[e-1]=String.fromCharCode(c)}a=new String(f.join(""));a.g=e}return a};this.M=function(a){return String.fromCharCode(this.a(a))};this.Z=function(){return j.btoa(e)};this.L=function(a){e=j.atob(a)};
this.f=function(a,b){b()}}function I(a,b){this.file=a;this.type=a.type;this.name=a.name;this.filetype=a.filetype;"video"===a.filetype&&b&&(this.htmlElement=b)}function J(a){if(a)for(var b in a)if(a.hasOwnProperty(b)&&a[b]){var c=this.parse(b).join(" ");this.set(c,a[b]);this.keys.push(c)}this.keys=this.keys.sort()}function E(a){this.ctrl=this.alt=this.meta=this.shift=this.global=null;if(!s.regex.onekey.test(a))throw"Don't pass unvalid key into Onekey!";this.parse(a)}function B(){this.ui=n}Array.prototype.clone=
function(){return Array.apply(null,this)};Array.prototype.drop=function(a){for(var b=[],c=0;c<this.length;c++)this[c]!==a&&(b=b.concat([this[c]]));return b};Array.prototype.shuffle=function(){for(var a=this.clone(),b=a.length,c,e,f=Math.random,i=Math.floor;b;)c=i(f()*b),e=a[--b],a[b]=a[c],a[c]=e;return a};Array.prototype.unique=function(){var a=[],b,c,e,f,i;b=-1;for(e=this.length;b<e;++b){c=-1;f=a.length;for(i=!0;c<f;++c)a[c]===this[b]&&(c=f+1,i=!1);i&&a.push(this[b])}return a};Array.prototype.deepEqual=
function(a){if(this.length!==a.length)return!1;for(var b=0;b<this.length;b++)if(this[b]!==a[b])return!1;return!0};"undefined"!==typeof d&&"undefined"!==typeof d.fn&&(d.fn.texttitle=function(a){return this.text(a).attr("title",a)},d.fn.unique=Array.prototype.unique,d.fn.join=Array.prototype.join);"undefined"!==typeof exports&&(exports.log=l,exports.logfn=h);var L={strarr:"abcdefghijklmnopqrstuvwxyz",randomstr:function(){for(var a=this.strarr.length,b="",c=0;c<10;c++)b=b+this.strarr[Math.floor(Math.random()*
a)];return b},createId:function(){return(new Date).getTime().toString()+this.randomstr()},send:function(a){chrome&&chrome.extension&&chrome.extension.sendRequest(a)}};D.prototype={value:void 0,at:function(a){this.value=a===void 0||isNaN(a)?this.value===void 0?(this.min+this.max)/2:this.assert(this.value):this.assert(a);this.callback(this.value,this.app);return this.value},assert:function(a){return Math.min(Math.max(a,this.min),this.max)},increase:function(a){if(a===void 0||isNaN(a))a=this.step;return this.at(this.value+
a)},decrease:function(a){if(a===void 0||isNaN(a))a=this.step;return this.increase(-a)},init:function(a){this.app=a;typeof this.initializer==="function"?this.at(this.initializer()):this.at(this.initializer)},setToMin:function(){return this.at(this.min)},setToMax:function(){return this.at(this.max)}};"undefined"!==typeof exports&&(exports.Limited=D);v.prototype={array:[],succ:function(a){return this.toEnum(1+this.fromEnum(a))},pred:function(a){return this.toEnum(-1+this.fromEnum(a))},toEnum:function(a){if(this.array&&
0<=a&&a<this.array.length)return this.array[a]},fromEnum:function(a){if(this.array)for(var b=0,c=this.array.length;b<c;b++)if(this.array[b]===a)return b},enumFrom:function(a){if(this.array)return this.enumFromTo(a,this.array[this.array.length-1])},enumFromThen:function(a,b){if(this.array){for(var c=this.fromEnum(a),e=this.fromEnum(b),f=[],i=c;0<=i&&i<this.array.length;i=i+(e-c))f=f.concat(this.array[i]);return f}},enumFromTo:function(a,b){return this.enumFromThenTo(a,this.succ(a),b)},enumFromThenTo:function(a,
b,c){if(this.array){var a=this.fromEnum(a),b=this.fromEnum(b),c=this.fromEnum(c),b=b-a,e=[];if(0===b)e=e.concat(this.array[a]);else if(0<b)for(;a<=c&&a<this.array.length;a=a+b)e=e.concat(this.array[a]);else for(;a>=c&&a>=0;a=a+b)e=e.concat(this.array[a]);return e}}};"undefined"!==typeof exports&&(exports.Enum=v);"undefined"===typeof j&&(v=require("./enum").Enum);w.prototype={index:0,value:void 0,history:[],head:function(){h("Enumlinear.prototype.head");return this.at(0)},last:function(){h("Enumlinear.prototype.last");
return this.at(this.enumclass.array.length-1)},nonvalidIndex:function(a){return a===void 0||isNaN(a)||typeof a!=="number"},at:function(a){h("Enumlinear.prototype.at");if(this.nonvalidIndex(a))a=this.index;var b=this.enumclass.toEnum(a);if(!(b===void 0||this.array.length===0)){this.value=b;this.index=a;this.array=this.enumclass.array;this.history=this.history.concat(this.value);this.callback(this.value,this.app);return this.value}},atfromEnum:function(a){h("Enumlinear.prototype.atfromEnum");a=this.enumclass.fromEnum(a);
return a===void 0?void 0:this.at(a)},next:function(a){h("Enumlinear.prototype.next");this.nonvalidIndex(a)&&(a=1);return this.at(this.index+a)},prev:function(a){h("Enumlinear.prototype.prev");this.nonvalidIndex(a)&&(a=-1);return this.next(a)},init:function(a){h("Enumlinear.prototype.init");this.app=a;var b;if(typeof this.initializer==="function")try{b=this.initializer()}catch(c){b=this.array[0]}else b=this.initializer;b=this.atfromEnum(b);if(b===void 0)return this.at(0)},concat:function(a){h("Enumlinear.prototype.concat");
return this.changeArray(this.enumclass.array.concat(a))},splice:function(a,b){h("Enumlinear.prototype.splice");var c=this.enumclass.array;this._index=this.enumclass.fromEnum(this.value)||0;c.splice(a,b);return this.changeArray(c)},remove:function(a){h("Enumlinear.prototype.remove");return this.splice(this.enumclass.fromEnum(a),1)},changeArray:function(a){h("Enumlinear.prototype.changeArray");a=a.drop(void 0);this.enumclass=new v(a);this.array=this.enumclass.array;this.at(this._index-1%this.array.length);
return this}};"undefined"!==typeof exports&&(exports.Enumlinear=w);"undefined"===typeof j&&(v=require("./enum").Enum,w=require("./enumlinear").Enumlinear);t.prototype=new w;t.prototype.at=function(a){if(this.nonvalidIndex(a))a=this.index;var b=this.array.length;return this.enumlinear.at((a%b+b)%b)};t.prototype.changeArray=function(a){this.enumlinear.changeArray(a);this.array=this.enumlinear.array;this.enumclass=this.enumlinear.enumclass};"undefined"!==typeof exports&&(exports.Enumcycle=t);"undefined"===
typeof j&&(require("./prelude"),v=require("./enum").Enum,w=require("./enumlinear").Enumlinear,t=require("./enumcycle").Enumcycle);k.prototype=new w;k.prototype.at=function(a){h("Enumdinamic.prototype.at");if(this.nonvalidIndex(a))a=this.index;l("this:::");return this.enumlinear.at(a)};k.prototype.next=function(a){h("Enumdinamic.prototype.next");if(a===void 0||isNaN(a))a=1;a=this.index===void 0?0:this.index+a;switch(this.repeat.value){case "one":a=this.index;break;case "true":var b=this.enumclass.toEnum(a);
if(b===void 0)switch(this.shuffle.value){case "true":this.shuffleOn();a++;default:b=this.array.length;a=(a%b+b)%b}break;default:b=this.enumclass.toEnum(a);if(b===void 0)switch(this.shuffle.value){case "true":this.shuffleOn();default:return}}return this.at(a)};k.prototype.concat=function(a){h("Enumdinamic.prototype.concat");var b=this.array||[];this.orderedarray=(this.orderedarray||this.array||[]).concat(a);this.changeArray(b.concat(a));this.shuffle.value==="true"&&this.shuffleOn()};k.prototype.remove=
function(a){l(this);h("Enumdinamic.prototype.remove");if(this.orderedarray)this.orderedarray=this.orderedarray.drop(a);this.enumlinear.remove(a);l(this)};k.prototype.changeArray=function(a){h("Enumdinamic.prototype.changeArray");l(this.value);a=a.drop(void 0);this.enumlinear.changeArray(a);this.array=this.enumlinear.array;l("this.array: "+this.array.join(","));l("this.value: "+this.value);this.enumclass=this.enumlinear.enumclass;this.atfromEnum(this.value);for(var b in this.enumlinear)this.enumlinear.hasOwnProperty(b)&&
(this[b]=this.enumlinear[b]);return this};k.prototype.setRepeat=function(a){this.repeat.atfromEnum(a)};k.prototype.repeatOff=function(){this.setRepeat("false")};k.prototype.repeatOn=function(){this.setRepeat("true")};k.prototype.repeatOne=function(){this.setRepeat("one")};k.prototype.repeatToggle=function(){this.repeat.next()};k.prototype.repeatToggleOnOff=function(){this.setRepeat(this.repeat.value==="false"?"true":"false")};k.prototype.setShuffle=function(a){this.shuffle.atfromEnum(a)};k.prototype.shuffleOff=
function(){this.setShuffle("false")};k.prototype.shuffleOn=function(){this.setShuffle("true")};k.prototype.shuffleToggle=function(){this.shuffle.next()};k.prototype.shuffleToggleOnOff=function(){this.setShuffle(this.shuffle.value==="false"?"true":"false")};"undefined"!==typeof exports&&(exports.Enumdinamic=k);String.prototype.toBin=function(){for(var a=[],b=9,c=this;--b;){a.push(c&128);c=c<<1}return a.join("")};String.prototype.unsynchsafe=function(){return(this.charCodeAt(0)&127)<<21|(this.charCodeAt(1)&
127)<<14|(this.charCodeAt(2)&127)<<7|this.charCodeAt(3)&127};G.prototype={read:function(){this.header();this.extendedheader();this.frames();return this.tags},header:function(){this.header=this.result.slice(this.i,this.i=this.i+10);this.headerid=this.header.slice(0,3);this.version=[this.header.charCodeAt(3),this.header.charCodeAt(4)];this.flags=this.header.slice(5,6).toBin();this.tagsize=this.header.slice(6,10).unsynchsafe()},extendedheader:function(){if(this.flags[1]==="1")this.result.slice(this.i,
this.i=this.i+this.result.slice(this.i,this.i=this.i+4).unsynchsafe())},readFrameSize:function(a){return((parseInt(a.charCodeAt(0),10)*128+parseInt(a.charCodeAt(1),10))*128+parseInt(a.charCodeAt(2),10))*128+parseInt(a.charCodeAt(3),10)},frames:function(){for(var a={},b=this.i;b<this.tagsize;){var c=this.result.slice(b,b=b+4).toString(),e=this.readFrameSize(this.result.slice(b,b=b+4));this.result.slice(b,b=b+2).toBin();var f;a:{f=this.result.slice(b,b=b+e);switch(f.charCodeAt(0)){case 0:l("ISO-8859-1");
for(var i="",d=0;d<f.length;)i=i+String.fromCharCode(f.charCodeAt(d++)|f.charCodeAt(d++)<<8);d=/.{0,2}[\uff01\ufe00]./;f=d.test(i)?i.replace(d,""):f.toString();break a;case 2:l("UTF-16BE without BOM");case 1:l("UTF-16 with BOM");for(var i="",m=String.fromCharCode,x=void 0,d=1,g=f.length;d<g;)if(x===1||(f.charCodeAt(d)&255)===255){if(!x){d=d+2;x=1}i=i+m(f.charCodeAt(d++)|f.charCodeAt(d++)<<8)}else if(x===2||(f.charCodeAt(d)&254)===254){if(!x){d=d+2;x=2}i=i+m(f.charCodeAt(d++)<<8|f.charCodeAt(d++))}else i=
i+f[d++];f=i;break a;case 3:l("UTF-8");i="";m=String.fromCharCode;d=1;for(g=f.length;d<g;){x=f.charCodeAt(d);i=x&128?x&32?x&16?x&8?x&4?i+m((f.charCodeAt(d++)&1)<<30|(f.charCodeAt(d++)&63)<<24|(f.charCodeAt(d++)&63)<<18|(f.charCodeAt(d++)&63)<<12|f.charCodeAt(d++)&6|f.charCodeAt(d++)):i+m((f.charCodeAt(d++)&3)<<24|(f.charCodeAt(d++)&63)<<18|(f.charCodeAt(d++)&63)<<12|f.charCodeAt(d++)&6|f.charCodeAt(d++)):i+m((f.charCodeAt(d++)&7)<<18|(f.charCodeAt(d++)&63)<<12|f.charCodeAt(d++)&6|f.charCodeAt(d++)):
i+m((f.charCodeAt(d++)&15)<<12|(f.charCodeAt(d++)&63)<<6|f.charCodeAt(d++)&63):i+m((f.charCodeAt(d++)&31)<<6|f.charCodeAt(d++)&63):i+f[d++]}f=i;break a}f=void 0}if(e){c!=="APIC"&&l("flame text: "+f);if(f){a[c]=f;this.shortcuts[c]&&(a[this.shortcuts[c]]=f)}}}this.tags=a},shortcuts:{TIT2:"title",TPE1:"artist",TALB:"album",TYER:"year",COMM:"comment",TRCK:"track",TCON:"genre",APIC:"picture",USLT:"lyrics",APIC:"picture"}};"undefined"!==typeof exports&&(exports._ID3=G);var A=null;document.write("<script type='text/vbscript'>\r\nFunction IEBinary_getByteAt(strBinary, iOffset)\r\n\tIEBinary_getByteAt = AscB(MidB(strBinary,iOffset+1,1))\r\nEnd Function\r\nFunction IEBinary_getLength(strBinary)\r\n\tIEBinary_getLength = LenB(strBinary)\r\nEnd Function\r\n<\/script>\r\n");
(function(a){a.FileAPIReader=function(a){return function(c,e){var f=new FileReader;f.onload=function(a){e(new H(a.target.result))};f.readAsBinaryString(a)}}})(this);(function(a){a.k={i:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",z:function(a){for(var c="",e,f,d,u,m,g,z=0;z<a.length;){e=a[z++];f=a[z++];d=a[z++];u=e>>2;e=(e&3)<<4|f>>4;m=(f&15)<<2|d>>6;g=d&63;isNaN(f)?m=g=64:isNaN(d)&&(g=64);c=c+Base64.i.charAt(u)+Base64.i.charAt(e)+Base64.i.charAt(m)+Base64.i.charAt(g)}return c}};
a.Base64=a.k;a.k.encodeBytes=a.k.z})(this);(function(a){var b=a.t={},c={},e=[0,7];b.C=function(a,b,d){d=d||{};(d.dataReader||K)(a,function(m){m.f(e,function(){var e=m.c(4,7)=="ftypM4A"?ID4:m.c(0,3)=="ID3"?ID3v2:ID3v1;e.o(m,function(){var g=d.tags,h=e.p(m,g),g=c[a]||{},j;for(j in h)h.hasOwnProperty(j)&&(g[j]=h[j]);c[a]=g;b&&b()})})})};b.A=function(a){if(!c[a])return A;var b={},e;for(e in c[a])c[a].hasOwnProperty(e)&&(b[e]=c[a][e]);return b};b.B=function(a,b){return!c[a]?A:c[a][b]};a.ID3=a.t;b.loadTags=
b.C;b.getAllTags=b.A;b.getTag=b.B})(this);(function(a){var b=a.u={},c=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative",
"Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychadelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde",
"Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","Acapella","Euro-House","Dance Hall"];b.o=function(a,b){var c=a.j();a.f([c-128-1,c],b)};b.p=function(a){var b=a.j()-128;if(a.c(b,
3)=="TAG"){var d=a.c(b+3,30).replace(/\0/g,""),u=a.c(b+33,30).replace(/\0/g,""),m=a.c(b+63,30).replace(/\0/g,""),g=a.c(b+93,4).replace(/\0/g,"");if(a.a(b+97+28)==0)var h=a.c(b+97,28).replace(/\0/g,""),j=a.a(b+97+29);else{h="";j=0}a=a.a(b+97+30);return{version:"1.1",title:d,artist:u,album:m,year:g,comment:h,track:j,genre:a<255?c[a]:""}}return{}};a.ID3v1=a.u})(this);(function(a){function b(a,b){var c=b.a(a),e=b.a(a+1),d=b.a(a+2);return b.a(a+3)&127|(d&127)<<7|(e&127)<<14|(c&127)<<21}var c=a.G={};c.b=
{};c.frames={BUF:"Recommended buffer size",CNT:"Play counter",COM:"Comments",CRA:"Audio encryption",CRM:"Encrypted meta frame",ETC:"Event timing codes",EQU:"Equalization",GEO:"General encapsulated object",IPL:"Involved people list",LNK:"Linked information",MCI:"Music CD Identifier",MLL:"MPEG location lookup table",PIC:"Attached picture",POP:"Popularimeter",REV:"Reverb",RVA:"Relative volume adjustment",SLT:"Synchronized lyric/text",STC:"Synced tempo codes",TAL:"Album/Movie/Show title",TBP:"BPM (Beats Per Minute)",
TCM:"Composer",TCO:"Content type",TCR:"Copyright message",TDA:"Date",TDY:"Playlist delay",TEN:"Encoded by",TFT:"File type",TIM:"Time",TKE:"Initial key",TLA:"Language(s)",TLE:"Length",TMT:"Media type",TOA:"Original artist(s)/performer(s)",TOF:"Original filename",TOL:"Original Lyricist(s)/text writer(s)",TOR:"Original release year",TOT:"Original album/Movie/Show title",TP1:"Lead artist(s)/Lead performer(s)/Soloist(s)/Performing group",TP2:"Band/Orchestra/Accompaniment",TP3:"Conductor/Performer refinement",
TP4:"Interpreted, remixed, or otherwise modified by",TPA:"Part of a set",TPB:"Publisher",TRC:"ISRC (International Standard Recording Code)",TRD:"Recording dates",TRK:"Track number/Position in set",TSI:"Size",TSS:"Software/hardware and settings used for encoding",TT1:"Content group description",TT2:"Title/Songname/Content description",TT3:"Subtitle/Description refinement",TXT:"Lyricist/text writer",TXX:"User defined text information frame",TYE:"Year",UFI:"Unique file identifier",ULT:"Unsychronized lyric/text transcription",
WAF:"Official audio file webpage",WAR:"Official artist/performer webpage",WAS:"Official audio source webpage",WCM:"Commercial information",WCP:"Copyright/Legal information",WPB:"Publishers official webpage",WXX:"User defined URL link frame",AENC:"Audio encryption",APIC:"Attached picture",COMM:"Comments",COMR:"Commercial frame",ENCR:"Encryption method registration",EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",GRID:"Group identification registration",IPLS:"Involved people list",
LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",RBUF:"Recommended buffer size",RVAD:"Relative volume adjustment",RVRB:"Reverb",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",TALB:"Album/Movie/Show title",TBPM:"BPM (beats per minute)",TCOM:"Composer",TCON:"Content type",TCOP:"Copyright message",TDAT:"Date",TDLY:"Playlist delay",
TENC:"Encoded by",TEXT:"Lyricist/Text writer",TFLT:"File type",TIME:"Time",TIT1:"Content group description",TIT2:"Title/songname/content description",TIT3:"Subtitle/Description refinement",TKEY:"Initial key",TLAN:"Language(s)",TLEN:"Length",TMED:"Media type",TOAL:"Original album/movie/show title",TOFN:"Original filename",TOLY:"Original lyricist(s)/text writer(s)",TOPE:"Original artist(s)/performer(s)",TORY:"Original release year",TOWN:"File owner/licensee",TPE1:"Lead performer(s)/Soloist(s)",TPE2:"Band/orchestra/accompaniment",
TPE3:"Conductor/performer refinement",TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPUB:"Publisher",TRCK:"Track number/Position in set",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSIZ:"Size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",TYER:"Year",TXXX:"User defined text information frame",UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",
WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"};var e={title:["TIT2","TT2"],artist:["TPE1","TP1"],album:["TALB","TAL"],year:["TYER","TYE"],comment:["COMM","COM"],track:["TRCK","TRK"],genre:["TCON","TCO"],picture:["APIC","PIC"],lyrics:["USLT",
"ULT"]},d=["title","artist","album","track"];c.o=function(a,c){a.f([0,b(6,a)],c)};c.p=function(a,u){var m=0,g=a.a(m+3);if(g>4)return{version:">2.4"};var h=a.a(m+4),j=a.d(m+5,7),l=a.d(m+5,6),n=a.d(m+5,5),o=b(m+6,a),m=m+10;if(l)var r=a.h(m,true),m=m+(r+4);var g={version:"2."+g+"."+h,major:g,revision:h,flags:{unsynchronisation:j,extended_header:l,experimental_indicator:n},size:o},q;if(j)q={};else{for(var o=o-10,j=a,h=u,l={},n=g.major,r=[],k=0,p;p=(h||d)[k];k++)r=r.concat(e[p]||[p]);for(h=r;m<o;){r=A;
k=j;p=m;var s=A;switch(n){case 2:q=k.c(p,3);var y=k.q(p+3),t=6;break;case 3:q=k.c(p,4);y=k.h(p+4,true);t=10;break;case 4:q=k.c(p,4);y=b(p+4,k);t=10}if(q=="")break;m=m+(t+y);if(!(h.indexOf(q)<0)&&(n>2&&(s={message:{Y:k.d(p+8,6),K:k.d(p+8,5),V:k.d(p+8,4)},m:{T:k.d(p+8+1,7),H:k.d(p+8+1,3),J:k.d(p+8+1,2),D:k.d(p+8+1,1),w:k.d(p+8+1,0)}}),p=p+t,s&&s.m.w&&(b(p,k),p=p+4,y=y-4),!s||!s.m.D)){q in c.b?r=c.b[q]:q[0]=="T"&&(r=c.b["T*"]);r=r?r(p,y,k,s):void 0;r={id:q,size:y,description:q in c.frames?c.frames[q]:
"Unknown",data:r};q in l?(l[q].id&&(l[q]=[l[q]]),l[q].push(r)):l[q]=r}}q=l}for(var v in e)if(e.hasOwnProperty(v)){a:{y=e[v];typeof y=="string"&&(y=[y]);for(t=0;m=y[t];t++)if(m in q){a=q[m].data;break a}a=void 0}a&&(g[v]=a)}for(var w in q)q.hasOwnProperty(w)&&(g[w]=q[w]);return g};a.ID3v2=c})(this);(function(){function a(a){var b;switch(a){case 0:b="iso-8859-1";break;case 1:b="utf-16";break;case 2:b="utf-16be";break;case 3:b="utf-8"}return b}var b=["32x32 pixels 'file icon' (PNG only)","Other file icon",
"Cover (front)","Cover (back)","Leaflet page","Media (e.g. lable side of CD)","Lead artist/lead performer/soloist","Artist/performer","Conductor","Band/Orchestra","Composer","Lyricist/text writer","Recording Location","During recording","During performance","Movie/video screen capture","A bright coloured fish","Illustration","Band/artist logotype","Publisher/Studio logotype"];ID3v2.b.APIC=function(c,e,d,i,g){var g=g||"3",i=c,m=a(d.a(c));switch(g){case "2":var h=d.c(c+1,3),c=c+4;break;case "3":case "4":h=
d.e(c+1,e-(c-i),m);c=c+(1+h.g)}g=d.a(c,1);g=b[g];m=d.e(c+1,e-(c-i),m);c=c+(1+m.g);return{format:h.toString(),type:g,description:m.toString(),data:d.n(c,i+e-c)}};ID3v2.b.COMM=function(b,e,d){var i=b,g=a(d.a(b)),m=d.c(b+1,3),h=d.e(b+4,e-4,g),b=b+(4+h.g),b=d.e(b,i+e-b,g);return{language:m,X:h.toString(),text:b.toString()}};ID3v2.b.COM=ID3v2.b.COMM;ID3v2.b.PIC=function(a,b,d,i){return ID3v2.b.APIC(a,b,d,i,"2")};ID3v2.b.PCNT=function(a,b,d){return d.O(a)};ID3v2.b.CNT=ID3v2.b.PCNT;ID3v2.b["T*"]=function(b,
e,d){var i=a(d.a(b));return d.e(b+1,e-1,i).toString()};ID3v2.b.TCON=function(){return ID3v2.b["T*"].apply(this,arguments).replace(/^\(\d+\)/,"")};ID3v2.b.TCO=ID3v2.b.TCON;ID3v2.b.USLT=function(b,e,d){var i=b,g=a(d.a(b)),m=d.c(b+1,3),h=d.e(b+4,e-4,g),b=b+(4+h.g),b=d.e(b,i+e-b,g);return{language:m,I:h.toString(),U:b.toString()}};ID3v2.b.ULT=ID3v2.b.USLT})();(function(a){function b(a,c,d,g){var h=a.h(c,true);if(h==0)g();else{var j=a.c(c+4,4);["moov","udta","meta","ilst"].indexOf(j)>-1?(j=="meta"&&(c=
c+4),a.f([c+8,c+8+8],function(){b(a,c+8,h-8,g)})):a.f([c+(j in e.l?0:h),c+h+8],function(){b(a,c+h,d,g)})}}function c(a,b,d,g,h){for(var h=h===void 0?"":h+"  ",j=d;j<d+g;){var l=b.h(j,true);if(l==0)break;var k=b.c(j+4,4);if(["moov","udta","meta","ilst"].indexOf(k)>-1){k=="meta"&&(j=j+4);c(a,b,j+8,l-8,h);break}if(e.l[k]){var n=b.q(j+16+1),o=e.l[k],n=e.types[n];if(k=="trkn"){a[o[0]]=b.a(j+16+11);a.count=b.a(j+16+13)}else{var k=j+16+4+4,r=l-16-4-4;switch(n){case "text":a[o[0]]=b.e(k,r,"UTF-8");break;
case "uint8":a[o[0]]=b.r(k);break;case "jpeg":case "png":a[o[0]]={m:"image/"+n,data:b.n(k,r)}}}}j=j+l}}var e=a.v={};e.types={"0":"uint8",1:"text",13:"jpeg",14:"png",21:"uint8"};e.l={"\u00a9alb":["album"],"\u00a9art":["artist"],"\u00a9ART":["artist"],aART:["artist"],"\u00a9day":["year"],"\u00a9nam":["title"],"\u00a9gen":["genre"],trkn:["track"],"\u00a9wrt":["composer"],"\u00a9too":["encoder"],cprt:["copyright"],covr:["picture"],"\u00a9grp":["grouping"],keyw:["keyword"],"\u00a9lyr":["lyrics"],"\u00a9gen":["genre"]};
e.o=function(a,c){a.f([0,7],function(){b(a,0,a.j(),c)})};e.p=function(a){var b={};c(b,a,0,a.j());return b};a.ID4=a.v})(this);I.prototype={toString:function(){return JSON.stringify({type:this.type,name:this.name,filetype:this.filetype,src:this.audio.src})},musicread:function(a,b,c){var e=this,d=j.URL&&j.URL.createObjectURL?function(a){return j.URL.createObjectURL(a)}:j.webkitURL&&j.webkitURL.createObjectURL?function(a){return j.webkitURL.createObjectURL(a)}:void 0;if(d)if(e.file.filetype==="audio"){e.audio=
new Audio(e.url=d(e.file));if(e.htmlElement)e.htmlElement.src=e.audio.src;e.audio.volume=a;e.audio.addEventListener("ended",function(){e.release();b()});c&&e.audio.play()}else{if(e.file.filetype==="video"){d=d(e.file);if(e.htmlElement)e.htmlElement.src=e.url=d;e.audio=e.htmlElement;e.audio.volume=a;e.audio.addEventListener("ended",function(){e.release();b()});c&&e.audio.play()}}else if(e.file.filetype==="audio"){d=new FileReader;d.onerror=function(a){l(a)};d.onload=function(d){e.audio=new Audio(d.target.result);
if(e.htmlElement)e.htmlElement.src=e.audio.src;e.audio.volume=a;e.audio.addEventListener("ended",function(){e.release();b()});c&&e.audio.play()};d.readAsDataURL(e.file)}else b()},ontagload:function(a,b){this.tags=(new G(a.target.result)).read();this.tags.type=this.type;this.tags.name=this.name;b(this.tags)},mytagreader:function(a){var b=this,c=new FileReader;c.onload=function(c){b.ontagload(c,a)};c.readAsBinaryString(this.file.webkitSlice(0,2E5))},tagread:function(a){this.mytagreader(a)},readpicture:function(){var a=
this,b=webkitURL.createObjectURL(this.file);try{ID3.loadTags(b,function(){var c=ID3.getAllTags(b);if(c&&c.picture)a.tags.picture=c.picture},{tags:["picture"],dataReader:FileAPIReader(this.file)})}catch(c){l(c)}},play:function(a,b){var c=this;if(c.audio){c.audio.volume=a;c.audio.addEventListener("ended",function(){c.release();b()});c.audio.play()}else c.musicread(a,b,true)},pause:function(){this.audio&&this.audio.pause()},resume:function(){this.audio&&this.audio.play()},paused:function(){return!this.audio||
this.audio.paused},setvolume:function(a){if(this.audio)this.audio.volume=a},mute:function(){this.predvol=this.audio.volume;this.setvolume(0)},release:function(){this.audio&&delete this.audio},seekBy:function(a){if(this.audio){var b=this.audio.currentTime,c=this.audio.duration;if(a<0&&b<-a){this.audio.currentTime=0;if(b<-a/4)return true}else this.audio.currentTime=b+a>c?c:this.audio.currentTime+a}}};var o={get:function(a){return localStorage.getItem(a)},set:function(a,b){localStorage.setItem(a,b)},
remove:function(a){localStorage.removeItem(a)},clear:function(){localStorage.clear()},getSetting:function(a){return o.get("store.settings."+a)},getSettingParse:function(a){return JSON.parse(o.get("store.settings."+a))}},F={"classic-default":{"background-color":{"div#wrapper":"#aaa","div#info":"#eee","div#playlist":"#fff","thead tr":"#ddd","div#musicSlider":"#aaa","div#musicSlider a":"#666","div#musicSlider a:focus":"#333","div#volumeSlider":"#eee","tbody tr:nth-child(odd) ":"#fff","tbody tr:nth-child(even) ":"#ddf",
"tbody tr.nP":"#aaf","tbody tr.ui-selected":"#08f"},color:{"tbody tr.ui-selected":"#fff"}},"classic-pink":{"background-color":{"div#wrapper":"#f66","div#info":"#fbb","thead tr":"#f99","div#musicSlider":"#f66","div#musicSlider a":"#844","div#musicSlider a:focus":"#622","div#volumeSlider":"#f88","tbody tr:nth-child(odd) ":"#fdd","tbody tr:nth-child(even) ":"#fbb","tbody tr.nP":"#f77","div#playlist":"#fdd","tbody tr.ui-selected":"#f22"},color:{"tbody tr.ui-selected":"#fff"}},"classic-yellow":{"background-color":{"div#wrapper":"#ff0",
"div#info":"#ff8","thead tr":"#ff8","div#musicSlider":"#ff0","div#musicSlider a":"#880","div#musicSlider a:focus":"#640","div#volumeSlider":"#ff8","tbody tr:nth-child(odd) ":"#ff7","tbody tr:nth-child(even) ":"#ff6","tbody tr.nP":"#ff4","div#playlist":"#ffb","tbody tr.ui-selected":"#ff0"},color:{"tbody tr.ui-selected":"#000!important"}},"classic-orange":{"background-color":{"div#wrapper":"#f80","div#info":"#fb8","thead tr":"#fb8","div#musicSlider":"#f80","div#musicSlider a":"#840","div#musicSlider a:focus":"#620",
"div#volumeSlider":"#fb8","tbody tr:nth-child(odd) ":"#ff8","tbody tr:nth-child(even) ":"#fd6","tbody tr.nP":"#fa0","div#playlist":"#fdb","tbody tr.ui-selected":"#f60"},color:{"tbody tr.ui-selected":"#000"}},"classic-lime":{"background-color":{"div#wrapper":"#6f6","div#info":"#bfb","div#playlist":"#fff","thead tr":"#9f9","div#musicSlider":"#6f6","div#musicSlider a":"#484","div#musicSlider a:focus":"#262","div#volumeSlider":"#8f8","tbody tr:nth-child(odd) ":"#dfd","tbody tr:nth-child(even) ":"#bfb",
"tbody tr.nP":"#7f7","div#playlist":"#dfd","tbody tr.ui-selected":"#2f2"},color:{"tbody tr.ui-selected":"#fff"}},"classic-blue":{"background-color":{"div#wrapper":"#66f","div#info":"#bbf","thead tr":"#99f","div#musicSlider":"#66f","div#musicSlider a":"#448","div#musicSlider a:focus":"#226","div#volumeSlider":"#88f","tbody tr:nth-child(odd) ":"#ddf","tbody tr:nth-child(even) ":"#bbf","tbody tr.nP":"#77f","div#playlist":"#ddf","tbody tr.ui-selected":"#22f"},color:{"tbody tr.ui-selected":"#fff"}},"classic-purple":{"background-color":{"div#wrapper":"#f0f",
"div#info":"#f8f","thead tr":"#f8f","div#musicSlider":"#f0f","div#musicSlider a":"#808","div#musicSlider a:focus":"#604","div#volumeSlider":"#f8f","tbody tr:nth-child(odd) ":"#f7f","tbody tr:nth-child(even) ":"#f6f","tbody tr.nP":"#f4f","div#playlist":"#fbf","tbody tr.ui-selected":"#f0f"},color:{"tbody tr.ui-selected":"#000"}},"classic-dark":{"background-color":{"div#wrapper":"#000","div#info":"#333","thead tr":"#333","div#musicSlider":"#000","div#musicSlider a":"#666","div#musicSlider a:focus":"#999",
"div#volumeSlider":"#333","div#volumeSlider a":"#666","div#volumeSlider a:focus":"#666","tbody tr:nth-child(odd) ":"#222","tbody tr:nth-child(even) ":"#292929","tbody tr.nP":"#444","div#playlist":"#111","tbody tr.ui-selected":"#080808"},color:{"div#wrapper":"#fff"}}},C={textarea:function(a){var b=document.createElement("textarea");b.style.position="absolute";b.style.left="-9999px";b.value=a;document.body.appendChild(b);return b},set:function(a){a=C.textarea(a);a.select();document.execCommand("Copy");
document.body.removeChild(a)},get:function(){var a=C.textarea("");a.focus();a.select();document.execCommand("Paste");setTimeout(function(){document.body.removeChild(a)},0);return a.value}},n={init:function(a){var b=this;b.player=a;b.div=function(a,b){a.forEach(function(a){b[a]=d("#"+a)});return b}(["about","conf","config","current","filename","fileselect","firstrow","globalcontrol","help","musicSlider","mute","next","open","pause","play","playlist","prev","property","remain","repeat","scheme","shuffle",
"tablebody","tablediv","tagread","volumeSlider","volumeon","wrapper","filter","filterword","matchnum","notification","notificationmsec","notificationresult","info","infowrapper","albumart","seek","splitter","hidden"],{tbody:d("#tbody"),thead:d("thead"),table:d("table"),video:document.getElementsByTagName("video")[0]});b.initdrop();b.initbuttons();b.colorset();b.initsize();b.initslider();b.selectableSet();b.initFilter();b.initsplitter();b.resizableSet();b.initClickEscape();b.fullScreenOff();d(j).resize(function(){b.initsize()});
d("div#appname a").text("Local Player ver "+a.version).click(function(){b.toggleAbout()})},initdrop:function(){var a=this;document.body.ondragover=function(a){a.preventDefault()};document.body.ondrop=function(b){b.stopPropagation();b.preventDefault();b.dataTransfer&&b.dataTransfer.files&&a.player.readFiles(b.dataTransfer.files)}},initbuttons:function(){function a(a){a=parseInt(parseInt(a,10)/1E3,10);return(a<10?"&nbsp;"+a:a)+"sec"}var b=this,c=b.player;b.div.open.click(function(){b.div.fileselect.click()});
b.div.fileselect.change(function(a){c.readFiles(a.target.files)});b.div.play.click(function(){c.toggle()});b.div.pause.click(function(){c.toggle()});b.div.prev.click(function(){c.prev()});b.div.next.click(function(){c.next()});b.div.mute.click(function(){c.mute()});b.div.volumeon.click(function(){c.resume()});b.div.repeat.click(function(){c.repeat.next()});b.div.shuffle.click(function(){c.shuffle.next();b.player.shuffle.value==="false"&&b.setorder()});b.div.conf.click(function(){j.open("./fancy-settings/source/index.html")});
d("img.lbutton, img.rbutton").mouseup(function(){d(this).css({top:"50%"})}).mousedown(function(){d(this).css({top:parseInt(d(this).css("top"),10)*1.03+"%"})});b.div.filename.click(function(){b.selectNowplaying()});b.div.tablebody.click(function(){b.focusIndex=0;b.focusUpdate(true)});b.div.globalcontrol.attr({checked:o.getSetting("globalcontrol")==="true"}).change(function(a){o.set("globalcontrol",a.target.checked.toString())});b.div.notification.attr({checked:(o.getSetting("notification")||"true")===
"true"}).change(function(a){o.set("notification",a.target.checked.toString());void 0===o.getSetting("notificationmsec")&&o.set("notificationmsec",b.div.notificationmsec.valueAsNumber)});o.set("notification",b.div.notification.attr("checked")==="checked");b.div.notificationmsec.attr({value:parseInt(o.getSetting("notificationmsec"),10)||5E3}).change(function(c){o.set("notificationmsec",c.target.valueAsNumber);b.div.notificationresult.html(a(c.target.valueAsNumber))});b.div.notificationresult.html(a(b.div.notificationmsec.attr("value")))},
initsize:function(){var a=this.div.tbody.width(),b=12*(j.innerWidth-1280)/2360+12;this.div.wrapper.css({"font-size":b});this.div.playlist.height(j.innerHeight-this.div.playlist.offset().top-b);this.div.tablediv.height(j.innerHeight-this.div.tablediv.offset().top-b);this.div.tablebody.height(j.innerHeight-this.div.tablebody.offset().top-b);d("tr").css({width:a})},initsplitter:function(){var a;a=o.get("splitter")===void 0?{now:0.05,filename:0.1,artist:0.2,title:0.3,track:0.05,album:0.25}:JSON.parse(o.get("splitter"));
for(var b in a)d("th."+b).width(a[b]*this.div.thead.width());this.afterResize()},initschemes:function(){var a=o.getSettingParse("scheme")||"classic-default",b=this,c;for(c in F)d("<a />").attr("scheme",c).css({color:F[c].color["div#wrapper"]||"black","background-color":F[c]["background-color"]["div#wrapper"]}).addClass(a===c?"currentScheme":"").click(function(){b.setscheme(d(this).attr("scheme"))}).appendTo(this.div.scheme)},initslider:function(){var a=this;this.div.volumeSlider.slider({min:0,max:256,
step:8,value:a.player.volume.value,slide:function(){a.player.updatevolume()},stop:function(){a.player.updatevolume()}});this.div.musicSlider.slider({min:0,max:1,step:0.01,start:function(b,c){a.startSlide(b,c)},stop:function(b,c){a.stopSlide(b,c)}}).slider("disable")},initClickEscape:function(){var a=this;a.div.help.click(function(){a.div.help.fadeOut(200);a.focusIndex=0;a.focusUpdate(true)});a.div.config.click(function(b){if(["a","input","textarea"].indexOf(b.target.localName)<0){a.div.config.fadeOut(200);
a.focusIndex=0;a.focusUpdate(true)}});a.div.about.click(function(b){if(b.target.localName!=="a"){a.div.about.fadeOut(200);a.focusIndex=0;a.focusUpdate(true)}});a.div.property.click(function(b){if(b.target.localName!=="a"){a.div.property.fadeOut(200);a.focusIndex=0;a.focusUpdate(true)}});setTimeout(function(){a.div.thead.find("th").each(function(b){d(this).click(function(b){var e=1;return function(){a.sortorder(b,e);e=e*-1}}(b))})},100)},setorder_identity:function(a){return a},setorder_replace_num:function(a){return parseInt(a.replace(/\uff11/,
"1").replace(/\uff12/,"2").replace(/\uff13/,"3").replace(/\uff14/,"4").replace(/\uff15/,"5").replace(/\uff16/,"6").replace(/\uff17/,"7").replace(/\uff18/,"8").replace(/\uff19/,"9").replace(/\uff10/,"0").replace(/[\0-\46]/g,"").replace(/\/.*/,""),10)},sortorder:function(){var a=[];return function(b,c){b===void 0&&(b=1);var e=d("th").eq(b).text()==="track"?this.setorder_replace_num:this.setorder_identity;a[1]=a[0]?b===a[0].i?a[1]:a[0]:{i:1,order:1,f:this.setorder_identity};a[0]={i:b,order:c,f:e};this.div.tbody.html(d("tr",
this.div.tbody).sort(function(){var d=a[1].order,i=b,g=a[1].i,h=[],j=[];return function(b,l){var k=b.getAttribute("number"),n=l.getAttribute("number"),o=h[k]||(h[k]=b.childNodes[i].innerText),r=h[n]||(h[n]=l.childNodes[i].innerText),k=j[k]||(j[k]=b.childNodes[g].innerText),n=j[n]||(j[n]=l.childNodes[g].innerText);return e(o)>e(r)?c:e(o)<e(r)?-c:a[1].f(k)>=a[1].f(n)?d:-d}}()));this.selectableSet();this.setorder();setTimeout(function(){n.div.tablebody.scrollTop(0)},10);setTimeout(function(){n.div.tablebody.scrollTop(0)},
50)}}(),setorder:function(){var a=[];d("tr",this.div.tbody).each(function(){a.push(parseInt(d(this).attr("number"),10))});this.player.order.changeArray(a);this.player.shuffle.value==="true"&&this.player.order.shuffleOn()},startSlide:function(){this.seeking&&clearInterval(this.seeking)},stopSlide:function(a,b){var c=this;if(c.player.seekAt(b.value))c.seeking=setInterval(function(){c.seek()},1E3)},slideZero:function(){this.div.musicSlider.slider({value:0});this.div.current.text("00:00")},addfile:function(a,
b){var c=[],e=-1,d=this.div.tbody.width();c[++e]='<tr class="music" number="';c[++e]=b;c[++e]='" style="width:';c[++e]=d;c[++e]='px;">';c[++e]='<td class="now">';c[++e]="<td></td>";c[++e]='<td><div class="filename" title="';c[++e]=a.name;c[++e]='" >';c[++e]=a.name;c[++e]="</div></td>";c[++e]='<td></td><td><div class="artist"></div></td><td></td><td><div class="title"></div></td><td></td><td><div class="track"></div></td><td></td><td><div class="album"></div></td></tr>';this.div.tbody[0].innerHTML=
this.div.tbody[0].innerHTML+c.join("")},ontagread:function(a,b){d("tr[number="+b+"]").find(".artist").texttitle(a.artist||"").end().find(".track").texttitle(a.track||"").end().find(".title").texttitle(a.title||"").end().find(".album").texttitle(a.album||"")},setdblclick:function(){var a=this;d("tr.music").dblclick(function(b){a.div.musicSlider.slider({value:0});b=parseInt(d(b.target).closest("tr").attr("number")||b.closest("tr").attr("number")||b.attr("number"),10);a.player.pause();a.player.play(b)})},
getvolume:function(){return parseInt(this.div.volumeSlider.slider("value"),10)},setvolume:function(a){this.div&&this.div.volumeSlider&&this.div.volumeSlider.slider({value:a})},popupvideo:function(){this.div.video.parentNode.style.visibility="visible"},hidevideo:function(){this.div.video.parentNode.style.visibility="hidden"},showAlbumArt:function(a){var b=d("img#art")[0];if(a.tags&&a.tags.picture)try{var c=a.tags.picture;b.src="data:"+c.format+";base64,"+Base64.encodeBytes(c.data);this.div.albumart.addClass("realart")}catch(e){l(e)}else{b.src=
"./icon_128.png";this.div.albumart.removeClass("realart")}},play:function(a){var b=this;b.div.musicSlider.slider("enable");var c=b.player.playing;this.fullScreen&&this.fullScreenOn();b.showFileName(c.name,a);d("tr.nP").removeClass("nP").find("img").remove();d("tr[number="+a.toString()+"]").addClass("nP").find(".now").append('<img src="./img/now.png">');a=d("tr.ui-selected");if(a.size()<2){a.UNSELECT(true);d("tr.nP").SELECT().LASTSELECT()}b.seeking&&clearInterval(b.seeking);b.seeking=setInterval(function(){b.seek()},
1E3);setTimeout(function(){b.reflesh()},50);setTimeout(function(){b.reflesh()},500);try{b.showAlbumArt(c);setTimeout(function(){b.showAlbumArt(c)},200)}catch(e){}},pause:function(){var a=this;this.seeking&&clearInterval(this.seeking);this.reflesh(false);setTimeout(function(){a.reflesh()},50)},reflesh:function(a){this.div.play.attr(a===false||this.player.playing!==void 0&&this.player.playing.paused()?{src:"./img/play.png",title:"Play"}:{src:"./img/pause.png",title:"Pause"})},seek:function(){var a=
function(a){a=parseInt(a,10);if(isNaN(a))return"00:00";var c=parseInt(a/60%60,10),e=parseInt(a/3600,10),a=a%60;return e>0?e.toString()+":"+(c<10?"0":"")+c.toString()+":"+(a<10?"0":"")+a.toString():(c<10?"0":"")+c.toString()+":"+(a<10?"0":"")+a.toString()};return function(){if(this.player.playing!=void 0&&this.player.playing.audio){var b=this.player.playing.audio.currentTime,c=this.player.playing.audio.duration;this.div.musicSlider.slider({value:b/c});this.div.current.text(a(b));this.div.remain.text("-"+
a(c-b))}}}(),colorset:function(){var a=o.getSettingParse("scheme")||"classic-default",b=F[a];d("a.currentScheme").removeClass("currentScheme");d("a[scheme="+a+"]").addClass("currentScheme");var a=[],c;for(c in b)for(var e in b[c])a.push(e+" { "+c+":"+b[c][e]+";}");d("style#sch").text(a.join("\n")).size()||d("<style />",{id:"sch"}).text(a.join("\n")).appendTo(d("head"))},setscheme:function(a){o.set("scheme",a);this.colorset()},resizableSet:function(){var a=this;d("th:not(.splitter)+th:not(.splitter)",
this.div.thead).each(function(){var b=false,c=d("<th />",{"class":"splitter"}).mousedown(function(){b=true}).insertBefore(d(this));d(j).mouseup(function(){if(b){b=false;a.afterResize()}}).mousemove(function(e){if(b){a.div.splitter.text("");var d=c.prev().width()+c.next().width();c.prev().width(e=-c.prev().offset().left+e.clientX);c.next().width(d-e)}})})},afterResize:function(){var a=[],b={},c=this.div.tbody.width();d("th:not(.splitter)").each(function(e){var f=(d(this).width()-1)/(c-0);a.push("tbody tr > td:nth-child("+
(2*e+1)+") {width:"+f*100+"%;}");a.push("tbody div.inside_helper > tr.ddms_move > td:nth-child("+(2*e+1)+") {width:"+f*100+"%;}");b[d(this).attr("class")]=f});this.div.splitter.text(a.join("\n"));o.set("splitter",JSON.stringify(b));this.selectableSet()},selectableSet:function(){var a=this,b=a.div.tbody.width(),c=d("<tbody />");d("tr",a.div.tbody).each(function(){var e=d(this),f=d("<tr />").attr({number:e.attr("number")}).append(e.children()).click(function(b){var c=d("tr.last-select");a.focusIndex=
0;a.focusUpdate(true);if(b.shiftKey&&!b.altKey&&c.size()){if(b.ctrlKey){var e=n.selected;setTimeout(function(){e.SELECT(true)},20)}b.clientY<c.position().top?setTimeout(function(){c.SELECT(true).LASTSELECT().prevAll().filter(function(){return d(this).position().top>b.clientY}).SELECT(true)},20):setTimeout(function(){c.SELECT(true).LASTSELECT().nextAll().filter(function(){return d(this).position().top<b.clientY}).SELECT(true)},20)}setTimeout(function(){n.selected=d(".ui-selected")},30)}).dblclick(function(b){b=
parseInt(d(b.target).closest("tr").attr("number")||b.closest("tr").attr("number")||b.attr("number"),10);a.player.pause();a.player.play(b)}).width(b).addClass(e.hasClass("nP")?"nP":"").addClass(e.hasClass("moved")?"ui-selected moved":"").addClass(e.hasClass("ui-selected")?"ui-selected":"").appendTo(c);e.ISSELECTED()&&setTimeout(function(){f.SELECT(true)},30)}).remove();this.div.tbody.replaceWith(c);this.div.tbody=c;d.fn.drag_drop_multi_select.unique=0;d.fn.drag_drop_multi_select.stack=[];d.fn.drag_drop_multi_select.settings=
[];this.div.tbody.drag_drop_multi_select({element_to_drag_drop_select:"tr, this.div.tbody",elements_to_drop:this.div.tbody,moveOpacity:0.7})},setrepeat:function(a){this.div&&this.div.repeat&&this.div.repeat.css({opacity:a==="false"?0.4:""}).attr({src:a==="one"?"./img/one.png":"./img/repeat.png"})},setshuffle:function(a){this.div&&this.div.shuffle&&this.div.shuffle.css({opacity:a.toString()==="true"?"":0.4})},prevNotification:null,showNotification:function(a,b,c){L.send({type:"notification",from:"player",
icon:a,title:b,message:c})},formatTags:function(a){return a&&a.TPE1&&a.TIT2?a.TPE1+" - "+a.TIT2:""},showFileName:function(a,b,c){var e=this,d=this.player.musics[b].tags,a=e.formatTags(d)||a;document.title=a;this.div.filename.texttitle(a);if(d&&d.picture||c){var i=d&&d.picture?d.picture:void 0;try{var g=i?"data:"+i.format+";base64,"+Base64.encodeBytes(i.data):"../icon_128.png"}catch(h){g="../icon_128.png"}e.formatTags(d)===""||!d.picture?c?d&&d.artist&&d.title&&d.album?e.showNotification(g,d.artist,
d.title+"  /  "+d.album):e.showNotification(g,a,""):setTimeout(function(){e.showFileName(a,b,true)},200):e.showNotification(g,d.artist,d.title+"  /  "+d.album)}else setTimeout(function(){e.showFileName(a,b,true)},200)},selectDown:function(){var a=n.selected;if(a.size())a.UNSELECT(true).next().andSelf().last().SELECT().LASTSELECT();else{a=d("tr.last-select");a.size()?a.removeClass("last-select").last().SELECT().LASTSELECT(true):d("tr.nP").next().andSelf().last().SELECT().LASTSELECT().size()||d("tr",
this.div.tbody).first().SELECT().LASTSELECT()}},extendDown:function(){var a=d("tr.last-select");a.size()&&(a.prev().ISSELECTED()?a.prevAll().filter(function(){var a=true;return function(){return a&&(a=d(this).ISSELECTED())}}()).last().UNSELECT():a.nextAll().filter(function(){var a=true;return function(){return a&&(a=d(this).prev().ISSELECTED())}}()).last().SELECT())},selectUp:function(){var a=n.selected;if(a.size())a.UNSELECT(true).prev().andSelf().first().SELECT().LASTSELECT();else{a=d("tr.last-select");
a.size()?a.removeClass("last-select").first().SELECT().LASTSELECT(true):d("tr.nP").prev().andSelf().first().SELECT().LASTSELECT().size()||d("tr",this.div.tbody).last().SELECT().LASTSELECT()}},extendUp:function(){var a=d("tr.last-select");a.size()&&(a.next().ISSELECTED()?a.nextAll().filter(function(){var a=true;return function(){return a&&(a=d(this).ISSELECTED())}}()).last().UNSELECT():a.prevAll().filter(function(){var a=true;return function(){return a&&(a=d(this).next().ISSELECTED())}}()).last().SELECT())},
selectHome:function(){d("tr.ui-selected").UNSELECT(true);this.div.tbody.children().first().SELECT().LASTSELECT()},extendToHome:function(){d("tr.ui-selected").removeClass("ui-selected ddms_selected");d("tr.last-select").SELECT(true).prevAll().SELECT(true).last().SELECT()},selectEnd:function(){d("tr.ui-selected").UNSELECT(true);this.div.tbody.children().last().SELECT().LASTSELECT()},extendToEnd:function(){d("tr.ui-selected").removeClass("ui-selected ddms_selected");d("tr.last-select").SELECT(true).nextAll().SELECT(true).last().SELECT()},
selectAll:function(){this.div.tbody.children().SELECT(true).last().LASTSELECT()},unselectAll:function(){this.div.tbody.children().UNSELECT(true)},selectInvert:function(){var a=d("tr.ui-selected");this.div.tbody.children().SELECT(true).last().LASTSELECT();a.UNSELECT(true)},toggleHelp:function(){this.div.help.fadeToggle(200);d("div#help:hidden").size()&&div.tablebody.focus()},toggleAbout:function(){this.div.about.fadeToggle(200)},deleteSelected:function(){var a=this.player;d("tr.ui-selected").last().next().LASTSELECT();
d("tr.ui-selected").first().prev().LASTSELECT(true);d("tr.ui-selected").map(function(b,c){return a.remove(parseInt(d(c).attr("number"),10))});d("tr.ui-selected").remove()},deleteAndNext:function(){var a=this.player;d("tr.ui-selected").UNSELECT();d("tr.nP").SELECT().LASTSELECT();n.deleteSelected();a.next()},selectNowplaying:function(){d("tr.ui-selected").UNSELECT();d("tr.nP").SELECT().LASTSELECT();this.focusIndex=0;this.focusUpdate()},pageDown:function(){this.div.tablebody.scrollTop(this.div.tablebody.scrollTop()+
this.div.tablebody.height()*0.8);d("tr.ui-selected").UNSELECT(true);var a=j.innerHeight;d("tr",this.div.tbody).filter(function(){return d(this).position().top<a}).last().SELECT().LASTSELECT()},extendPageDown:function(){var a=this;a.div.tablebody.scrollTop(a.div.tablebody.scrollTop()+a.div.tablebody.height()*0.8);if(d("tr.last-select").prev().ISSELECTED())d("tr.ui-selected").filter(function(){return d(this).position().top<a.div.thead.position().top+40}).UNSELECT(true);else{var b=j.innerHeight;d("tr.last-select").nextAll().filter(function(){return d(this).position().top<
b}).SELECT(true).last().SELECT()}},pageUp:function(){this.div.tablebody.scrollTop(this.div.tablebody.scrollTop()-this.div.tablebody.height()*0.8);d("tr.ui-selected").UNSELECT(true);d("tr",this.div.tbody).filter(function(){return d(this).position().top>0}).first().SELECT().LASTSELECT()},extendPageUp:function(){this.div.tablebody.scrollTop(this.div.tablebody.scrollTop()-this.div.tablebody.height()*0.8);var a=j.innerHeight,b=d("tr.last-select",this.div.tbody);b.next().ISSELECTED()?d("tr.ui-selected").filter(function(){return d(this).position().top>
a-50}).UNSELECT(true):b.prevAll().filter(function(){return d(this).position().top>0}).SELECT(true).last().SELECT()},defaultEnter:function(){if(!d("textarea#shortcuts:focus").size())switch(d("div#help:visible,div#config:visible,div#about:visible,div#property:visible").size()){case 0:var a=d("tr.last-select");if(a.size()){d("tr.ui-selected").UNSELECT(true);a.SELECT().children().first().dblclick()}else d("tr.ui-selected").UNSELECT(true).first().children().first().dblclick();break;default:this.div.config.add(this.div.help).add(this.div.property).add(this.div.about).filter(function(){return d(":visible",
this).size()}).last().fadeOut(200)}},viewInformation:function(){var a=this.player;this.div.property.fadeIn(200);if(a.tags){var b={TALB:"album",TIT2:"title",TPE1:"artist",TRCK:"track",TDRC:"year"},c=d("tr.ui-selected").map(function(b,c){return a.tags[parseInt(d(c).attr("number"),10)]}),e;for(e in b)d("dd#id"+b[e]).text("\u3000"+c.map(function(a,b){return b[e]}).unique().join())}},escape:function(){this.player.key.unlockAll();this.filterEnd();this.fullScreenOff();switch(d("#help:visible,#config:visible,#about:visible,#property:visible,#filter:visible").size()){case 0:if(d("div#musicSlider a:focus, div#volumeSlider a:focus").size()){d("div#musicSlider a, div#volumeSlider a").focusout();
this.focusIndex=0;this.focusUpdate(true)}else d("tr.ui-selected").UNSELECT(true);break;default:this.div.config.add(this.div.help).add(this.div.property).add(this.div.about).filter(function(){return d(":visible",this).size()}).last().fadeOut(200)}},click:function(a){var b=this.div[a]||d("img#"+a);b.mousedown().click();setTimeout(function(){b.mouseup()},200)},focusIndex:0,focusElements:function(){return[d("#hidden"),d("div#musicSlider a"),d("div#volumeSlider a")]},focusUpdate:function(a){console.log(this.focusIndex);
d("a,input").trigger("focusout");this.focusElements()[this.focusIndex].trigger("focusin");a||this.focusIndex===0&&(d("tr.ui-selected").first().SELECT().size()||d("tr.nP").SELECT().LASTSELECT())},focusToggle:function(){this.focusIndex=(this.focusIndex+1)%3;this.focusUpdate()},focusToggleReverse:function(){this.focusIndex=(this.focusIndex-1+this.focusElements().length)%3;this.focusUpdate()},fullScreen:!1,setVideoSize:function(a,b){this.div.video.style.width=a+"px";this.div.video.style.marginLeft=-a/
2+"px";this.div.video.style.height=b+"px";this.div.video.style.marginTop=-b/2+"px"},fullScreenOnVideo:function(){var a=this.div.video;a.controls=false;a.style.cursor="none";document.onmousemove=function(){a.controls=true;a.style.cursor="true";setTimeout(function(){a.controls=false;a.style.cursor="none"},1E3)};a.webkitRequestFullScreen?a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):this.setVideoSize(j.outerWidth,j.outerHeight)},fullScreenOnAudio:function(){this.div.info[0].webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);
var a=j.screen.availHeight,a=["div#wrapper div#info{","  height: "+a+"px!important;","}","div#wrapper div#filename{","  margin-top:"+0.4*a+"px!important;","}","div#wrapper div#seek{","  top:"+0.5*a+"px!important;","}","div#wrapper div#albumart{","  width: "+0.4*a+"px!important;","  height: "+0.4*a+"px!important;","  margin-top:"+-0.2*a+"px!important;","}","div#wrapper div#albumart img{","  width: "+0.4*a+"px!important;","  height: "+0.4*a+"px!important;","}"];d("style#full").text(a.join("\n"));this.div.info.addClass("full")},
fullScreenType:null,fullScreenOn:function(){if(this.player.playing){if(this.player.playing.filetype==="video"){if(this.fullScreen&&this.fullScreenType==="video")return;this.fullScreenOffAudio();this.fullScreenOnVideo();var a=this;setTimeout(function(){a.fullScreenOnVideo()},500);this.fullScreenType="video"}else if(this.player.playing.filetype==="audio"){if(this.fullScreen&&this.fullScreenType==="audio")return;this.fullScreenOffVideo();this.fullScreenOnAudio();this.fullScreenType="audio"}this.fullScreen=
true}},fullScreenOffVideo:function(){var a;document.webkitCancelFullScreen?document.webkitCancelFullScreen():this.setVideoSize(a=j.outerWidth*0.6,a/16*9)},fullScreenOffAudio:function(){this.div.info.removeClass("full");d("style#full").text("")},fullScreenOff:function(){this.fullScreenType="";this.fullScreen=false;this.fullScreenOffVideo();this.fullScreenOffAudio()},fullScreenToggle:function(){this.fullScreen?this.fullScreenOff():this.fullScreenOn()},initFilter:function(){var a=this;this.div.filterword.keydown(function(b){a.filterKeydown(b)})},
filterStart:function(){var a=[];d("ui-selected");this.div.filter.fadeIn(200);var b=this.div.filterword.focus()[0];b.selectionStart=0;b.selectionEnd=b.value.length;d("tr",this.div.tbody).each(function(b,e){var f=b,i=self.player.musics[d(e).attr("number")].tags,g=[];for(b in i)g.push(i[b]);a[f]=g.join("\u2022").toLowerCase()});this.div.matchnum.text("");this.filterTags=a},filterKeydown:function(a){var b=this;setTimeout(function(){if(a.keyCode===13)b.filterBlink();else if(a.keyCode===27)b.filterEnd();
else{var c=a.target.value.toLowerCase(),e=[],f=d("tr",b.div.tbody);d("tr.ui-selected",b.div.tbody).UNSELECT(true);if(c)try{b.filterTags.forEach(function(a,b){a.match(c)!==null&&e.push(b)});e.forEach(function(a){f.eq(a).SELECT(true)});b.div.matchnum.text(e.length+"/"+f.length);d("tr.ui-selected")}catch(i){}else b.div.matchnum.text("0/"+f.length)}},20)},filterEnd:function(){console.log("filterEnd");this.div.filter.fadeOut(200);this.div.filterword.focusout();n.div.hidden[0].focus();this.focusIndex=0;
this.focusUpdate(true)},filterIndex:0,filterBlink:function(){if(isNaN(this.filterIndex))this.filterIndex=0;var a=d("tr.ui-selected"),b=a.eq(this.filterIndex).UNSELECT(true);setTimeout(function(){b.SELECT(false,true).LASTSELECT()},200);this.filterIndex=++this.filterIndex%a.size()},keyview:function(){},copy:function(a){var b=d("tr.ui-selected"),c=b.size()?b.first().attr("number"):this.app.nowplaying,b=this.app.files[c],c=this.app.musics[c].tags;if(c[a])(a=c[a])&&C.set(a);else a==="info"?C.set((c.artist||
"")+" "+(c.title||"")+" "+(c.album||"")):a==="artist,title"?C.set((c.artist||"")+" "+(c.title||"")):a==="filename"&&C.set(b.name)},selected:d()};d.fn.SELECT=function(a,b){if(this.size()){this.addClass("ui-selected ddms_selected");n.selected=this;if(a)return this;var c=this.offset().top,d=n.div.tablebody.offset().top,f=c-30-d,c=c+60-n.div.tablediv.height()-d;f<0?b?n.div.tablebody.animate({scrollTop:"+="+f},{duration:"fast",easing:"linear"}):n.div.tablebody.scrollTop(n.div.tablebody.scrollTop()+f):
c>0&&(b?n.div.tablebody.animate({scrollTop:"+="+c},{duration:"fast",easing:"linear"}):n.div.tablebody.scrollTop(n.div.tablebody.scrollTop()+c))}return this};d.fn.UNSELECT=function(a){a||this.SELECT();n.selected=d();return this.removeClass("ui-selected ddms_selected last-select")};d.fn.LASTSELECT=function(a){a||d("tr.last-select",n.div.tbody).removeClass("last-select");n.selected=this;return this.addClass("last-select")};d.fn.ISSELECTED=function(){return this.hasClass("ui-selected")};d.fn.drag_drop_multi_select.defaults.while_dragging_action=
function(a){var b=a.originalEvent.clientY,a=d("tr",n.div.tbody),c=a.first().height()/2,e=a.filter(function(){var a=b-d(this).offset().top;return-c<=a&&a<c}).first();a.removeClass("dragover");var f=e.addClass("dragover");setTimeout(function(){f.removeClass("dragover")},5E3)};d.fn.drag_drop_multi_select.defaults.after_drop_action=function(a,b,c,e){h("drag_drop_multi_select.defaults.after_drop_action");var c=d("tr",n.div.tbody),b=a.first().attr("number"),f=c.first().height()/2,i=e.originalEvent.clientY,
e=c.filter(function(){var a=i-d(this).offset().top;return-f<=a&&a<f}).first();b===e.attr("number")&&(e=a.last().next());a.insertBefore(e).addClass("ui-selected moved");typeof setorderTimeout!=="undefined"&&clearTimeout(setorderTimeout);setorderTimeout=setTimeout(function(){n.selectableSet();n.setorder()},30);setTimeout(function(){d("tr.ui-selected",n.div.tbody).removeClass("ui-selected moved last-select")},1E3)};var s={regex:{white:/^((\s*)\s)/,keygroup:/^((<((([cmasg]\-)*)(f(10|11|12|1|2|3|4|5|6|7|8|9)|backspace|tab|enter|shift|ctrl|alt|esc|space|pgup|pgdn|end|home|left|up|right|down|insert|delete|ctrl|numlock|[*+/:;,\-.\/@\[\\\]\^]|[a-z]|[0-9])))>)/,
specialkeys:/^(f(10|11|12|1|2|3|4|5|6|7|8|9)|backspace|tab|enter|shift|ctrl|alt|esc|space|pgup|pgdn|end|home|left|up|right|down|insert|delete|ctrl|numlock|[*+/:;,\-.\/@\[\\\]\^])/,metakey:/^([cmasg])/,metakeypyphen:/^([cmasg]\-)/,smallalphabets:/^([a-z])/,number:/^([0-9])/,onekey:/^((<((([cmasg]\-)*)(f(10|11|12|1|2|3|4|5|6|7|8|9)|backspace|tab|enter|shift|ctrl|alt|esc|space|pgup|pgdn|end|home|left|up|right|down|insert|delete|ctrl|numlock|[*+/:;,\-.\/@\[\\\]\^]|[a-z]|[0-9])))>|f(10|11|12|1|2|3|4|5|6|7|8|9)|backspace|tab|enter|shift|ctrl|alt|esc|space|pgup|pgdn|end|home|left|up|right|down|insert|delete|ctrl|numlock|[*+/:;,\-.\/@\[\\\]\^]|[a-z]|[0-9]|<nop>)/,
command:/^((map|unmap|avoid)\s)/,rhscommand:/^([A-Z]([a-zA-Z]*))/,rhs:/^(((([A-Z]([a-zA-Z]*))((\s*)\s))*)([A-Z]([a-zA-Z]*)))/,comment:/^(#(.*))/},match:function(a,b){var c=b.str,d=this.regex[a].exec(c);if(d){d=d[0];c=c.slice(d.length);return{result:d,length:d.length,col:b.col+d.length,line:b.line,str:c}}return{str:c,col:b.col,line:b.line}},delwhite:function(a){return this.match("white",a)},delcomment:function(a){return this.match("comment",a)},delwhiteandcomment:function(a){return this.delcomment(this.delwhite(a))},
getallkey:function(a){for(var b=[],a=this.match("onekey",a);a.result;){b.push(a.result);if(a.str!==""){a=this.delwhiteandcomment(a);a=this.match("onekey",a)}else delete a.result}a.result=b;return a},parsekey:function(a){a={str:a,col:0,line:0};a=this.getallkey(a);return a.result},parseerror:function(a){l(a);throw a.str+"\nParse Error at line: "+a.line+" column: "+a.col;},parseavoid:function(){},errorifnullstr:function(a){a.str===""&&this.parseerror(a)},getcommand:function(a){a=this.match("command",
a);if(a.result){a.result=a.result.slice(0,-1);return a}this.parseerror(a)},parseline:function(a){a=this.delwhiteandcomment(a);if(a.str==="")return null;a=this.getcommand(a);if(a.result){var b=a.result;if(b==="avoid")this.parseavoid(a);else if(b==="unmap"||b==="gunmap"){a=this.delwhiteandcomment(a);this.errorifnullstr(a);a=this.getallkey(a);if(a.result===[])this.parseerror(a);else{var c=a.result,a=this.delwhiteandcomment(a);a.str!==""&&this.parseerror(a);return{obj:a,result:{command:b,result:c}}}}else{a=
this.delwhiteandcomment(a);this.errorifnullstr(a);a=this.getallkey(a);c=a.result;a=this.delwhiteandcomment(a);if(a.str==="")return{obj:a,result:{command:b,result:c}};if(a.result!==[]){a=this.delwhiteandcomment(a);this.errorifnullstr(a);a=this.match("rhscommand",a);if(a.result){var d=a.result,a=this.delwhiteandcomment(a);a.str!==""&&this.parseerror(a);return{obj:a,result:{command:b,result:c,rhscommand:d}}}}this.parseerror(a)}}else this.parseerror(a);return a},parselines:function(a){for(var b,c=[],
d=0;d<a.length;d++)(b=this.parseline({str:a[d],col:0,line:d+1}))&&c.push(b.result);return c}};"undefined"!==typeof exports&&(exports.Rc=s);"undefined"===typeof j&&(s=require("./rc").Rc);J.prototype={keys:[],callback:{},init:function(a){this.app=a;var b=this;d(j).keypress(function(a){switch(a.target.localName){case "input":case "textarea":break;default:b.prevent(a)}});d(j).keydown(function(a){console.dir(a.target);console.dir(a.target.id);switch(a.target.localName){case "input":case "textarea":break;
default:b.keydown(a);b.callback[b.convert(a)]&&b.prevent(a)}});b.viewshortcuts()},keydown:function(a){if(!this.onlyMeta(a)){this.app.ui.keyview(this.keyqueue.join(" ")+this.convert(a));this.keydownstr(this.convert(a),a)}},keydownstr:function(a,b){var c=this;c.keyqueue.push(a);if(c.triggerTimer){clearTimeout(c.triggerTimer);c.triggerTimer=void 0}c.triggerInstantly()?c.trigger(b):c.triggerTimer=setTimeout(function(){c.trigger(b)},c.watingTime)},triggerInstantly:function(){var a=this.keyqueue.join(" "),
b=this.keys.indexOf(a);return b<0?false:this.keys[b+1]!==void 0&&this.keys[b+1].indexOf(a)<0?true:false},onlyMeta:function(a){switch(this.codes[a.keyCode]){case "alt":case "ctrl":case "shift":return true;default:return false}},trigger:function(a){var b=this.callback[this.keyqueue.join(" ")];if(b){this.prevent(a);b.fn(this.app,a)}this.keyqueue=[]},keyqueue:[],triggerTimer:void 0,watingTime:480,prevent:function(a){a&&a.preventDefault&&a.preventDefault()},convert:function(a){var b=this.meta(a);return b!==
""||this.codes[a.keyCode]&&this.codes[a.keyCode].length>1?"<"+b+this.keyCode(a.keyCode)+">":this.keyCode(a.keyCode)},meta:function(a){return(a.global?"g-":"")+(a.ctrlKey||a.metaKey||this.lockconfig.ctrlKey?"c-":"")+(a.shiftKey||this.lockconfig.shiftKey?"s-":"")+(a.altKey||this.lockconfig.altKey?"a-":"")},parse:function(a){return s.parsekey(a)},keyinfo:[],numcommand:10,set:function(a,b){typeof b.fn==="function"?this.setfunction(a,b):typeof b==="string"&&this.setstring(a,b)},setfunction:function(a,
b){this.callback[a]=b;if(b.str!==""){for(var c=0,d=b.id*this.numcommand;c<this.numcommand&&this.keyinfo[d+c];)c++;c<this.numcommand&&(this.keyinfo[d+c]={callback:b,key:a,opt:b.opt})}},setstring:function(a,b){var c=this;c.callback[a]=function(d){var f=c.parse(b);if(f.length===1&&d[f[0]]){var i=d[f[0]],g=i.id,h=i.opt,j=i.str,d=g*c.numcommand;if(g&&j!==""&&!/g-/.test(a)){for(g=0;g<c.numcommand&&c.keyinfo[d+g];)g++;g<c.numcommand&&(c.keyinfo[d+g]={callback:i,key:a,opt:h})}else{j=a.replace("g-","");for(g=
0;g<c.numcommand;g++)if(c.keyinfo[d+g]&&c.keyinfo[d+g].key===j)c.keyinfo[d+g].key=a}}return{fn:function(){for(var a=0;a<f.length;a++)setTimeout(function(a){return function(){c.keydownstr(f[a])}}(a),5*a)},callback:i,key:a,opt:h}}(c.callback)},viewshortcuts:function(){d("<div />");for(var a=[],b=[],c=0;c<this.keyinfo.length;c++)if(!b[c]){b[c]=true;var e=this.keyinfo[c];if(e!==void 0){for(var f=s.parsekey(e.key).map(function(a){return new E(a)}).map(function(a){return a.toHTML()}).join(""),g=c-parseInt(c/
this.numcommand)*this.numcommand;g<this.numcommand;g++)if(!b[c+g]){var h=this.keyinfo[c+g];if(h&&h.opt.deepEqual(e.opt)){b[c+g]=true;h=s.parsekey(h.key).map(function(a){return new E(a)});f=f+" / ";f=f+h.map(function(a){return a.toHTML()}).join("")}}new E(e.key);g=e.callback.str;e=e.callback.type;f=d("<dt />").append(f);g=d("<dd />").text(g);a[e]||(a[e]=d("<dl />"));a[e].append(f).append(g)}}d("div.keygroup").remove();for(c=0;c<a.length;c++)(b=a[c])&&d("div.keygroups").append(d('<div class="keygroup"/>').append(b))},
lock:function(a){this.lockconfig[a]!==void 0&&(this.lockconfig[a]=true);return this},lockAll:function(){for(var a in this.lockconfig)this.lockconfig.hasOwnProperty(a)&&(this.lockconfig[a]=true)},unlock:function(a){this.lockconfig[a]!==void 0&&(this.lockconfig[a]=false);return this},unlockAll:function(){for(var a in this.lockconfig)this.lockconfig.hasOwnProperty(a)&&(this.lockconfig[a]=false)},togglelock:function(a){this.lockconfig[a]!==void 0&&(this.lockconfig[a]=!this.lockconfig[a]);return this},
lockconfig:{shiftKey:!1,ctrlKey:!1,altKey:!1,metaKey:!1},codes:{8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",27:"esc",32:"space",33:"pgup",34:"pgdn",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",91:"ctrl",106:"*",107:"+",111:"/",144:"numlock",186:":",187:";",188:",",189:"-",190:".",191:"/",192:"@",219:"[",220:"\\",221:"]",222:"^",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12"},keyCode:function(a){if(this.codes[a])return this.codes[a];
if(48<=a&&a<=57)return a-48;if(65<=a&&a<=90)return String.fromCharCode(a).toLowerCase();if(96<=a&&a<=105)return a-96;l("unknown key: "+a)}};E.prototype={parse:function(a){var b;if(b=s.regex.number.exec(a))this.key=b[0];else if(b=s.regex.smallalphabets.exec(a))this.key=b[0];else if(b=s.regex.specialkeys.exec(a))this.key=b[0];else if(s.regex.keygroup.exec(a)){a=a.slice(1).slice(0,-1);for(b=s.regex.metakeypyphen.exec(a);b;){a=a.slice(b[0].length);b=b[0][0];switch(b){case "c":this.ctrl=true;break;case "a":this.alt=
true;break;case "m":this.meta=true;break;case "s":this.shift=true;break;case "g":this.global=true}b=s.regex.metakeypyphen.exec(a)}this.key=a}else l("unknown key:"+a)},toHTML:function(){var a=[];this.ctrl&&a.push(this.wrapmetakey("Ctrl"));this.alt&&a.push(this.wrapmetakey("Alt"));this.shift&&a.push(this.wrapmetakey("Shift"));var b=this.toUpperCase(this.key).replace(/Left/,"\u2190").replace(/Right/,"\u2192").replace(/Up/,"\u2191").replace(/Down/,"\u2193");a.push(this.wrapkey(b));return this.wrapglobalkey(a.join(" + "))},
wrapkey:function(a){return'<span class="key">'+this.wrapltgt(a)+"</span>"},wrapltgt:function(a){return a.length>1?"&lt;"+a+"&gt;":a},wrapmetakey:function(a){return this.wrapkey(this.toUpperCase(a))},wrapglobalkey:function(a){return"<span "+(this.global?'class="global"':"")+"><span>"+a+"</span></span>"},toUpperCase:function(a){return a[0].toUpperCase()+a.slice(1)}};var g={DefaultEnter:function(a){return{opt:a,type:0,id:0,str:"Play selected file",fn:function(a){a.ui.defaultEnter()}}},PlayPause:function(a){return{opt:a,
type:0,id:1,str:"Play / Pause",fn:function(a){a.ui.click("play")}}},DeleteSelected:function(a){return{opt:a,type:0,id:2,str:"Delete selected files",fn:function(a){a.ui.deleteSelected()}}},NextMusic:function(a){return{opt:a,type:0,id:3,str:"Next",fn:function(a){a.next()}}},DeleteAndNext:function(a){return{opt:a,type:0,id:4,str:"Delete nowplaying and go next",fn:function(a){a.ui.deleteAndNext()}}},PreviousMusic:function(a){return{opt:a,type:0,id:5,str:"Previous",fn:function(a){a.prev()}}},SeekForward:function(a){var b=
parseInt(a[0],10);return{opt:a,type:0,id:6,str:"Seek forward by "+b+" seconds",fn:function(a){a.seekBy(b)}}},SeekBackward:function(a){var b=parseInt(a[0],10);return{opt:a,type:0,id:7,str:"Seek backward by "+b+" seconds",fn:function(a){a.seekBy(-b)}}},SeekPercent:function(a){return{opt:a,type:0,id:8,str:"",fn:function(b){b.seekAt(parseInt(a[0],10))}}},OpenFile:function(a){return{opt:a,type:1,id:9,str:"Open Files",fn:function(a){a.ui.click("open")}}},Interrupt:function(a){return{opt:a,type:1,id:10,
str:"Interrupt music importing",fn:function(a){a.interrupt()}}},ToggleRepeat:function(a){return{opt:a,type:1,id:11,str:"Toggle repeat",fn:function(a){a.ui.click("repeat")}}},ToggleShuffle:function(a){return{opt:a,type:1,id:12,str:"Toggle shuffle",fn:function(a){a.ui.click("shuffle")}}},FilterStart:function(a){return{opt:a,type:1,id:13,str:"Start filter",fn:function(a){a.ui.filterStart()}}},SelectDown:function(a){return{opt:a,type:1,id:14,str:"",fn:function(a){a.ui.selectDown()}}},ExtendDown:function(a){return{opt:a,
type:1,id:15,str:"",fn:function(a){a.ui.extendDown()}}},SelectUp:function(a){return{opt:a,type:1,id:16,str:"",fn:function(a){a.ui.selectUp()}}},ExtendUp:function(a){return{opt:a,type:1,id:17,str:"",fn:function(a){a.ui.extendUp()}}},SelectHome:function(a){return{opt:a,type:1,id:18,str:"",fn:function(a){a.ui.selectHome()}}},ExtendToHome:function(a){return{opt:a,type:1,id:19,str:"",fn:function(a){a.ui.extendToHome()}}},SelectEnd:function(a){return{opt:a,type:1,id:20,str:"",fn:function(a){a.ui.selectEnd()}}},
ExtendToEnd:function(a){return{opt:a,type:1,id:21,str:"",fn:function(a){a.ui.extendToEnd()}}},SelectAll:function(a){return{opt:a,type:1,id:22,str:"",fn:function(a){a.ui.selectAll()}}},UnselectAll:function(a){return{opt:a,type:1,id:23,str:"",fn:function(a){a.ui.unselectAll()}}},SelectInvert:function(a){return{opt:a,type:1,id:24,str:"Invert select",fn:function(a){a.ui.selectInvert()}}},PageDown:function(a){return{opt:a,type:1,id:25,str:"",fn:function(a){a.ui.pageDown()}}},ExtendPageDown:function(a){return{opt:a,
type:1,id:26,str:"",fn:function(a){a.ui.extendPageDown()}}},PageUp:function(a){return{opt:a,type:1,id:27,str:"",fn:function(a){a.ui.pageUp()}}},ExtendPageUp:function(a){return{opt:a,type:1,id:28,str:"",fn:function(a){a.ui.extendPageUp()}}},SelectNowplaying:function(a){return{opt:a,type:1,id:29,str:"",fn:function(a){a.ui.selectNowplaying()}}},ShiftLock:function(a){return{opt:a,type:1,id:30,str:"",fn:function(a){a.key.lock("shiftKey")}}},CtrlLock:function(a){return{opt:a,type:1,id:31,str:"",fn:function(a){a.key.lock("ctrlKey")}}},
AltLock:function(a){return{opt:a,type:1,id:32,str:"",fn:function(a){a.key.lock("altKey")}}},ShiftUnlock:function(a){return{opt:a,type:1,id:33,str:"",fn:function(a){a.key.unlock("shiftKey")}}},CtrlUnlock:function(a){return{opt:a,type:1,id:34,str:"",fn:function(a){a.key.unlock("ctrlKey")}}},AltUnlock:function(a){return{opt:a,type:1,id:35,str:"",fn:function(a){a.key.unlock("altKey")}}},ShiftToggleLock:function(a){return{opt:a,type:1,id:36,str:"",fn:function(a){a.key.togglelock("shiftKey")}}},CtrlToggleLock:function(a){return{opt:a,
type:1,id:37,str:"",fn:function(a){a.key.togglelock("ctrlKey")}}},AltToggleLock:function(a){return{opt:a,type:1,id:38,str:"",fn:function(a){a.key.togglelock("altKey")}}},VolumeUp:function(a){return{opt:a,type:2,id:39,str:"Volume up",fn:function(a){a.volumeup()}}},VolumeDown:function(a){return{opt:a,type:2,id:40,str:"Volume down",fn:function(a){a.volumedown()}}},VolumeMute:function(a){return{opt:a,type:2,id:41,str:"Volume mute",fn:function(a){a.ui.click("mute")}}},VolumeResume:function(a){return{opt:a,
type:2,id:42,str:"Resume from mute",fn:function(a){a.ui.click("volumeon")}}},VolumeToggleMute:function(a){return{opt:a,type:2,id:43,str:"Toggle mute",fn:function(a){a.ui.click(a.ismute()?"volumeon":"mute")}}},ToggleHelp:function(a){return{opt:a,type:3,id:44,str:"Keyboard shortcut",fn:function(a){a.ui.toggleHelp()}}},ToggleAbout:function(a){return{opt:a,type:3,id:45,str:"Application Information",fn:function(a){a.ui.toggleAbout()}}},OpenConfig:function(a){return{opt:a,type:3,id:46,str:"Configuration",
fn:function(a){a.ui.click("conf")}}},ViewInformation:function(a){return{opt:a,type:3,id:47,str:"Music information",fn:function(a){a.ui.viewInformation()}}},Escape:function(a){return{opt:a,type:3,id:48,str:"",fn:function(a){a.ui.escape()}}},FocusToggle:function(a){return{opt:a,type:3,id:49,str:"",fn:function(a){a.ui.focusToggle()}}},FocusToggleReverse:function(a){return{opt:a,type:3,id:50,str:"",fn:function(a){a.ui.focusToggleReverse()}}},FullScreenOn:function(a){return{opt:a,type:3,id:51,str:"",fn:function(a){a.ui.fullScreenOn()}}},
FullScreenOff:function(a){return{opt:a,type:3,id:52,str:"",fn:function(a){a.ui.fullScreenOff()}}},FullScreenToggle:function(a){return{opt:a,type:3,id:53,str:"Toggle fullscreen",fn:function(a){a.ui.fullScreenToggle()}}},CopyTitle:function(a){return{opt:a,type:4,id:54,str:"Copy Title",fn:function(a){a.ui.copy("title")}}},CopyArtist:function(a){return{opt:a,type:4,id:55,str:"Copy Artist",fn:function(a){a.ui.copy("artist")}}},CopyArtistTitle:function(a){return{opt:a,type:4,id:56,str:"Copy Artist and Title",
fn:function(a){a.ui.copy("artist/title")}}},CopyInformation:function(a){return{opt:a,type:4,id:57,str:"Copy Information",fn:function(a){a.ui.copy("info")}}},CopyFilename:function(a){return{opt:a,type:4,id:58,str:"Copy Filename",fn:function(a){a.ui.copy("filename")}}},Nop:function(a){return{opt:a,type:5,id:56,str:"",fn:function(){}}},Define:function(a){return{opt:a,type:5,id:57,str:"",fn:function(){}}}};B.prototype={version:"2.0",start:function(){for(var a in this)if(this[a]&&this[a].init){this[a].app=
this;this[a].init(this);l("init: "+a)}},files:[],musics:[],tags:[],playing:null,nowplaying:0,filetypes:{audio:{regexp:/audio\/(mp3|wav|ogg|m4a)/,string:"audio"},video:{regexp:/video\/(mp4)/,string:"video"}},readFiles:function(a){h("Player.prototype.readFiles");var b=this;[].forEach.call(a,function(c,d){a[d].filetype=c.type.match(b.filetypes.audio.regexp)?b.filetypes.audio.string:c.type.match(b.filetypes.video.regexp)?b.filetypes.video.string:""});var c=[].filter.call(a,function(a){return a.filetype!==
""}),d=b.shuffle.value==="false"?b.musics.length:b.musics.length+Math.floor(Math.random()*Math.min(30,c.length)),f=b.musics.length;b.interruptflag=false;b.asyncread(0,c,d-f)},interrupt:function(){this.interruptflag=true},asyncread:function(a,b,c){h("asyncread");this.readOneFile(b[a],a===c,a===b.length-1||this.interruptflag);var d=this;if(a+1<b.length&&!d.interruptflag)setTimeout(function(){d.asyncread(a+1,b,c)},a<60?0:a<150?100:150);else{d.interruptflag=false;d.order.concat(d.orderBuffer);d.orderBuffer=
[];d.order.shuffle.value==="true"&&d.order.shuffleOn()}},orderBuffer:[],readOneFile:function(a,b,c){h("readOneFile");var d=this.musics.length;this.files=this.files||[];this.files[d]=a;this.orderBuffer=this.orderBuffer.concat(d);this.musics[d]=new I(a,a.filetype==="video"?this.ui.div.video:null);this.musics[d].tagread(function(a,b,c){return function(g){a.tags[b]=g;a.ui.ontagread(g,b);c&&a.play(d)}}(this,d,!this.playing&&b));this.ui.addfile(a,d);if(c){this.ui.selectableSet();this.ui.setdblclick()}},
play:function(a){h("Player.prototype.play");console.log("order:"+this.order.array.join(","));console.log("index:"+a);var b=this;a===void 0&&(a=0);b.order.atfromEnum(a);b.pause();b.playing&&b.playing.release();if(a!==void 0){b.nowplaying=a;b.playing=b.musics[a];b.playing.tags&&!b.playing.tags.picture&&b.playing.readpicture();b.playing.play(b.volume.value/256,function(){b.next()});b.ui.play(a);b.playing.filetype==="video"?b.ui.popupvideo():b.ui.hidevideo()}},pause:function(){h("Player.prototype.pause");
this.ui.pause();this.playing&&this.playing.pause()},toggle:function(){h("Player.prototype.toggle");if(this.playing)if(this.playing.paused()){this.playing.resume();this.ui.play(this.nowplaying)}else this.pause()},nextundefinedcount:0,next:function(){h("Player.prototype.next");this.pause();this.ui.slideZero();var a=this.order.next();if(a===void 0){this.playing&&this.playing.release();this.nextundefinedcount++;if(this.nextundefinedcount<3)return;this.nextundefinedcount=0;a=this.order.head();if(a===void 0)return}this.play(a)},
prevundefinedcount:0,prev:function(){h("Player.prototype.prev");this.pause();var a=this.order.prev();if(a===void 0){this.playing&&this.playing.release();this.prevundefinedcount++;if(this.prevundefinedcount<3)return;this.prevundefinedcount=0;a=this.order.last();if(a===void 0)return}this.play(a)},seekAt:function(a){h("Player.prototype.seekAt");if(this.playing!==void 0&&this.playing.audio){a=Math.max(0,Math.min(1,a));this.playing.audio.currentTime=this.playing.audio.duration*a;return true}return false},
seekBy:function(a){h("Player.prototype.seekBy");this.nowplaying!==void 0&&this.playing&&this.playing.audio&&this.playing.seekBy(a)&&this.prev()},volume:new D(0,256,16,127),updatevolume:function(){h("Player.prototype.updatevolume");this.volume.at(this.ui.getvolume())},mute:function(){h("Player.prototype.mute");this.prevol=this.volume.value;this.volume.setToMin()},resume:function(){h("Player.prototype.resume");this.volume.at(this.prevol);delete this.prevol},togglemute:function(){h("Player.prototype.togglemute");
this.ismute()?this.resume():this.mute()},ismute:function(){h("Player.prototype.ismute");return this.volume.value===0&&this.prevol!==void 0},volumeup:function(){h("Player.prototype.volumeup");this.volume.increase()},volumedown:function(){h("Player.prototype.volumedown");this.volume.decrease()},remove:function(a){h("Player.prototype.remove");this[a]=null;l("removing:::"+a);this.order.remove(a);l(this.order);l(this.order.array)},order:new k([],null,function(){})};B.prototype.repeat=new t(["false","true",
"one"],function(){return o.get("repeat")||"false"},function(a,b){o.set("repeat",a);b.ui.setrepeat(a);a==="one"?b.order.repeatOne():a==="true"?b.order.repeatOn():b.order.repeatOff()});B.prototype.shuffle=new t(["false","true"],function(){return o.get("shuffle")||"false"},function(a,b){o.set("shuffle",a);b.ui.setshuffle(a);a==="true"?b.order.shuffleOn():b.order.shuffleOff()});B.prototype.volume=new D(0,256,16,function(){var a=parseInt(o.get("volume"),10);return a!==void 0?a:128},function(a,b){o.set("volume",
a);b.ui.setvolume(a);b.playing&&b.playing.setvolume(a/256)});B.prototype.message={init:function(){var a=this;chrome&&chrome.extension&&chrome.extension.onRequest.addListener(function(b){switch(b.type){case "globalkeydown-bg":l(b);a.app.key.keydown(b);break;case "changescheme":a.app.ui.colorset()}})}};B.prototype.vim={visual:new t([!1,!0],!1,function(){})};var M=new B;j.onload=function(){M.start()};B.prototype.key=new J({"<space>":g.PlayPause([]),"<c-space>":"<space>","<g-c-space>":"<space>","<c-right>":g.NextMusic([]),
"<g-c-right>":"<c-right>","<c-left>":g.PreviousMusic([]),"<g-c-left>":"<c-left>","<c-o>":g.OpenFile([]),":o":"<c-o>",":e":"<c-o>","<right>":g.SeekForward(["10"]),"<s-right>":g.SeekForward(["30"]),l:"<right>",w:"<s-right>","<left>":g.SeekBackward(["10"]),"<s-left>":g.SeekBackward(["30"]),h:"<left>",b:"<s-left>","<s-4>":g.SeekPercent(["100"]),"<c-d>":g.Interrupt([]),"<c-r>":g.ToggleRepeat([]),"<c-u>":g.ToggleShuffle([]),"<c-up>":g.VolumeUp([]),"<g-c-up>":"<c-up>","<c-down>":g.VolumeDown([]),"<g-c-down>":"<c-down>",
"<c-a-down>":g.VolumeToggleMute([]),"<g-c-a-down>":"<c-a-down>",9:g.VolumeDown([]),"0":g.VolumeUp([]),"<down>":g.SelectDown([]),j:"<down>","<s-down>":g.ExtendDown([]),"<s-j>":"<s-down>","<up>":g.SelectUp([]),k:"<up>","<s-up>":g.ExtendUp([]),"<s-k>":"<s-up>","<home>":g.SelectHome([]),gg:"<home>","<s-home>":g.ExtendToHome([]),"<end>":g.SelectEnd([]),"<s-g>":"<end>","<s-end>":g.ExtendToEnd([]),"<c-a>":g.SelectAll([]),"<c-s-a>":g.UnselectAll([]),"<c-i>":g.SelectInvert([]),"<pgdn>":g.PageDown([]),"<s-pgdn>":g.ExtendPageDown([]),
"<pgup>":g.PageUp([]),"<c-b>":"<pgup>","<s-pgup>":g.ExtendPageUp([]),np:g.SelectNowplaying([]),"<s-/>":g.ToggleHelp([]),"<f1>":g.ToggleAbout([]),"[":"<f1>","<c-,>":g.OpenConfig([]),"<delete>":g.DeleteSelected([]),"<c-]>":g.DeleteAndNext([]),"<backspace>":"<delete>",d:"<delete>","<esc>":g.Escape([]),"<s-esc>":"<esc>","<c-[>":"<esc>","<c-s-[>":"<esc>","<enter>":g.DefaultEnter([]),"<a-enter>":g.ViewInformation([]),pp:g.ViewInformation([]),"<tab>":"<nop>","<s-tab>":"<nop>",f:g.FullScreenToggle([]),"<c-s-f>":"f",
"<c-f>":g.FilterStart([]),"/":g.FilterStart([]),"<c-a-c>":g.CopyTitle([]),"<c-s-c>":g.CopyArtist([]),"<c-c>":g.CopyInformation([]),yy:g.CopyFilename([]),"<c-p>":"<nop>","<c-j>":"<nop>","<c-h>":"<nop>","<c-l>":"<nop>","<nop>":g.Nop([])});h=function(){};l=function(){}})(this,"undefined"!==typeof jQuery?jQuery:{});
